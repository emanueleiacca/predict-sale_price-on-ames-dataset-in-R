<!DOCTYPE html>
<!-- saved from url=(0070)file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emanuele Iaccarino">

<title>Final project</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="./Final project_files/clipboard.min.js.download"></script>
<script src="./Final project_files/quarto.js.download"></script>
<script src="./Final project_files/popper.min.js.download"></script>
<script src="./Final project_files/tippy.umd.min.js.download"></script>
<script src="./Final project_files/anchor.min.js.download"></script>
<link href="./Final project_files/tippy.css" rel="stylesheet">
<link href="./Final project_files/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Final project_files/bootstrap.min.js.download"></script>
<link href="./Final project_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Final project_files/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="./Final project_files/kePrint.js.download"></script>
<link href="./Final project_files/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="file:///C:/Users/39388/Downloads/styles.css">
</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#about-the-project" id="toc-about-the-project" class="nav-link active" data-scroll-target="#about-the-project">about the project</a>
  <ul class="">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#project-aim" id="toc-project-aim" class="nav-link" data-scroll-target="#project-aim">project aim</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#il-dataset" id="toc-il-dataset" class="nav-link" data-scroll-target="#il-dataset">Il dataset</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#interpretazione" id="toc-interpretazione" class="nav-link" data-scroll-target="#interpretazione">Interpretazione</a></li>
  </ul></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#variabile-di-risposta" id="toc-variabile-di-risposta" class="nav-link" data-scroll-target="#variabile-di-risposta">Variabile di Risposta</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#analisi-variabili-continue" id="toc-analisi-variabili-continue" class="nav-link" data-scroll-target="#analisi-variabili-continue">Analisi variabili Continue</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#scatterplot" id="toc-scatterplot" class="nav-link" data-scroll-target="#scatterplot">Scatterplot</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#correlazione-tra-variabili" id="toc-correlazione-tra-variabili" class="nav-link" data-scroll-target="#correlazione-tra-variabili">Correlazione tra variabili</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#outliers" id="toc-outliers" class="nav-link" data-scroll-target="#outliers">Outliers</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#creazione-dummy" id="toc-creazione-dummy" class="nav-link" data-scroll-target="#creazione-dummy">Creazione Dummy</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#creo-le-dummy" id="toc-creo-le-dummy" class="nav-link" data-scroll-target="#creo-le-dummy">Creo le Dummy</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#trasformazioni-logaritmiche" id="toc-trasformazioni-logaritmiche" class="nav-link" data-scroll-target="#trasformazioni-logaritmiche">Trasformazioni Logaritmiche</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#pulizia-dataset-ames_numeric" id="toc-pulizia-dataset-ames_numeric" class="nav-link" data-scroll-target="#pulizia-dataset-ames_numeric">Pulizia Dataset Ames_numeric</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#correlazione-con-la-y" id="toc-correlazione-con-la-y" class="nav-link" data-scroll-target="#correlazione-con-la-y">Correlazione con la y</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#analisi-variabili-categoriche" id="toc-analisi-variabili-categoriche" class="nav-link" data-scroll-target="#analisi-variabili-categoriche">Analisi variabili Categoriche</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#distribuzioni-di-frequenza" id="toc-distribuzioni-di-frequenza" class="nav-link" data-scroll-target="#distribuzioni-di-frequenza">Distribuzioni di Frequenza</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#boxplot" id="toc-boxplot" class="nav-link" data-scroll-target="#boxplot">Boxplot</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#interazione-tra-variabili-continue-e-categoriche" id="toc-interazione-tra-variabili-continue-e-categoriche" class="nav-link" data-scroll-target="#interazione-tra-variabili-continue-e-categoriche">Interazione tra variabili continue e categoriche</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#creazione-delle-dummy" id="toc-creazione-delle-dummy" class="nav-link" data-scroll-target="#creazione-delle-dummy">Creazione delle Dummy</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#seleziono-le-dummy-piu-importanti" id="toc-seleziono-le-dummy-piu-importanti" class="nav-link" data-scroll-target="#seleziono-le-dummy-piu-importanti">Seleziono le Dummy piu’ importanti</a></li>
  </ul></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#regressioni" id="toc-regressioni" class="nav-link" data-scroll-target="#regressioni">REGRESSIONI</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#best-subset-selection" id="toc-best-subset-selection" class="nav-link" data-scroll-target="#best-subset-selection">BEST SUBSET SELECTION</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#regressione-ridge-e-lasso" id="toc-regressione-ridge-e-lasso" class="nav-link" data-scroll-target="#regressione-ridge-e-lasso">REGRESSIONE RIDGE E LASSO</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#pca" id="toc-pca" class="nav-link" data-scroll-target="#pca">PCA</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#regression-tree" id="toc-regression-tree" class="nav-link" data-scroll-target="#regression-tree">REGRESSION TREE</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#pruning" id="toc-pruning" class="nav-link" data-scroll-target="#pruning">PRUNING</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#random-forest" id="toc-random-forest" class="nav-link" data-scroll-target="#random-forest">RANDOM FOREST</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#boosting" id="toc-boosting" class="nav-link" data-scroll-target="#boosting">BOOSTING</a></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#knn" id="toc-knn" class="nav-link" data-scroll-target="#knn">KNN</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#miglior-modello-di-regressione" id="toc-miglior-modello-di-regressione" class="nav-link" data-scroll-target="#miglior-modello-di-regressione">Miglior modello di Regressione</a>
  <ul class="collapse">
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#importanza-dei-dati-nella-pca" id="toc-importanza-dei-dati-nella-pca" class="nav-link" data-scroll-target="#importanza-dei-dati-nella-pca">Importanza dei dati nella PCA</a></li>
  </ul></li>
  <li><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#considerazioni-finali" id="toc-considerazioni-finali" class="nav-link" data-scroll-target="#considerazioni-finali">Considerazioni finali</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final project</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Emanuele Iaccarino </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="about-the-project" class="level1">
<h1>about the project</h1>
<section id="project-aim" class="level2" style="vertical-align: middle;">
<h2 style="vertical-align: middle;" class="anchored" data-anchor-id="project-aim">project aim<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#project-aim" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div style="color: indianred; font-size: 200%; text-align: center;">
<p>Predict sale price (<em>Sale_Price</em>) for houses in Ames, Iowa</p>
</div>
<section id="il-dataset" class="level3">
<h3 class="anchored" data-anchor-id="il-dataset">Il dataset<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#il-dataset" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(revealjs)</span>
<span id="cb1-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISLR)</span>
<span id="cb1-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span>
<span id="cb1-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb1-10" aria-hidden="true" tabindex="-1"></a>modeldata<span class="sc">::</span>ames <span class="sc">%&gt;%</span> glimpse</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,930
Columns: 74
$ MS_SubClass        &lt;fct&gt; One_Story_1946_and_Newer_All_Styles, One_Story_1946…
$ MS_Zoning          &lt;fct&gt; Residential_Low_Density, Residential_High_Density, …
$ Lot_Frontage       &lt;dbl&gt; 141, 80, 81, 93, 74, 78, 41, 43, 39, 60, 75, 0, 63,…
$ Lot_Area           &lt;int&gt; 31770, 11622, 14267, 11160, 13830, 9978, 4920, 5005…
$ Street             &lt;fct&gt; Pave, Pave, Pave, Pave, Pave, Pave, Pave, Pave, Pav…
$ Alley              &lt;fct&gt; No_Alley_Access, No_Alley_Access, No_Alley_Access, …
$ Lot_Shape          &lt;fct&gt; Slightly_Irregular, Regular, Slightly_Irregular, Re…
$ Land_Contour       &lt;fct&gt; Lvl, Lvl, Lvl, Lvl, Lvl, Lvl, Lvl, HLS, Lvl, Lvl, L…
$ Utilities          &lt;fct&gt; AllPub, AllPub, AllPub, AllPub, AllPub, AllPub, All…
$ Lot_Config         &lt;fct&gt; Corner, Inside, Corner, Corner, Inside, Inside, Ins…
$ Land_Slope         &lt;fct&gt; Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, G…
$ Neighborhood       &lt;fct&gt; North_Ames, North_Ames, North_Ames, North_Ames, Gil…
$ Condition_1        &lt;fct&gt; Norm, Feedr, Norm, Norm, Norm, Norm, Norm, Norm, No…
$ Condition_2        &lt;fct&gt; Norm, Norm, Norm, Norm, Norm, Norm, Norm, Norm, Nor…
$ Bldg_Type          &lt;fct&gt; OneFam, OneFam, OneFam, OneFam, OneFam, OneFam, Twn…
$ House_Style        &lt;fct&gt; One_Story, One_Story, One_Story, One_Story, Two_Sto…
$ Overall_Cond       &lt;fct&gt; Average, Above_Average, Above_Average, Average, Ave…
$ Year_Built         &lt;int&gt; 1960, 1961, 1958, 1968, 1997, 1998, 2001, 1992, 199…
$ Year_Remod_Add     &lt;int&gt; 1960, 1961, 1958, 1968, 1998, 1998, 2001, 1992, 199…
$ Roof_Style         &lt;fct&gt; Hip, Gable, Hip, Hip, Gable, Gable, Gable, Gable, G…
$ Roof_Matl          &lt;fct&gt; CompShg, CompShg, CompShg, CompShg, CompShg, CompSh…
$ Exterior_1st       &lt;fct&gt; BrkFace, VinylSd, Wd Sdng, BrkFace, VinylSd, VinylS…
$ Exterior_2nd       &lt;fct&gt; Plywood, VinylSd, Wd Sdng, BrkFace, VinylSd, VinylS…
$ Mas_Vnr_Type       &lt;fct&gt; Stone, None, BrkFace, None, None, BrkFace, None, No…
$ Mas_Vnr_Area       &lt;dbl&gt; 112, 0, 108, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6…
$ Exter_Cond         &lt;fct&gt; Typical, Typical, Typical, Typical, Typical, Typica…
$ Foundation         &lt;fct&gt; CBlock, CBlock, CBlock, CBlock, PConc, PConc, PConc…
$ Bsmt_Cond          &lt;fct&gt; Good, Typical, Typical, Typical, Typical, Typical, …
$ Bsmt_Exposure      &lt;fct&gt; Gd, No, No, No, No, No, Mn, No, No, No, No, No, No,…
$ BsmtFin_Type_1     &lt;fct&gt; BLQ, Rec, ALQ, ALQ, GLQ, GLQ, GLQ, ALQ, GLQ, Unf, U…
$ BsmtFin_SF_1       &lt;dbl&gt; 2, 6, 1, 1, 3, 3, 3, 1, 3, 7, 7, 1, 7, 3, 3, 1, 3, …
$ BsmtFin_Type_2     &lt;fct&gt; Unf, LwQ, Unf, Unf, Unf, Unf, Unf, Unf, Unf, Unf, U…
$ BsmtFin_SF_2       &lt;dbl&gt; 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1120, 0…
$ Bsmt_Unf_SF        &lt;dbl&gt; 441, 270, 406, 1045, 137, 324, 722, 1017, 415, 994,…
$ Total_Bsmt_SF      &lt;dbl&gt; 1080, 882, 1329, 2110, 928, 926, 1338, 1280, 1595, …
$ Heating            &lt;fct&gt; GasA, GasA, GasA, GasA, GasA, GasA, GasA, GasA, Gas…
$ Heating_QC         &lt;fct&gt; Fair, Typical, Typical, Excellent, Good, Excellent,…
$ Central_Air        &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, …
$ Electrical         &lt;fct&gt; SBrkr, SBrkr, SBrkr, SBrkr, SBrkr, SBrkr, SBrkr, SB…
$ First_Flr_SF       &lt;int&gt; 1656, 896, 1329, 2110, 928, 926, 1338, 1280, 1616, …
$ Second_Flr_SF      &lt;int&gt; 0, 0, 0, 0, 701, 678, 0, 0, 0, 776, 892, 0, 676, 0,…
$ Gr_Liv_Area        &lt;int&gt; 1656, 896, 1329, 2110, 1629, 1604, 1338, 1280, 1616…
$ Bsmt_Full_Bath     &lt;dbl&gt; 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, …
$ Bsmt_Half_Bath     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ Full_Bath          &lt;int&gt; 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 3, 2, …
$ Half_Bath          &lt;int&gt; 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, …
$ Bedroom_AbvGr      &lt;int&gt; 3, 2, 3, 3, 3, 3, 2, 2, 2, 3, 3, 3, 3, 2, 1, 4, 4, …
$ Kitchen_AbvGr      &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ TotRms_AbvGrd      &lt;int&gt; 7, 5, 6, 8, 6, 7, 6, 5, 5, 7, 7, 6, 7, 5, 4, 12, 8,…
$ Functional         &lt;fct&gt; Typ, Typ, Typ, Typ, Typ, Typ, Typ, Typ, Typ, Typ, T…
$ Fireplaces         &lt;int&gt; 2, 0, 0, 2, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, …
$ Garage_Type        &lt;fct&gt; Attchd, Attchd, Attchd, Attchd, Attchd, Attchd, Att…
$ Garage_Finish      &lt;fct&gt; Fin, Unf, Unf, Fin, Fin, Fin, Fin, RFn, RFn, Fin, F…
$ Garage_Cars        &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, …
$ Garage_Area        &lt;dbl&gt; 528, 730, 312, 522, 482, 470, 582, 506, 608, 442, 4…
$ Garage_Cond        &lt;fct&gt; Typical, Typical, Typical, Typical, Typical, Typica…
$ Paved_Drive        &lt;fct&gt; Partial_Pavement, Paved, Paved, Paved, Paved, Paved…
$ Wood_Deck_SF       &lt;int&gt; 210, 140, 393, 0, 212, 360, 0, 0, 237, 140, 157, 48…
$ Open_Porch_SF      &lt;int&gt; 62, 0, 36, 0, 34, 36, 0, 82, 152, 60, 84, 21, 75, 0…
$ Enclosed_Porch     &lt;int&gt; 0, 0, 0, 0, 0, 0, 170, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ Three_season_porch &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ Screen_Porch       &lt;int&gt; 0, 120, 0, 0, 0, 0, 0, 144, 0, 0, 0, 0, 0, 0, 140, …
$ Pool_Area          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ Pool_QC            &lt;fct&gt; No_Pool, No_Pool, No_Pool, No_Pool, No_Pool, No_Poo…
$ Fence              &lt;fct&gt; No_Fence, Minimum_Privacy, No_Fence, No_Fence, Mini…
$ Misc_Feature       &lt;fct&gt; None, None, Gar2, None, None, None, None, None, Non…
$ Misc_Val           &lt;int&gt; 0, 0, 12500, 0, 0, 0, 0, 0, 0, 0, 0, 500, 0, 0, 0, …
$ Mo_Sold            &lt;int&gt; 5, 6, 6, 4, 3, 6, 4, 1, 3, 6, 4, 3, 5, 2, 6, 6, 6, …
$ Year_Sold          &lt;int&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 201…
$ Sale_Type          &lt;fct&gt; WD , WD , WD , WD , WD , WD , WD , WD , WD , WD , W…
$ Sale_Condition     &lt;fct&gt; Normal, Normal, Normal, Normal, Normal, Normal, Nor…
$ Sale_Price         &lt;int&gt; 215000, 105000, 172000, 244000, 189900, 195500, 213…
$ Longitude          &lt;dbl&gt; -93.61975, -93.61976, -93.61939, -93.61732, -93.638…
$ Latitude           &lt;dbl&gt; 42.05403, 42.05301, 42.05266, 42.05125, 42.06090, 4…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(ames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#diamo un occhio ai dati</span></span>
<span id="cb4-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 74
  MS_SubC…¹ MS_Zo…² Lot_F…³ Lot_A…⁴ Street Alley Lot_S…⁵ Land_…⁶ Utili…⁷ Lot_C…⁸
  &lt;fct&gt;     &lt;fct&gt;     &lt;dbl&gt;   &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;  
1 One_Stor… Reside…     141   31770 Pave   No_A… Slight… Lvl     AllPub  Corner 
2 One_Stor… Reside…      80   11622 Pave   No_A… Regular Lvl     AllPub  Inside 
3 One_Stor… Reside…      81   14267 Pave   No_A… Slight… Lvl     AllPub  Corner 
4 One_Stor… Reside…      93   11160 Pave   No_A… Regular Lvl     AllPub  Corner 
5 Two_Stor… Reside…      74   13830 Pave   No_A… Slight… Lvl     AllPub  Inside 
6 Two_Stor… Reside…      78    9978 Pave   No_A… Slight… Lvl     AllPub  Inside 
# … with 64 more variables: Land_Slope &lt;fct&gt;, Neighborhood &lt;fct&gt;,
#   Condition_1 &lt;fct&gt;, Condition_2 &lt;fct&gt;, Bldg_Type &lt;fct&gt;, House_Style &lt;fct&gt;,
#   Overall_Cond &lt;fct&gt;, Year_Built &lt;int&gt;, Year_Remod_Add &lt;int&gt;,
#   Roof_Style &lt;fct&gt;, Roof_Matl &lt;fct&gt;, Exterior_1st &lt;fct&gt;, Exterior_2nd &lt;fct&gt;,
#   Mas_Vnr_Type &lt;fct&gt;, Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;fct&gt;, Foundation &lt;fct&gt;,
#   Bsmt_Cond &lt;fct&gt;, Bsmt_Exposure &lt;fct&gt;, BsmtFin_Type_1 &lt;fct&gt;,
#   BsmtFin_SF_1 &lt;dbl&gt;, BsmtFin_Type_2 &lt;fct&gt;, BsmtFin_SF_2 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [2,930 × 74] (S3: tbl_df/tbl/data.frame)
 $ MS_SubClass       : Factor w/ 16 levels "One_Story_1946_and_Newer_All_Styles",..: 1 1 1 1 6 6 12 12 12 6 ...
 $ MS_Zoning         : Factor w/ 7 levels "Floating_Village_Residential",..: 3 2 3 3 3 3 3 3 3 3 ...
 $ Lot_Frontage      : num [1:2930] 141 80 81 93 74 78 41 43 39 60 ...
 $ Lot_Area          : int [1:2930] 31770 11622 14267 11160 13830 9978 4920 5005 5389 7500 ...
 $ Street            : Factor w/ 2 levels "Grvl","Pave": 2 2 2 2 2 2 2 2 2 2 ...
 $ Alley             : Factor w/ 3 levels "Gravel","No_Alley_Access",..: 2 2 2 2 2 2 2 2 2 2 ...
 $ Lot_Shape         : Factor w/ 4 levels "Regular","Slightly_Irregular",..: 2 1 2 1 2 2 1 2 2 1 ...
 $ Land_Contour      : Factor w/ 4 levels "Bnk","HLS","Low",..: 4 4 4 4 4 4 4 2 4 4 ...
 $ Utilities         : Factor w/ 3 levels "AllPub","NoSeWa",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Lot_Config        : Factor w/ 5 levels "Corner","CulDSac",..: 1 5 1 1 5 5 5 5 5 5 ...
 $ Land_Slope        : Factor w/ 3 levels "Gtl","Mod","Sev": 1 1 1 1 1 1 1 1 1 1 ...
 $ Neighborhood      : Factor w/ 29 levels "North_Ames","College_Creek",..: 1 1 1 1 7 7 17 17 17 7 ...
 $ Condition_1       : Factor w/ 9 levels "Artery","Feedr",..: 3 2 3 3 3 3 3 3 3 3 ...
 $ Condition_2       : Factor w/ 8 levels "Artery","Feedr",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ Bldg_Type         : Factor w/ 5 levels "OneFam","TwoFmCon",..: 1 1 1 1 1 1 5 5 5 1 ...
 $ House_Style       : Factor w/ 8 levels "One_and_Half_Fin",..: 3 3 3 3 8 8 3 3 3 8 ...
 $ Overall_Cond      : Factor w/ 10 levels "Very_Poor","Poor",..: 5 6 6 5 5 6 5 5 5 5 ...
 $ Year_Built        : int [1:2930] 1960 1961 1958 1968 1997 1998 2001 1992 1995 1999 ...
 $ Year_Remod_Add    : int [1:2930] 1960 1961 1958 1968 1998 1998 2001 1992 1996 1999 ...
 $ Roof_Style        : Factor w/ 6 levels "Flat","Gable",..: 4 2 4 4 2 2 2 2 2 2 ...
 $ Roof_Matl         : Factor w/ 8 levels "ClyTile","CompShg",..: 2 2 2 2 2 2 2 2 2 2 ...
 $ Exterior_1st      : Factor w/ 16 levels "AsbShng","AsphShn",..: 4 14 15 4 14 14 6 7 6 14 ...
 $ Exterior_2nd      : Factor w/ 17 levels "AsbShng","AsphShn",..: 11 15 16 4 15 15 6 7 6 15 ...
 $ Mas_Vnr_Type      : Factor w/ 5 levels "BrkCmn","BrkFace",..: 5 4 2 4 4 2 4 4 4 4 ...
 $ Mas_Vnr_Area      : num [1:2930] 112 0 108 0 0 20 0 0 0 0 ...
 $ Exter_Cond        : Factor w/ 5 levels "Excellent","Fair",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ Foundation        : Factor w/ 6 levels "BrkTil","CBlock",..: 2 2 2 2 3 3 3 3 3 3 ...
 $ Bsmt_Cond         : Factor w/ 6 levels "Excellent","Fair",..: 3 6 6 6 6 6 6 6 6 6 ...
 $ Bsmt_Exposure     : Factor w/ 5 levels "Av","Gd","Mn",..: 2 4 4 4 4 4 3 4 4 4 ...
 $ BsmtFin_Type_1    : Factor w/ 7 levels "ALQ","BLQ","GLQ",..: 2 6 1 1 3 3 3 1 3 7 ...
 $ BsmtFin_SF_1      : num [1:2930] 2 6 1 1 3 3 3 1 3 7 ...
 $ BsmtFin_Type_2    : Factor w/ 7 levels "ALQ","BLQ","GLQ",..: 7 4 7 7 7 7 7 7 7 7 ...
 $ BsmtFin_SF_2      : num [1:2930] 0 144 0 0 0 0 0 0 0 0 ...
 $ Bsmt_Unf_SF       : num [1:2930] 441 270 406 1045 137 ...
 $ Total_Bsmt_SF     : num [1:2930] 1080 882 1329 2110 928 ...
 $ Heating           : Factor w/ 6 levels "Floor","GasA",..: 2 2 2 2 2 2 2 2 2 2 ...
 $ Heating_QC        : Factor w/ 5 levels "Excellent","Fair",..: 2 5 5 1 3 1 1 1 1 3 ...
 $ Central_Air       : Factor w/ 2 levels "N","Y": 2 2 2 2 2 2 2 2 2 2 ...
 $ Electrical        : Factor w/ 6 levels "FuseA","FuseF",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ First_Flr_SF      : int [1:2930] 1656 896 1329 2110 928 926 1338 1280 1616 1028 ...
 $ Second_Flr_SF     : int [1:2930] 0 0 0 0 701 678 0 0 0 776 ...
 $ Gr_Liv_Area       : int [1:2930] 1656 896 1329 2110 1629 1604 1338 1280 1616 1804 ...
 $ Bsmt_Full_Bath    : num [1:2930] 1 0 0 1 0 0 1 0 1 0 ...
 $ Bsmt_Half_Bath    : num [1:2930] 0 0 0 0 0 0 0 0 0 0 ...
 $ Full_Bath         : int [1:2930] 1 1 1 2 2 2 2 2 2 2 ...
 $ Half_Bath         : int [1:2930] 0 0 1 1 1 1 0 0 0 1 ...
 $ Bedroom_AbvGr     : int [1:2930] 3 2 3 3 3 3 2 2 2 3 ...
 $ Kitchen_AbvGr     : int [1:2930] 1 1 1 1 1 1 1 1 1 1 ...
 $ TotRms_AbvGrd     : int [1:2930] 7 5 6 8 6 7 6 5 5 7 ...
 $ Functional        : Factor w/ 8 levels "Maj1","Maj2",..: 8 8 8 8 8 8 8 8 8 8 ...
 $ Fireplaces        : int [1:2930] 2 0 0 2 1 1 0 0 1 1 ...
 $ Garage_Type       : Factor w/ 7 levels "Attchd","Basment",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Garage_Finish     : Factor w/ 4 levels "Fin","No_Garage",..: 1 4 4 1 1 1 1 3 3 1 ...
 $ Garage_Cars       : num [1:2930] 2 1 1 2 2 2 2 2 2 2 ...
 $ Garage_Area       : num [1:2930] 528 730 312 522 482 470 582 506 608 442 ...
 $ Garage_Cond       : Factor w/ 6 levels "Excellent","Fair",..: 6 6 6 6 6 6 6 6 6 6 ...
 $ Paved_Drive       : Factor w/ 3 levels "Dirt_Gravel",..: 2 3 3 3 3 3 3 3 3 3 ...
 $ Wood_Deck_SF      : int [1:2930] 210 140 393 0 212 360 0 0 237 140 ...
 $ Open_Porch_SF     : int [1:2930] 62 0 36 0 34 36 0 82 152 60 ...
 $ Enclosed_Porch    : int [1:2930] 0 0 0 0 0 0 170 0 0 0 ...
 $ Three_season_porch: int [1:2930] 0 0 0 0 0 0 0 0 0 0 ...
 $ Screen_Porch      : int [1:2930] 0 120 0 0 0 0 0 144 0 0 ...
 $ Pool_Area         : int [1:2930] 0 0 0 0 0 0 0 0 0 0 ...
 $ Pool_QC           : Factor w/ 5 levels "Excellent","Fair",..: 4 4 4 4 4 4 4 4 4 4 ...
 $ Fence             : Factor w/ 5 levels "Good_Privacy",..: 5 3 5 5 3 5 5 5 5 5 ...
 $ Misc_Feature      : Factor w/ 6 levels "Elev","Gar2",..: 3 3 2 3 3 3 3 3 3 3 ...
 $ Misc_Val          : int [1:2930] 0 0 12500 0 0 0 0 0 0 0 ...
 $ Mo_Sold           : int [1:2930] 5 6 6 4 3 6 4 1 3 6 ...
 $ Year_Sold         : int [1:2930] 2010 2010 2010 2010 2010 2010 2010 2010 2010 2010 ...
 $ Sale_Type         : Factor w/ 10 levels "COD","Con","ConLD",..: 10 10 10 10 10 10 10 10 10 10 ...
 $ Sale_Condition    : Factor w/ 6 levels "Abnorml","AdjLand",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ Sale_Price        : int [1:2930] 215000 105000 172000 244000 189900 195500 213500 191500 236500 189000 ...
 $ Longitude         : num [1:2930] -93.6 -93.6 -93.6 -93.6 -93.6 ...
 $ Latitude          : num [1:2930] 42.1 42.1 42.1 42.1 42.1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                               MS_SubClass  
 One_Story_1946_and_Newer_All_Styles :1079  
 Two_Story_1946_and_Newer            : 575  
 One_and_Half_Story_Finished_All_Ages: 287  
 One_Story_PUD_1946_and_Newer        : 192  
 One_Story_1945_and_Older            : 139  
 Two_Story_PUD_1946_and_Newer        : 129  
 (Other)                             : 529  
                        MS_Zoning     Lot_Frontage       Lot_Area     
 Floating_Village_Residential: 139   Min.   :  0.00   Min.   :  1300  
 Residential_High_Density    :  27   1st Qu.: 43.00   1st Qu.:  7440  
 Residential_Low_Density     :2273   Median : 63.00   Median :  9436  
 Residential_Medium_Density  : 462   Mean   : 57.65   Mean   : 10148  
 A_agr                       :   2   3rd Qu.: 78.00   3rd Qu.: 11555  
 C_all                       :  25   Max.   :313.00   Max.   :215245  
 I_all                       :   2                                    
  Street                 Alley                     Lot_Shape    Land_Contour
 Grvl:  12   Gravel         : 120   Regular             :1859   Bnk: 117    
 Pave:2918   No_Alley_Access:2732   Slightly_Irregular  : 979   HLS: 120    
             Paved          :  78   Moderately_Irregular:  76   Low:  60    
                                    Irregular           :  16   Lvl:2633    
                                                                            
                                                                            
                                                                            
  Utilities      Lot_Config   Land_Slope             Neighborhood 
 AllPub:2927   Corner : 511   Gtl:2789   North_Ames        : 443  
 NoSeWa:   1   CulDSac: 180   Mod: 125   College_Creek     : 267  
 NoSewr:   2   FR2    :  85   Sev:  16   Old_Town          : 239  
               FR3    :  14              Edwards           : 194  
               Inside :2140              Somerset          : 182  
                                         Northridge_Heights: 166  
                                         (Other)           :1439  
  Condition_1    Condition_2      Bldg_Type              House_Style  
 Norm   :2522   Norm   :2900   OneFam  :2425   One_Story       :1481  
 Feedr  : 164   Feedr  :  13   TwoFmCon:  62   Two_Story       : 873  
 Artery :  92   Artery :   5   Duplex  : 109   One_and_Half_Fin: 314  
 RRAn   :  50   PosA   :   4   Twnhs   : 101   SLvl            : 128  
 PosN   :  39   PosN   :   4   TwnhsE  : 233   SFoyer          :  83  
 RRAe   :  28   RRNn   :   2                   Two_and_Half_Unf:  24  
 (Other):  35   (Other):   2                   (Other)         :  27  
        Overall_Cond    Year_Built   Year_Remod_Add   Roof_Style  
 Average      :1654   Min.   :1872   Min.   :1950   Flat   :  20  
 Above_Average: 533   1st Qu.:1954   1st Qu.:1965   Gable  :2321  
 Good         : 390   Median :1973   Median :1993   Gambrel:  22  
 Very_Good    : 144   Mean   :1971   Mean   :1984   Hip    : 551  
 Below_Average: 101   3rd Qu.:2001   3rd Qu.:2004   Mansard:  11  
 Fair         :  50   Max.   :2010   Max.   :2010   Shed   :   5  
 (Other)      :  58                                               
   Roof_Matl     Exterior_1st   Exterior_2nd   Mas_Vnr_Type   Mas_Vnr_Area   
 CompShg:2887   VinylSd:1026   VinylSd:1015   BrkCmn :  25   Min.   :   0.0  
 Tar&amp;Grv:  23   MetalSd: 450   MetalSd: 447   BrkFace: 880   1st Qu.:   0.0  
 WdShake:   9   HdBoard: 442   HdBoard: 406   CBlock :   1   Median :   0.0  
 WdShngl:   7   Wd Sdng: 420   Wd Sdng: 397   None   :1775   Mean   : 101.1  
 ClyTile:   1   Plywood: 221   Plywood: 274   Stone  : 249   3rd Qu.: 162.8  
 Membran:   1   CemntBd: 126   CmentBd: 126                  Max.   :1600.0  
 (Other):   2   (Other): 245   (Other): 265                                  
     Exter_Cond    Foundation         Bsmt_Cond        Bsmt_Exposure 
 Excellent:  12   BrkTil: 311   Excellent  :   3   Av         : 418  
 Fair     :  67   CBlock:1244   Fair       : 104   Gd         : 284  
 Good     : 299   PConc :1310   Good       : 122   Mn         : 239  
 Poor     :   3   Slab  :  49   No_Basement:  80   No         :1906  
 Typical  :2549   Stone :  11   Poor       :   5   No_Basement:  83  
                  Wood  :   5   Typical    :2616                     
                                                                     
     BsmtFin_Type_1  BsmtFin_SF_1       BsmtFin_Type_2  BsmtFin_SF_2    
 ALQ        :429    Min.   :0.000   ALQ        :  53   Min.   :   0.00  
 BLQ        :269    1st Qu.:3.000   BLQ        :  68   1st Qu.:   0.00  
 GLQ        :859    Median :3.000   GLQ        :  34   Median :   0.00  
 LwQ        :154    Mean   :4.177   LwQ        :  89   Mean   :  49.71  
 No_Basement: 80    3rd Qu.:7.000   No_Basement:  81   3rd Qu.:   0.00  
 Rec        :288    Max.   :7.000   Rec        : 106   Max.   :1526.00  
 Unf        :851                    Unf        :2499                    
  Bsmt_Unf_SF     Total_Bsmt_SF   Heating         Heating_QC   Central_Air
 Min.   :   0.0   Min.   :   0   Floor:   1   Excellent:1495   N: 196     
 1st Qu.: 219.0   1st Qu.: 793   GasA :2885   Fair     :  92   Y:2734     
 Median : 465.5   Median : 990   GasW :  27   Good     : 476              
 Mean   : 559.1   Mean   :1051   Grav :   9   Poor     :   3              
 3rd Qu.: 801.8   3rd Qu.:1302   OthW :   2   Typical  : 864              
 Max.   :2336.0   Max.   :6110   Wall :   6                               
                                                                          
   Electrical    First_Flr_SF    Second_Flr_SF     Gr_Liv_Area  
 FuseA  : 188   Min.   : 334.0   Min.   :   0.0   Min.   : 334  
 FuseF  :  50   1st Qu.: 876.2   1st Qu.:   0.0   1st Qu.:1126  
 FuseP  :   8   Median :1084.0   Median :   0.0   Median :1442  
 Mix    :   1   Mean   :1159.6   Mean   : 335.5   Mean   :1500  
 SBrkr  :2682   3rd Qu.:1384.0   3rd Qu.: 703.8   3rd Qu.:1743  
 Unknown:   1   Max.   :5095.0   Max.   :2065.0   Max.   :5642  
                                                                
 Bsmt_Full_Bath   Bsmt_Half_Bath      Full_Bath       Half_Bath     
 Min.   :0.0000   Min.   :0.00000   Min.   :0.000   Min.   :0.0000  
 1st Qu.:0.0000   1st Qu.:0.00000   1st Qu.:1.000   1st Qu.:0.0000  
 Median :0.0000   Median :0.00000   Median :2.000   Median :0.0000  
 Mean   :0.4311   Mean   :0.06109   Mean   :1.567   Mean   :0.3795  
 3rd Qu.:1.0000   3rd Qu.:0.00000   3rd Qu.:2.000   3rd Qu.:1.0000  
 Max.   :3.0000   Max.   :2.00000   Max.   :4.000   Max.   :2.0000  
                                                                    
 Bedroom_AbvGr   Kitchen_AbvGr   TotRms_AbvGrd      Functional  
 Min.   :0.000   Min.   :0.000   Min.   : 2.000   Typ    :2728  
 1st Qu.:2.000   1st Qu.:1.000   1st Qu.: 5.000   Min2   :  70  
 Median :3.000   Median :1.000   Median : 6.000   Min1   :  65  
 Mean   :2.854   Mean   :1.044   Mean   : 6.443   Mod    :  35  
 3rd Qu.:3.000   3rd Qu.:1.000   3rd Qu.: 7.000   Maj1   :  19  
 Max.   :8.000   Max.   :3.000   Max.   :15.000   Maj2   :   9  
                                                  (Other):   4  
   Fireplaces                  Garage_Type     Garage_Finish   Garage_Cars   
 Min.   :0.0000   Attchd             :1731   Fin      : 728   Min.   :0.000  
 1st Qu.:0.0000   Basment            :  36   No_Garage: 159   1st Qu.:1.000  
 Median :1.0000   BuiltIn            : 186   RFn      : 812   Median :2.000  
 Mean   :0.5993   CarPort            :  15   Unf      :1231   Mean   :1.766  
 3rd Qu.:1.0000   Detchd             : 782                    3rd Qu.:2.000  
 Max.   :4.0000   More_Than_Two_Types:  23                    Max.   :5.000  
                  No_Garage          : 157                                   
  Garage_Area        Garage_Cond             Paved_Drive    Wood_Deck_SF    
 Min.   :   0.0   Excellent:   3   Dirt_Gravel     : 216   Min.   :   0.00  
 1st Qu.: 320.0   Fair     :  74   Partial_Pavement:  62   1st Qu.:   0.00  
 Median : 480.0   Good     :  15   Paved           :2652   Median :   0.00  
 Mean   : 472.7   No_Garage: 159                           Mean   :  93.75  
 3rd Qu.: 576.0   Poor     :  14                           3rd Qu.: 168.00  
 Max.   :1488.0   Typical  :2665                           Max.   :1424.00  
                                                                            
 Open_Porch_SF    Enclosed_Porch    Three_season_porch  Screen_Porch
 Min.   :  0.00   Min.   :   0.00   Min.   :  0.000    Min.   :  0  
 1st Qu.:  0.00   1st Qu.:   0.00   1st Qu.:  0.000    1st Qu.:  0  
 Median : 27.00   Median :   0.00   Median :  0.000    Median :  0  
 Mean   : 47.53   Mean   :  23.01   Mean   :  2.592    Mean   : 16  
 3rd Qu.: 70.00   3rd Qu.:   0.00   3rd Qu.:  0.000    3rd Qu.:  0  
 Max.   :742.00   Max.   :1012.00   Max.   :508.000    Max.   :576  
                                                                    
   Pool_Area            Pool_QC                   Fence      Misc_Feature
 Min.   :  0.000   Excellent:   4   Good_Privacy     : 118   Elev:   1   
 1st Qu.:  0.000   Fair     :   2   Good_Wood        : 112   Gar2:   5   
 Median :  0.000   Good     :   4   Minimum_Privacy  : 330   None:2824   
 Mean   :  2.243   No_Pool  :2917   Minimum_Wood_Wire:  12   Othr:   4   
 3rd Qu.:  0.000   Typical  :   3   No_Fence         :2358   Shed:  95   
 Max.   :800.000                                             TenC:   1   
                                                                         
    Misc_Val           Mo_Sold         Year_Sold      Sale_Type   
 Min.   :    0.00   Min.   : 1.000   Min.   :2006   WD     :2536  
 1st Qu.:    0.00   1st Qu.: 4.000   1st Qu.:2007   New    : 239  
 Median :    0.00   Median : 6.000   Median :2008   COD    :  87  
 Mean   :   50.63   Mean   : 6.216   Mean   :2008   ConLD  :  26  
 3rd Qu.:    0.00   3rd Qu.: 8.000   3rd Qu.:2009   CWD    :  12  
 Max.   :17000.00   Max.   :12.000   Max.   :2010   ConLI  :   9  
                                                    (Other):  21  
 Sale_Condition   Sale_Price       Longitude         Latitude    
 Abnorml: 190   Min.   : 12789   Min.   :-93.69   Min.   :41.99  
 AdjLand:  12   1st Qu.:129500   1st Qu.:-93.66   1st Qu.:42.02  
 Alloca :  24   Median :160000   Median :-93.64   Median :42.03  
 Family :  46   Mean   :180796   Mean   :-93.64   Mean   :42.03  
 Normal :2413   3rd Qu.:213500   3rd Qu.:-93.62   3rd Qu.:42.05  
 Partial: 245   Max.   :755000   Max.   :-93.58   Max.   :42.06  
                                                                 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb10-1" aria-hidden="true" tabindex="-1"></a>missing_data<span class="ot">=</span><span class="fu">colSums</span>(<span class="fu">is.na</span>(ames))</span>
<span id="cb10-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb10-2" aria-hidden="true" tabindex="-1"></a>missing_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       MS_SubClass          MS_Zoning       Lot_Frontage           Lot_Area 
                 0                  0                  0                  0 
            Street              Alley          Lot_Shape       Land_Contour 
                 0                  0                  0                  0 
         Utilities         Lot_Config         Land_Slope       Neighborhood 
                 0                  0                  0                  0 
       Condition_1        Condition_2          Bldg_Type        House_Style 
                 0                  0                  0                  0 
      Overall_Cond         Year_Built     Year_Remod_Add         Roof_Style 
                 0                  0                  0                  0 
         Roof_Matl       Exterior_1st       Exterior_2nd       Mas_Vnr_Type 
                 0                  0                  0                  0 
      Mas_Vnr_Area         Exter_Cond         Foundation          Bsmt_Cond 
                 0                  0                  0                  0 
     Bsmt_Exposure     BsmtFin_Type_1       BsmtFin_SF_1     BsmtFin_Type_2 
                 0                  0                  0                  0 
      BsmtFin_SF_2        Bsmt_Unf_SF      Total_Bsmt_SF            Heating 
                 0                  0                  0                  0 
        Heating_QC        Central_Air         Electrical       First_Flr_SF 
                 0                  0                  0                  0 
     Second_Flr_SF        Gr_Liv_Area     Bsmt_Full_Bath     Bsmt_Half_Bath 
                 0                  0                  0                  0 
         Full_Bath          Half_Bath      Bedroom_AbvGr      Kitchen_AbvGr 
                 0                  0                  0                  0 
     TotRms_AbvGrd         Functional         Fireplaces        Garage_Type 
                 0                  0                  0                  0 
     Garage_Finish        Garage_Cars        Garage_Area        Garage_Cond 
                 0                  0                  0                  0 
       Paved_Drive       Wood_Deck_SF      Open_Porch_SF     Enclosed_Porch 
                 0                  0                  0                  0 
Three_season_porch       Screen_Porch          Pool_Area            Pool_QC 
                 0                  0                  0                  0 
             Fence       Misc_Feature           Misc_Val            Mo_Sold 
                 0                  0                  0                  0 
         Year_Sold          Sale_Type     Sale_Condition         Sale_Price 
                 0                  0                  0                  0 
         Longitude           Latitude 
                 0                  0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#non ci sono valori mancanti</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="interpretazione" class="level3">
<h3 class="anchored" data-anchor-id="interpretazione">Interpretazione<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#interpretazione" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Riassunto delle variabili del modello per facilitarne l’interpretazione:</p>
<ul>
<li><p>SalePrice: il prezzo di vendita della casa in dollari.</p></li>
<li><p>MSSubClass: la classe di abitazione, che pu? essere una singola unit? residenziale, una porzione di una casa a schiera, un appartamento, ecc.</p></li>
<li><p>MSZoning: la zona in cui si trova la casa, ad esempio R esidenziale, C commercio, I industria, ecc.</p></li>
<li><p>LotFrontage: la lunghezza del marciapiede lungo la strada su cui si trova la casa.</p></li>
<li><p>LotArea: la dimensione del terreno su cui si trova la casa, in piedi quadrati.</p></li>
<li><p>Street: il tipo di strada su cui si trova la casa, come pavimentata o non pavimentata.</p></li>
<li><p>Alley: se c’? un vicolo dietro la casa o meno.</p></li>
<li><p>LotShape: la forma del terreno su cui si trova la casa, ad esempio rettangolare, irregolare, ecc.</p></li>
<li><p>LandContour: il profilo del terreno su cui si trova la casa, ad esempio pianeggiante, in pendenza, ecc.</p></li>
<li><p>Utilities: i servizi di utilit? disponibili per la casa, come l’acqua, l’elettricit?, il gas, ecc.</p></li>
<li><p>LotConfig: la configurazione del terreno su cui si trova la casa, ad esempio angolo, fronte strada, dentro isolato, ecc.</p></li>
<li><p>LandSlope: la pendenza del terreno su cui si trova la casa, ad esempio pianeggiante, in pendenza, ecc.</p></li>
<li><p>Neighborhood: il quartiere in cui si trova la casa.</p></li>
<li><p>Condition1: la posizione della casa rispetto a importanti strade o ferrovie.</p></li>
<li><p>Condition2: la posizione della casa rispetto a importanti strade o ferrovie (se ci sono pi? di una)</p></li>
<li><p>BldgType: il tipo di edificio, ad esempio singola unit? residenziale, porzione di una casa a schiera, appartamento, ecc.</p></li>
<li><p>HouseStyle: lo stile architettonico della casa.</p></li>
<li><p>OverallQual: la qualit? generale della casa, valutata su una scala da 1 a 10.</p></li>
<li><p>OverallCond: la condizione generale della casa, valutata su una scala da 1 a 10.</p></li>
<li><p>YearBuilt: l’anno in cui ? stata costruita la casa.</p></li>
<li><p>YearRemodAdd: l’anno in cui ? stata ristrutturata l’ultima volta la casa.</p></li>
<li><p>RoofStyle: lo stile del tetto.</p></li>
<li><p>RoofMatl: il materiale utilizzato per il tetto.</p></li>
<li><p>Exterior1st: il materiale utilizzato per il rivestimento esterno principale della casa.</p></li>
<li><p>Exterior2nd: il materiale utilizzato per il rivestimento esterno secondario della casa.</p></li>
<li><p>MasVnrType: il tipo di materiale utilizzato per la decorazione della facciata, come intonaco, mattoni, ecc.</p></li>
<li><p>MasVnrArea: la dimensione dell’area decorata della facciata, in piedi quadrati.</p></li>
<li><p>ExterQual: la qualit? del rivestimento esterno della casa, valutata su una scala da 1 a 10.</p></li>
<li><p>ExterCond: la condizione del rivestimento esterno della casa, valutata su una scala da 1 a 10.</p></li>
<li><p>Foundation: il tipo di fondazione della casa, ad esempio in cemento, in muratura, ecc.</p></li>
<li><p>BsmtQual: la qualit? del seminterrato, valutata su una scala da 1 a 10.</p></li>
<li><p>BsmtCond: la condizione del seminterrato, valutata su una scala da 1 a 10.</p></li>
<li><p>BsmtExposure: l’esposizione del seminterrato, ad esempio se ? esposto o meno.</p></li>
<li><p>BsmtFinType1: lo stato di finitura del seminterrato, ad esempio finito, parzialmente finito, ecc.</p></li>
<li><p>BsmtFinSF1: la dimensione dell’area finita del seminterrato, in piedi quadrati.</p></li>
<li><p>BsmtFinType2: lo stato di finitura del seminterrato (se ci sono pi? di una zona), ad esempio finito, parzialmente finito, ecc.</p></li>
<li><p>BsmtFinSF2: la dimensione dell’area finita del seminterrato (se ci sono pi? di una zona), in piedi quadrati.</p></li>
<li><p>BsmtUnfSF: la dimensione dell’area non finita del seminterrato, in piedi quadrati.</p></li>
<li><p>TotalBsmtSF: la dimensione totale dell’area del seminterrato, in piedi quadrati.</p></li>
<li><p>Heating: il sistema di riscaldamento utilizzato nella casa.</p></li>
<li><p>HeatingQC: la qualit? del sistema di riscaldamento, valutata su una scala da 1 a 10.</p></li>
<li><p>CentralAir: se c’? aria condizionata centralizzata nella casa o meno.</p></li>
<li><p>Electrical: il sistema elettrico utilizzato nella casa.</p></li>
<li><p>1stFlrSF: la dimensione dell’area del primo piano, in piedi quadrati.</p></li>
<li><p>2ndFlrSF: la dimensione dell’area del secondo piano, in piedi quadrati.</p></li>
<li><p>LowQualFinSF: la dimensione dell’area finita di scarsa qualit?, in piedi quadrati.</p></li>
<li><p>Gr Liv Area: Superficie abitabile al piano terra in piedi quadrati.</p></li>
<li><p>Bsmt_Full_Bath : numero di bagni completi nel seminterrato</p></li>
<li><p>Bsmt_Half_Bath : numero di bagni non completi nel seminterrato (contiene lavandino e gabinetto, ma non la doccia)</p></li>
<li><p>Full Bath: Numero di bagni completi nella casa.</p></li>
<li><p>Half Bath: Numero di bagni con solo lavandino e toilette nella casa.</p></li>
<li><p>Bedroom AbvGr: Numero di camere da letto al piano superiore.</p></li>
<li><p>Kitchen AbvGr: Numero di cucine al piano superiore.</p></li>
<li><p>TotRms AbvGrd: Numero totale di stanze al piano superiore.</p></li>
<li><p>Garage Type: Tipo di garage (ad esempio, annesso, indipendente, nessun garage, ecc.).</p></li>
<li><p>Garage Finish”: Livello di finitura del garage (ad esempio, finito, grezzo, nessuna finitura, ecc.).</p></li>
<li><p>Garage Cars: Numero di auto che possono essere parcheggiate nel garage.</p></li>
<li><p>Garage Area: Superficie del garage in piedi quadrati.</p></li>
<li><p>Garage Qual: Valutazione della qualit? del garage, in una scala da 1 a 10.</p></li>
<li><p>Garage Cond: Valutazione della condizione del garage, in una scala da 1 a 10</p></li>
<li><p>Paved Drive: Indica se il vialetto di ingresso ? pavimentato.</p></li>
<li><p>Wood Deck SF: Superficie del ponte in legno in piedi</p></li>
<li><p>Open Porch SF: Superficie della veranda aperta in piedi quadrati.</p></li>
<li><p>Enclosed Porch: Superficie della veranda chiusa in piedi quadrati.</p></li>
<li><p>3Ssn Porch: Superficie della veranda a tre stagioni in piedi quadrati.</p></li>
<li><p>Screen Porch: Superficie della veranda con schermi in piedi quadrati.</p></li>
<li><p>Pool Area: Superficie della piscina in piedi quadrati.</p></li>
<li><p>Pool QC: Valutazione della qualit? della piscina, in una scala da 1 a 10.</p></li>
<li><p>Fence: Valutazione della qualit? del recinto intorno alla casa, in una scala da 1 a 10.</p></li>
<li><p>Misc Feature: Altre caratteristiche della casa (ad esempio, ascensore, ripostiglio, ecc.).</p></li>
<li><p>Misc Val: Valore in dollari delle caratteristiche elencate in “Misc Feature”.</p></li>
<li><p>Mo Sold: Mese in cui la casa ? stata venduta.</p></li>
<li><p>Yr Sold: Anno in cui la casa ? stata venduta.</p></li>
<li><p>SalePrice: Prezzo di vendita della casa in dollari.</p></li>
<li><p>Sale Condition: Condizione della vendita (ad esempio, vendita sopra il valore di mercato, vendita sotto il valore di mercato, ecc</p></li>
<li><p>Longitude</p></li>
<li><p>Latitude</p></li>
</ul>
</section>
</section>
</section>
<section id="variabile-di-risposta" class="level1">
<h1>Variabile di Risposta</h1>
<p>INIZIAMO ANALIZZANDO LA VARIABILE DI RISPOSTA</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ames, <span class="fu">aes</span>(<span class="at">x =</span> Sale_Price)) <span class="sc">+</span> </span>
<span id="cb13-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>, <span class="at">col=</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#vediamo che il prezzo delle case ? molto variabile, dalle statistiche descrittive notiamo che va da un minimo di 12789 a un massimo 755500, con media di 160000. Per abbattere la varianza bisogna trasformare la variabile esplicativa y(Sale_price) in logaritmo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="trasformiamo-la-variabile-di-risposta-in-log" class="level4">
<h4 class="anchored" data-anchor-id="trasformiamo-la-variabile-di-risposta-in-log">Trasformiamo la variabile di risposta in log<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#trasformiamo-la-variabile-di-risposta-in-log" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb15-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb15-2" aria-hidden="true" tabindex="-1"></a>sale_price_log<span class="ot">=</span><span class="fu">log</span>(ames<span class="sc">$</span>Sale_Price)</span>
<span id="cb15-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ames, <span class="fu">aes</span>(<span class="at">x =</span> sale_price_log)) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>, <span class="at">col=</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ames) <span class="sc">+</span> </span>
<span id="cb16-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_qq</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">sample =</span> Sale_Price)) <span class="sc">+</span> </span>
<span id="cb16-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Q-Q Plot for Sale_Price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ames) <span class="sc">+</span> </span>
<span id="cb17-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_qq</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">sample =</span> sale_price_log)) <span class="sc">+</span> </span>
<span id="cb17-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Q-Q Plot for sale_price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#confermiamo quanto detto in precedenza</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="analisi-variabili-continue" class="level1">
<h1>Analisi variabili Continue</h1>
<section id="scatterplot" class="level2">
<h2 class="anchored" data-anchor-id="scatterplot">Scatterplot<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#scatterplot" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#CREO DEGLI SCATTERPLOT PER OGNI VARIABILE RISPETTO ALLA Y(SALE_PRICE) ATTRAVERSO UN CICLO FOR PER NON RIPETERE X VOLTE IL PROCESSO</span></span>
<span id="cb19-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-2" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ames, is.numeric)</span>
<span id="cb19-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-3" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames[, numeric_vars] <span class="co">#prendo solo le variabili numeriche</span></span>
<span id="cb19-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#ora creo i plot attraverso il ciclo for</span></span>
<span id="cb19-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> <span class="fu">names</span>(ames_numeric)){</span>
<span id="cb19-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  plot<span class="ot">=</span><span class="fu">ggplot</span>(ames_numeric, <span class="fu">aes_string</span>(<span class="at">x =</span> var, <span class="at">y =</span> <span class="st">"Sale_Price"</span>)) <span class="sc">+</span></span>
<span id="cb19-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb19-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(var, <span class="st">" vs Sale_Price"</span>)) <span class="sc">+</span></span>
<span id="cb19-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(var) <span class="sc">+</span></span>
<span id="cb19-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price"</span>)</span>
<span id="cb19-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb19-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb19-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation ideoms with `aes()`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-7.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-8.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-9.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-10.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-11.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-12.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-13.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-14.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-15.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-16.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-17.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-18.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-19.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-20.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-21.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-22.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-23.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-24.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-25.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-26.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-27.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-28.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-29.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-30.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-31.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-32.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-33.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-6-34.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>dai grafici noto che queste variabili non sembrano avere una relazione lineare con la variabili di risposta Sale_price:</p>
<p>`LotFrontage`</p>
<p>`BsmtHalfBath`</p>
<p>`BedroomAbvGr`</p>
<p>`KitchenAbvGr`</p>
<p>`OpenPorchSF`</p>
<p>`PoolArea`</p>
<p>`3SsnPorch``</p>
<p>`ScreenPorch`</p>
<p>`MiscVal`</p>
<p>`MoSold`</p>
<p>`YrSold`</p>
<p>`Longitude`</p>
<p>`Latitude`</p>
<p>Ne tengo conto ma prima di rimuoverle preferisco effettuare un double check</p>
</section>
<section id="correlazione-tra-variabili" class="level2">
<h2 class="anchored" data-anchor-id="correlazione-tra-variabili">Correlazione tra variabili<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#correlazione-tra-variabili" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<section id="heatmap" class="level4">
<h4 class="anchored" data-anchor-id="heatmap">HeatMap<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#heatmap" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<p>ci diamo un idea veloce della correlazione tra variabili attraverso questa heatmap, dove le tonalit? si fanno piu’ forti quando la correlazione ? piu’ alta</p>
<p>https://www.geeksforgeeks.org/how-to-create-correlation-heatmap-in-r/</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>corrplot 0.92 loaded</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-1" aria-hidden="true" tabindex="-1"></a>heatmap.cor.lab <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb57-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">keep</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-5" aria-hidden="true" tabindex="-1"></a>    cor <span class="sc">%&gt;%</span></span>
<span id="cb57-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">corrplot</span>(<span class="at">addCoef.col =</span> <span class="st">'white'</span>,</span>
<span id="cb57-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">number.digits =</span> <span class="dv">2</span>,</span>
<span id="cb57-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">number.cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb57-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">method =</span> <span class="st">'square'</span>)</span>
<span id="cb57-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb57-11" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="sc">%&gt;%</span> heatmap.cor.lab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-7-1.png" class="img-fluid" width="1920"></p>
</div>
</div>
</section>
<section id="multicollinearit-test" class="level4">
<h4 class="anchored" data-anchor-id="multicollinearit-test">Multicollinearit? Test<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#multicollinearit-test" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Caricamento del pacchetto richiesto: lattice</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Caricamento pacchetto: 'caret'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>I seguenti oggetti sono mascherati da 'package:yardstick':

    precision, recall, sensitivity, specificity</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Il seguente oggetto è mascherato da 'package:purrr':

    lift</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#identifico le variabili ad alta correlazione</span></span>
<span id="cb63-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb63-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(ames_numeric)</span>
<span id="cb63-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb63-3" aria-hidden="true" tabindex="-1"></a>high_corr <span class="ot">&lt;-</span> <span class="fu">findCorrelation</span>(corr_matrix, <span class="at">cutoff =</span> <span class="fl">0.8</span>) <span class="co">#mi restituisce le variabile con correlazione maggiore di 0,8, la soglia che ritengo significativa</span></span>
<span id="cb63-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb63-4" aria-hidden="true" tabindex="-1"></a>high_corr_vars <span class="ot">&lt;-</span> <span class="fu">colnames</span>(ames_numeric)[high_corr]</span>
<span id="cb63-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb63-5" aria-hidden="true" tabindex="-1"></a>high_corr_vars <span class="co">#dato che ci veniva restituito solo il numero della variabile ho aggiunto il codice per ottenere il nome della variabile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Gr_Liv_Area"  "First_Flr_SF" "Garage_Cars" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#riguardo la matrice di correlazione vedo che:</span></span>
<span id="cb65-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co">#garage cars ? altamente correlato con garage area</span></span>
<span id="cb65-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">#First_Flr_SF ? altamente correlato con Total_Bsmt_SF</span></span>
<span id="cb65-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Gr_Liv_Area ? altamente correlato con TotRms_AbvGrd</span></span>
<span id="cb65-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co">#per scegliere quale levare ci basiamo attraverso la correlazione con la y, ovviamente leviamo le meno correlate</span></span>
<span id="cb65-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb65-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-8" aria-hidden="true" tabindex="-1"></a>high_corr_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(high_corr_vars, <span class="st">"Garage_Area"</span>, <span class="st">"Total_Bsmt_SF"</span>, <span class="st">"TotRms_AbvGrd"</span>) </span>
<span id="cb65-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(high_corr_vars)){</span>
<span id="cb65-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(high_corr_vars[i], <span class="st">"and"</span>, <span class="st">"Sale_Price"</span>, <span class="st">":"</span>, <span class="fu">cor</span>(ames_numeric[,high_corr_vars[i]], ames_numeric<span class="sc">$</span>Sale_Price)))</span>
<span id="cb65-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb65-11" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Gr_Liv_Area and Sale_Price : 0.706779920976628"
[1] "First_Flr_SF and Sale_Price : 0.621676063270253"
[1] "Garage_Cars and Sale_Price : 0.64756161312077"
[1] "Garage_Area and Sale_Price : 0.640138298487373"
[1] "Total_Bsmt_SF and Sale_Price : 0.632528849032033"
[1] "TotRms_AbvGrd and Sale_Price : 0.495474416857035"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rimuoviamo quindi TotRms_AbvGrd, Total_Bsmt_SF e Garage_Area </span></span>
<span id="cb67-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb67-2" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames<span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>TotRms_AbvGrd, <span class="sc">-</span>Total_Bsmt_SF, <span class="sc">-</span>Garage_Area)</span>
<span id="cb67-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb67-3" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>TotRms_AbvGrd, <span class="sc">-</span>Total_Bsmt_SF, <span class="sc">-</span>Garage_Area)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="outliers" class="level2">
<h2 class="anchored" data-anchor-id="outliers">Outliers<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#outliers" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#identifico i valori outlier e li elimino dal mio dataset</span></span>
<span id="cb68-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb68-2" aria-hidden="true" tabindex="-1"></a>z_score <span class="ot">&lt;-</span> (ames_cleaned<span class="sc">$</span>Sale_Price <span class="sc">-</span> <span class="fu">mean</span>(ames_cleaned<span class="sc">$</span>Sale_Price)) <span class="sc">/</span> <span class="fu">sd</span>(ames_cleaned<span class="sc">$</span>Sale_Price)</span>
<span id="cb68-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb68-3" aria-hidden="true" tabindex="-1"></a>outliers <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">abs</span>(z_score) <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">abs</span>(z_score) <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">3</span>)</span>
<span id="cb68-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb68-4" aria-hidden="true" tabindex="-1"></a>outliers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   16   45   47  367  422  423  424  432  433  434  449  457  514  969 1052
[16] 1054 1060 1064 1068 1426 1638 1642 1643 1692 1694 1696 1700 1702 1761 1764
[31] 1768 1773 2098 2330 2331 2333 2335 2337 2342 2383 2401 2446 2451 2457 2667</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb70-1" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[<span class="sc">-</span>outliers, ]</span>
<span id="cb70-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb70-2" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric[<span class="sc">-</span>outliers, ]</span>
<span id="cb70-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#le osservazioni passano da 2930 a 2885</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creazione-dummy" class="level2">
<h2 class="anchored" data-anchor-id="creazione-dummy">Creazione Dummy<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#creazione-dummy" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>dando un occhiata a ames_numeric noto una forte presenza di 0 per alcune variabili, per cui potrei trasformarle in dummy 0,1</p>
<section id="individuo-le-variabili-da-trasformare" class="level4">
<h4 class="anchored" data-anchor-id="individuo-le-variabili-da-trasformare">Individuo le variabili da trasformare<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#individuo-le-variabili-da-trasformare" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creo una lista di variabili</span></span>
<span id="cb71-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-2" aria-hidden="true" tabindex="-1"></a>var_list <span class="ot">&lt;-</span> <span class="fu">names</span>(ames_numeric)</span>
<span id="cb71-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for loop per guardare ogni variabile</span></span>
<span id="cb71-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> var_list) {</span>
<span id="cb71-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># vedo ogni variabile quanti 0 contiene</span></span>
<span id="cb71-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-7" aria-hidden="true" tabindex="-1"></a>  zero_values <span class="ot">&lt;-</span> <span class="fu">which</span>(ames_numeric[[i]] <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb71-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(zero_values) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb71-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(i,<span class="st">" contiene "</span>,<span class="fu">length</span>(zero_values),<span class="st">" zero "</span>))</span>
<span id="cb71-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb71-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(i,<span class="st">" non contiene 0 "</span>))</span>
<span id="cb71-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb71-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb71-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Lot_Frontage contiene 488 zero "
[1] "Lot_Area non contiene 0 "
[1] "Year_Built non contiene 0 "
[1] "Year_Remod_Add non contiene 0 "
[1] "Mas_Vnr_Area contiene 1766 zero "
[1] "BsmtFin_SF_1 contiene 1 zero "
[1] "BsmtFin_SF_2 contiene 2536 zero "
[1] "Bsmt_Unf_SF contiene 245 zero "
[1] "First_Flr_SF non contiene 0 "
[1] "Second_Flr_SF contiene 1655 zero "
[1] "Gr_Liv_Area non contiene 0 "
[1] "Bsmt_Full_Bath contiene 1702 zero "
[1] "Bsmt_Half_Bath contiene 2711 zero "
[1] "Full_Bath contiene 12 zero "
[1] "Half_Bath contiene 1832 zero "
[1] "Bedroom_AbvGr contiene 8 zero "
[1] "Kitchen_AbvGr contiene 3 zero "
[1] "Fireplaces contiene 1422 zero "
[1] "Garage_Cars contiene 158 zero "
[1] "Wood_Deck_SF contiene 1517 zero "
[1] "Open_Porch_SF contiene 1296 zero "
[1] "Enclosed_Porch contiene 2429 zero "
[1] "Three_season_porch contiene 2848 zero "
[1] "Screen_Porch contiene 2641 zero "
[1] "Pool_Area contiene 2874 zero "
[1] "Misc_Val contiene 2782 zero "
[1] "Mo_Sold non contiene 0 "
[1] "Year_Sold non contiene 0 "
[1] "Sale_Price non contiene 0 "
[1] "Longitude non contiene 0 "
[1] "Latitude non contiene 0 "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">#notiamo alcune variabili che contengono sopra i 1000 zeri, per cui preferisco trasformarli in dummy per rendere i miei dati piu facilmente leggibili</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creo-le-dummy" class="level3">
<h3 class="anchored" data-anchor-id="creo-le-dummy">Creo le Dummy<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#creo-le-dummy" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>Creo dummy per le variabili che contengo un gran numero di 0</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> var_list) {</span>
<span id="cb74-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># vedo se la variabile contiene + di 1000 zero</span></span>
<span id="cb74-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#ho messo come soglia 1000 perch? ? piu? di 1/3 delle osservazioni ed ? quindi un valore che ritengo significativo</span></span>
<span id="cb74-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  zero_values <span class="ot">&lt;-</span> <span class="fu">which</span>(ames_numeric[[i]] <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb74-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(zero_values) <span class="sc">&gt;</span> <span class="dv">1000</span>) {</span>
<span id="cb74-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creo una nuova colonna con lo stesso nome della variabile originaria ma che inizia con "dummy_i" per le variabili che rispettano la condizione</span></span>
<span id="cb74-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-7" aria-hidden="true" tabindex="-1"></a>    ames_cleaned[<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, i)] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(ames_cleaned[[i]] <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb74-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(i,<span class="st">" per questa variabile ho creato una dummy"</span>))</span>
<span id="cb74-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-9" aria-hidden="true" tabindex="-1"></a>  } </span>
<span id="cb74-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb74-10" aria-hidden="true" tabindex="-1"></a>}  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mas_Vnr_Area per questa variabile ho creato una dummy"
[1] "BsmtFin_SF_2 per questa variabile ho creato una dummy"
[1] "Second_Flr_SF per questa variabile ho creato una dummy"
[1] "Bsmt_Full_Bath per questa variabile ho creato una dummy"
[1] "Bsmt_Half_Bath per questa variabile ho creato una dummy"
[1] "Half_Bath per questa variabile ho creato una dummy"
[1] "Fireplaces per questa variabile ho creato una dummy"
[1] "Wood_Deck_SF per questa variabile ho creato una dummy"
[1] "Open_Porch_SF per questa variabile ho creato una dummy"
[1] "Enclosed_Porch per questa variabile ho creato una dummy"
[1] "Three_season_porch per questa variabile ho creato una dummy"
[1] "Screen_Porch per questa variabile ho creato una dummy"
[1] "Pool_Area per questa variabile ho creato una dummy"
[1] "Misc_Val per questa variabile ho creato una dummy"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#per esempio pool area diventa: ha una piscina? 1=SI, 0=NO</span></span>
<span id="cb76-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co">#rivestimento muro si no,secondo piano si no,secondo seminterrato si no,seminterrato bagno completo si no,seminterrato mezzo bagno si no,mezzo bagno si no, camino si no,ponte di legno si no,aperta si no,veranda chiusa si no,veranda a 3 stagioni si no,veranda con schermi si no,piscina si no,misc feature ci sono? si no</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>per esempio pool area diventa: ha una piscina? 1=SI, 0=NO</p>
<p>rivestimento muro si no,secondo piano si no,secondo seminterrato si no,seminterrato bagno completo si no,seminterrato mezzo bagno si no,mezzo bagno si no, camino si no,ponte di legno si no,aperta si no,veranda chiusa si no,veranda a 3 stagioni si no,veranda con schermi si no,piscina si no,misc feature ci sono? si no</p>
<p>creo inoltre una dummy per vedere se la casa ? stata rimodellata o meno</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb77-1" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">remodeled =</span> <span class="fu">ifelse</span>(Year_Built <span class="sc">!=</span> Year_Remod_Add, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="dummy-da-tenere" class="level4">
<h4 class="anchored" data-anchor-id="dummy-da-tenere">Dummy da tenere<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#dummy-da-tenere" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<p>voglio vedere se le dummy hanno una correlazione maggiore con la y rispetto alla variabili originaria</p>
<p>innanzitutto mi creo un dataset che prende le variabili originali e le dummy da loro create</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-1" aria-hidden="true" tabindex="-1"></a>var_names <span class="ot">&lt;-</span> <span class="fu">names</span>(ames_cleaned)</span>
<span id="cb78-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co">#creo una lista dove mettere le variabili selezionate</span></span>
<span id="cb78-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb78-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="co"># for loop</span></span>
<span id="cb78-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> var_names) {</span>
<span id="cb78-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># seleziono le variabili non dummy</span></span>
<span id="cb78-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"^dummy_"</span>, var)) {</span>
<span id="cb78-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># e vedo se esiste una stessa variabile versione dummy nel dataset</span></span>
<span id="cb78-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, var) <span class="sc">%in%</span> var_names) {</span>
<span id="cb78-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-12" aria-hidden="true" tabindex="-1"></a>            <span class="co"># le seleziono quindi entrambe</span></span>
<span id="cb78-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-13" aria-hidden="true" tabindex="-1"></a>            selected_vars[[var]] <span class="ot">&lt;-</span> ames_cleaned[[var]]</span>
<span id="cb78-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-14" aria-hidden="true" tabindex="-1"></a>            selected_vars[[<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, var)]] <span class="ot">&lt;-</span> ames_cleaned[[<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, var)]]</span>
<span id="cb78-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-15" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb78-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb78-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-19"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Converto la lista in un dataframe</span></span>
<span id="cb78-20"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb78-20" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>seleziono quelle con la correlazione maggiore tra ognuna, quelle scartate le rimuovo dal dataset ames_cleaned</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#creo una lista dove mettere le variabili selezionate</span></span>
<span id="cb79-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-2" aria-hidden="true" tabindex="-1"></a>final_vars <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb79-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co">#for loop</span></span>
<span id="cb79-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> <span class="fu">names</span>(selected_vars)) {</span>
<span id="cb79-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># seleziono le variabili non dummy</span></span>
<span id="cb79-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"^dummy_"</span>, var)) {</span>
<span id="cb79-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Calcolo la correlatione tra la variabile originale e Sale_Price</span></span>
<span id="cb79-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-9" aria-hidden="true" tabindex="-1"></a>        cor_var <span class="ot">&lt;-</span> <span class="fu">cor</span>(selected_vars[[var]], ames_cleaned<span class="sc">$</span>Sale_Price)</span>
<span id="cb79-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  Calcolo la correlatione tra la variabile dummy e Sale_Price</span></span>
<span id="cb79-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-11" aria-hidden="true" tabindex="-1"></a>        cor_dummy <span class="ot">&lt;-</span> <span class="fu">cor</span>(selected_vars[[<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, var)]], ames_cleaned<span class="sc">$</span>Sale_Price)</span>
<span id="cb79-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># paragono la correlazione tra le due e ovviamente tengo la piu' alta</span></span>
<span id="cb79-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (cor_var <span class="sc">&gt;</span> cor_dummy) {</span>
<span id="cb79-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-14" aria-hidden="true" tabindex="-1"></a>            final_vars[[var]] <span class="ot">&lt;-</span> selected_vars[[var]]</span>
<span id="cb79-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-15" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb79-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-16" aria-hidden="true" tabindex="-1"></a>            final_vars[[<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, var)]] <span class="ot">&lt;-</span> selected_vars[[<span class="fu">paste0</span>(<span class="st">"dummy_"</span>, var)]]</span>
<span id="cb79-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-17" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb79-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb79-19"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb79-20"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-20" aria-hidden="true" tabindex="-1"></a>final_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(final_vars)</span>
<span id="cb79-21"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-21" aria-hidden="true" tabindex="-1"></a><span class="co">#creo removed_vars che contiene i nomi delle variabili che hanno correlazione minore rispetto alle dummy o viceversa</span></span>
<span id="cb79-22"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb79-22" aria-hidden="true" tabindex="-1"></a>removed_vars <span class="ot">&lt;-</span> selected_vars <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>final_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(final_vars)

  # Now:
  data %&gt;% select(all_of(final_vars))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rimuovo removed_vars dataframe da ames_cleaned dataset</span></span>
<span id="cb81-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="co">#per farlo prendo solo i nomi delle variabili dal dataframe</span></span>
<span id="cb81-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb81-3" aria-hidden="true" tabindex="-1"></a>removed_vars<span class="ot">=</span><span class="fu">names</span>(removed_vars)</span>
<span id="cb81-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb81-4" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>removed_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(removed_vars)

  # Now:
  data %&gt;% select(all_of(removed_vars))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
</div>
<p>adesso nel dataset ames_cleaned abbiamo rimosso 6 variabili, sostituendole con le loro dummy</p>
</section>
</section>
</section>
<section id="trasformazioni-logaritmiche" class="level2">
<h2 class="anchored" data-anchor-id="trasformazioni-logaritmiche">Trasformazioni Logaritmiche<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#trasformazioni-logaritmiche" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<section id="pulizia-dataset-ames_numeric" class="level3">
<h3 class="anchored" data-anchor-id="pulizia-dataset-ames_numeric">Pulizia Dataset Ames_numeric<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#pulizia-dataset-ames_numeric" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>rimuovo le variabili precedentemente analizzate e trasformate in dummy</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">#creo una lista dove mettere le variabili selezionate</span></span>
<span id="cb83-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-2" aria-hidden="true" tabindex="-1"></a>vars_to_remove <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb83-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for loop</span></span>
<span id="cb83-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> var_list) {</span>
<span id="cb83-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cerco le variabili con + di 1000 zeri come prima</span></span>
<span id="cb83-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-7" aria-hidden="true" tabindex="-1"></a>  zero_values <span class="ot">&lt;-</span> <span class="fu">which</span>(ames_numeric[[i]] <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb83-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(zero_values) <span class="sc">&gt;</span> <span class="dv">1000</span>) {</span>
<span id="cb83-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># creo un nuovo vars to remove per rimuovere dal dataset numeric</span></span>
<span id="cb83-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-10" aria-hidden="true" tabindex="-1"></a>    vars_to_remove <span class="ot">&lt;-</span> <span class="fu">c</span>(vars_to_remove, i)</span>
<span id="cb83-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(i,<span class="st">" rimuovo dal dataset"</span>))</span>
<span id="cb83-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-12" aria-hidden="true" tabindex="-1"></a>  } </span>
<span id="cb83-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb83-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mas_Vnr_Area rimuovo dal dataset"
[1] "BsmtFin_SF_2 rimuovo dal dataset"
[1] "Second_Flr_SF rimuovo dal dataset"
[1] "Bsmt_Full_Bath rimuovo dal dataset"
[1] "Bsmt_Half_Bath rimuovo dal dataset"
[1] "Half_Bath rimuovo dal dataset"
[1] "Fireplaces rimuovo dal dataset"
[1] "Wood_Deck_SF rimuovo dal dataset"
[1] "Open_Porch_SF rimuovo dal dataset"
[1] "Enclosed_Porch rimuovo dal dataset"
[1] "Three_season_porch rimuovo dal dataset"
[1] "Screen_Porch rimuovo dal dataset"
[1] "Pool_Area rimuovo dal dataset"
[1] "Misc_Val rimuovo dal dataset"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rimuovo dal dataset queste variabili</span></span>
<span id="cb85-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb85-2" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric[, <span class="sc">!</span>(<span class="fu">names</span>(ames_numeric) <span class="sc">%in%</span> vars_to_remove)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>VOGLIO APPLICARE IL LOG SULLE VARIABILI DOVE NECESSARIO</p>
<p>Rimuovo le variabili year perch? non posso farci i log, cosi come le variabili riguardanti le coordinate</p>
<p>Inoltre rimuovo le variabili con media bassa che indicano variabili di tipo conteggio( per esempio numero camere da letto)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lista di variabili che iniziano con year</span></span>
<span id="cb86-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-2" aria-hidden="true" tabindex="-1"></a>vars_to_remove <span class="ot">&lt;-</span> <span class="fu">names</span>(ames_numeric)[<span class="fu">grep</span>(<span class="st">"^Year"</span>, <span class="fu">names</span>(ames_numeric))]</span>
<span id="cb86-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co">#le rimuovo da ames_numeric</span></span>
<span id="cb86-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-5" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric[ , <span class="sc">!</span>(<span class="fu">names</span>(ames_numeric) <span class="sc">%in%</span> vars_to_remove)]</span>
<span id="cb86-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-7" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric[ , <span class="fu">names</span>(ames_numeric) <span class="sc">!=</span> <span class="st">"Latitude"</span>]</span>
<span id="cb86-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-8" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric[ , <span class="fu">names</span>(ames_numeric) <span class="sc">!=</span> <span class="st">"Longitude"</span>]</span>
<span id="cb86-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-11" aria-hidden="true" tabindex="-1"></a>ames_quant <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb86-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-12" aria-hidden="true" tabindex="-1"></a><span class="co">#rimuovo le variabili di conteggio</span></span>
<span id="cb86-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-13" aria-hidden="true" tabindex="-1"></a><span class="co"># le identifico attraverso la media &lt; 10</span></span>
<span id="cb86-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-14" aria-hidden="true" tabindex="-1"></a>vars_to_remove <span class="ot">&lt;-</span> <span class="fu">names</span>(ames_numeric)[<span class="fu">which</span>(<span class="fu">sapply</span>(ames_numeric, mean) <span class="sc">&lt;</span> <span class="dv">10</span>)]</span>
<span id="cb86-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-16" aria-hidden="true" tabindex="-1"></a><span class="co">#le rimuovo da ames_numeric</span></span>
<span id="cb86-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb86-17" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_numeric[ , <span class="sc">!</span>(<span class="fu">names</span>(ames_numeric) <span class="sc">%in%</span> vars_to_remove)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="preparazione-al-log" class="level4">
<h4 class="anchored" data-anchor-id="preparazione-al-log">Preparazione al Log<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#preparazione-al-log" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<p>nelle 6 variabili rimaste c’? comunque presenza di 0 che devo modificare perch? il log di 0 da -inf: aggiungo quindi +1 ai zero values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> var_list) {</span>
<span id="cb87-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co">#controllo se le variabili contengono zeri</span></span>
<span id="cb87-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-3" aria-hidden="true" tabindex="-1"></a>  zero_values <span class="ot">&lt;-</span> <span class="fu">which</span>(ames_numeric[[i]] <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb87-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(zero_values) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb87-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-5" aria-hidden="true" tabindex="-1"></a>    ames_numeric[[i]][zero_values] <span class="ot">&lt;-</span> ames_numeric[[i]][zero_values] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb87-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#aggiungo 1 quando rilevo uno zero</span></span>
<span id="cb87-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb87-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(ames_numeric <span class="sc">==</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb89-1" aria-hidden="true" tabindex="-1"></a>missing_data<span class="ot">=</span><span class="fu">colSums</span>(<span class="fu">is.na</span>(ames_numeric))</span>
<span id="cb89-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb89-2" aria-hidden="true" tabindex="-1"></a>missing_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Lot_Frontage     Lot_Area  Bsmt_Unf_SF First_Flr_SF  Gr_Liv_Area   Sale_Price 
           0            0            0            0            0            0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">#non ci sono valori mancanti(double check)</span></span>
<span id="cb91-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co">#aggiungo 1 ai valori =0 per applicare il log, avrei preferito usare un valore piu piccolo tipo 0,0001 ma mi dava problemi nelle variabili integer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="applico-il-log" class="level4">
<h4 class="anchored" data-anchor-id="applico-il-log">Applico il Log<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#applico-il-log" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<p>applico il logaritmo dove necessario</p>
<p>ho utilizzato l’indice di asimmetria per valutare se era il caso o meno di applicare il log, allego fonte:</p>
<p>A skewness value greater than 1 or less than -1 indicates a highly skewed distribution. A value between 0.5 and 1 or -0.5 and -1 is moderately skewed. A value between -0.5 and 0.5 indicates that the distribution is fairly symmetrical.</p>
<p>in a right-skewed distribution you have a few very large values. The log transformation essentially reels these values into the center of the distribution making it look more like a Normal distribution</p>
<p>https://www.programmingr.com/statistics/skewness/</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span>
<span id="cb92-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co">#applico il log quando rilevo asimmetria &gt;1</span></span>
<span id="cb92-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col <span class="cf">in</span> <span class="fu">colnames</span>(ames_numeric)) {</span>
<span id="cb92-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.numeric</span>(ames_numeric[[col]])) {</span>
<span id="cb92-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">abs</span>(<span class="fu">skewness</span>(ames_numeric[[col]],<span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb92-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-6" aria-hidden="true" tabindex="-1"></a>            ames_numeric[[<span class="fu">paste0</span>(col,<span class="st">"_log"</span>)]] <span class="ot">&lt;-</span> <span class="fu">log10</span>(ames_numeric[[col]])</span>
<span id="cb92-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-7" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb92-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb92-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="co">#seleziono le variabili trasformate in log</span></span>
<span id="cb92-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-11" aria-hidden="true" tabindex="-1"></a>ames_log <span class="ot">&lt;-</span> ames_numeric[, <span class="fu">grep</span>(<span class="st">"_log$"</span>, <span class="fu">names</span>(ames_numeric))]</span>
<span id="cb92-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="co"># le aggiungo al dataset originale</span></span>
<span id="cb92-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-13" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(ames_cleaned, ames_log)</span>
<span id="cb92-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-15" aria-hidden="true" tabindex="-1"></a><span class="co">#dato che il log di sale_price ? significativo, lo sostituisco con sale_price dato che non posso averli entrambi</span></span>
<span id="cb92-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb92-16" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[ , <span class="sc">!</span>(<span class="fu">names</span>(ames_cleaned) <span class="sc">%in%</span> <span class="st">"Sale_Price"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="confronto-grafico" class="level4">
<h4 class="anchored" data-anchor-id="confronto-grafico">Confronto Grafico<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#confronto-grafico" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<p>confrontiamo i log ottenuti delle variabili esplicative con la variabile di risposta</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb93-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co">#LOT_AREA_LOG</span></span>
<span id="cb93-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creo un dataframe con le due variabili in considerazione</span></span>
<span id="cb93-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-4" aria-hidden="true" tabindex="-1"></a>compare_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Lot_Area_log =</span> ames_cleaned<span class="sc">$</span>Lot_Area_log, </span>
<span id="cb93-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Sale_Price_log =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb93-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creo lo scatterplot</span></span>
<span id="cb93-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_df, <span class="fu">aes</span>(<span class="at">x =</span> Lot_Area_log, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span> </span>
<span id="cb93-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb93-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Comparison of Lot_Area_log and Sale_Price_log"</span>) <span class="sc">+</span></span>
<span id="cb93-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Lot_Area_log"</span>) <span class="sc">+</span> </span>
<span id="cb93-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb93-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb94-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co">#LOT_AREA</span></span>
<span id="cb94-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creo un dataframe con le due variabili in considerazione</span></span>
<span id="cb94-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-4" aria-hidden="true" tabindex="-1"></a>compare_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Lot_Area =</span> ames_cleaned<span class="sc">$</span>Lot_Area, </span>
<span id="cb94-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Sale_Price_log =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb94-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creo lo scatterplot</span></span>
<span id="cb94-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_df, <span class="fu">aes</span>(<span class="at">x =</span> Lot_Area, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span> </span>
<span id="cb94-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb94-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Comparison of Lot_Area and Sale_Price_log"</span>) <span class="sc">+</span></span>
<span id="cb94-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Lot_Area"</span>) <span class="sc">+</span> </span>
<span id="cb94-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-20-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb95-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co">#First_Flr_SF_log</span></span>
<span id="cb95-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co">#dataframe</span></span>
<span id="cb95-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-6" aria-hidden="true" tabindex="-1"></a>compare_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">First_Flr_SF_log =</span> ames_cleaned<span class="sc">$</span>First_Flr_SF_log, </span>
<span id="cb95-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Sale_Price_log =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb95-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="co"># scatterplot</span></span>
<span id="cb95-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_df, <span class="fu">aes</span>(<span class="at">x =</span> First_Flr_SF_log, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span> </span>
<span id="cb95-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb95-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Comparison of First_Flr_SF_log and Sale_Price_log"</span>) <span class="sc">+</span></span>
<span id="cb95-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"First_Flr_SF_log"</span>) <span class="sc">+</span> </span>
<span id="cb95-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb95-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb96-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co">#First_Flr_SF</span></span>
<span id="cb96-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">#dataframe</span></span>
<span id="cb96-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-4" aria-hidden="true" tabindex="-1"></a>compare_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">First_Flr_SF =</span> ames_cleaned<span class="sc">$</span>First_Flr_SF, </span>
<span id="cb96-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Sale_Price_log =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb96-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="co">#scatter</span></span>
<span id="cb96-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_df, <span class="fu">aes</span>(<span class="at">x =</span> First_Flr_SF, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span> </span>
<span id="cb96-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Comparison of First_Flr_SF and Sale_Price_log"</span>) <span class="sc">+</span></span>
<span id="cb96-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"First_Flr_SF"</span>) <span class="sc">+</span> </span>
<span id="cb96-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb96-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-21-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#il grafico con il log sembra peggiorare rispetto a quello con la variabile originaria. Ne tengo conto ma prima di eliminarlo preferisco fare un doppio check</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb98-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Gr_Liv_Area_log</span></span>
<span id="cb98-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co">#dataframe </span></span>
<span id="cb98-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-4" aria-hidden="true" tabindex="-1"></a>compare_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Gr_Liv_Area_log =</span> ames_cleaned<span class="sc">$</span>Gr_Liv_Area_log, </span>
<span id="cb98-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Sale_Price_log =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb98-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="co">#scatter plot</span></span>
<span id="cb98-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_df, <span class="fu">aes</span>(<span class="at">x =</span> Gr_Liv_Area_log, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span> </span>
<span id="cb98-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb98-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Comparison of Gr_Liv_Area_log and Sale_Price_log"</span>) <span class="sc">+</span></span>
<span id="cb98-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Gr_Liv_Area_log"</span>) <span class="sc">+</span> </span>
<span id="cb98-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb98-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb99-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Gr_Liv_Area</span></span>
<span id="cb99-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co">#dataframe</span></span>
<span id="cb99-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-4" aria-hidden="true" tabindex="-1"></a>compare_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Gr_Liv_Area =</span> ames_cleaned<span class="sc">$</span>Gr_Liv_Area, </span>
<span id="cb99-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">Sale_Price_log =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb99-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co">#scatter plot</span></span>
<span id="cb99-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_df, <span class="fu">aes</span>(<span class="at">x =</span> Gr_Liv_Area, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span> </span>
<span id="cb99-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb99-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Comparison of Gr_Liv_Area and Sale_Price_log"</span>) <span class="sc">+</span></span>
<span id="cb99-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Gr_Liv_Area"</span>) <span class="sc">+</span> </span>
<span id="cb99-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb99-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Sale_Price_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-22-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">#il grafico con il log sembra peggiorare rispetto a quello con la variabile originaria. Ne tengo conto ma prima di eliminarlo preferisco fare un doppio check</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="correlazione-con-la-y" class="level2">
<h2 class="anchored" data-anchor-id="correlazione-con-la-y">Correlazione con la y<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#correlazione-con-la-y" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>se non rientrano nella condizione le escludo dal dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selezioniamo solo le variabili qualitative</span></span>
<span id="cb101-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co">#visualizzo le variabili piu' importanti attraverso la matrice di correlazione con la variabile di risposta y</span></span>
<span id="cb101-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-3" aria-hidden="true" tabindex="-1"></a>numeric_vars2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ames_cleaned, is.numeric)</span>
<span id="cb101-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-4" aria-hidden="true" tabindex="-1"></a>ames_c_numeric <span class="ot">&lt;-</span> ames_cleaned[, numeric_vars2]</span>
<span id="cb101-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-5" aria-hidden="true" tabindex="-1"></a>corr_matrix2 <span class="ot">&lt;-</span> <span class="fu">cor</span>(ames_c_numeric)</span>
<span id="cb101-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-6" aria-hidden="true" tabindex="-1"></a>corr_target <span class="ot">&lt;-</span> corr_matrix2[<span class="st">"Sale_Price_log"</span>,]</span>
<span id="cb101-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-7" aria-hidden="true" tabindex="-1"></a>corr_target_sorted <span class="ot">&lt;-</span> <span class="fu">sort</span>(corr_target, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb101-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb101-8" aria-hidden="true" tabindex="-1"></a>corr_target_sorted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Sale_Price_log      Gr_Liv_Area_log          Gr_Liv_Area 
         1.000000000          0.703905923          0.666721466 
         Garage_Cars           Year_Built     First_Flr_SF_log 
         0.659901967          0.615758549          0.584789323 
      Year_Remod_Add            Full_Bath         First_Flr_SF 
         0.584358140          0.568612172          0.564558379 
    dummy_Fireplaces  dummy_Open_Porch_SF         Mas_Vnr_Area 
         0.501720978          0.453955149          0.386291975 
        Lot_Area_log   dummy_Wood_Deck_SF      dummy_Half_Bath 
         0.343875118          0.327458952          0.303162822 
       Second_Flr_SF dummy_Bsmt_Full_Bath             Latitude 
         0.266019458          0.257175197          0.255953853 
            Lot_Area          Bsmt_Unf_SF        Bedroom_AbvGr 
         0.232934597          0.194744444          0.185000114 
        Lot_Frontage         Screen_Porch              Mo_Sold 
         0.135633667          0.084205890          0.048225707 
  Three_season_porch      dummy_Pool_Area         BsmtFin_SF_2 
         0.047417254          0.037848640          0.020271522 
            Misc_Val       Bsmt_Half_Bath            Year_Sold 
        -0.005268155         -0.016671023         -0.027839209 
           remodeled        Kitchen_AbvGr       Enclosed_Porch 
        -0.105686102         -0.127096526         -0.141471670 
        BsmtFin_SF_1            Longitude 
        -0.164154488         -0.301176053 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify indices of variables with correlation greater than or equal to 0.30 or less than or equal to -0.30</span></span>
<span id="cb103-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-2" aria-hidden="true" tabindex="-1"></a>ames_c_corr <span class="ot">&lt;-</span> <span class="fu">names</span>(ames_c_numeric[,<span class="fu">which</span>(corr_target <span class="sc">&gt;=</span> <span class="fl">0.30</span> <span class="sc">|</span> corr_target <span class="sc">&lt;=</span> <span class="sc">-</span><span class="fl">0.30</span>)])</span>
<span id="cb103-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-3" aria-hidden="true" tabindex="-1"></a>ames_pocacorrelazione <span class="ot">&lt;-</span> ames_c_numeric[ , <span class="sc">!</span>(<span class="fu">names</span>(ames_c_numeric) <span class="sc">%in%</span> ames_c_corr)]</span>
<span id="cb103-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-5" aria-hidden="true" tabindex="-1"></a>ames_pn<span class="ot">=</span><span class="fu">names</span>(ames_pocacorrelazione)</span>
<span id="cb103-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-6" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[ , <span class="sc">!</span>(<span class="fu">names</span>(ames_cleaned) <span class="sc">%in%</span> ames_pn)]</span>
<span id="cb103-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co">#rimuovo le variabili con poco correlate con la y precedentemente calcolate</span></span>
<span id="cb103-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="co">#inoltre decido arbitrariamente di rimuovere le variabili riguardo le coordinate perch? ritengo la loro correlazione spuria e mi attengo a quanto visto nei grafici mostrati precedentemente</span></span>
<span id="cb103-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-9" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[,<span class="sc">-</span><span class="fu">which</span>(<span class="fu">colnames</span>(ames_cleaned) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Longitude"</span>, <span class="st">"Latitude"</span>))]</span>
<span id="cb103-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="co">#per quanto riguarda le variabili trasformate in log, vedo che sono maggiormente correlate(anche se leggermente) alla y rispetto alle variabili originarie, per cui elimino quest'ultime</span></span>
<span id="cb103-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb103-11" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[,<span class="sc">-</span><span class="fu">which</span>(<span class="fu">colnames</span>(ames_cleaned) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Lot_Area"</span>, <span class="st">"First_Flr_SF"</span>,<span class="st">"Gr_Liv_Area"</span>))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="analisi-variabili-categoriche" class="level1">
<h1>Analisi variabili Categoriche</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selezioniamo solo le variabili qualitative</span></span>
<span id="cb104-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb104-2" aria-hidden="true" tabindex="-1"></a>ames_qual <span class="ot">&lt;-</span> ames_cleaned <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="distribuzioni-di-frequenza" class="level2">
<h2 class="anchored" data-anchor-id="distribuzioni-di-frequenza">Distribuzioni di Frequenza<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#distribuzioni-di-frequenza" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(name <span class="cf">in</span> <span class="fu">colnames</span>(ames_qual)) {</span>
<span id="cb105-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> ames_qual[[name]]</span>
<span id="cb105-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">"Analizzando la variabile: "</span>,name))</span>
<span id="cb105-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-4" aria-hidden="true" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> <span class="fu">table</span>(x)</span>
<span id="cb105-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(tab)</span>
<span id="cb105-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(tab, <span class="at">main =</span> <span class="fu">paste0</span>(<span class="st">"Frequency of "</span>, name))</span>
<span id="cb105-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb105-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: MS_SubClass"
x
      One_Story_1946_and_Newer_All_Styles 
                                     1056 
                 One_Story_1945_and_Older 
                                      139 
   One_Story_with_Finished_Attic_All_Ages 
                                        6 
   One_and_Half_Story_Unfinished_All_Ages 
                                       18 
     One_and_Half_Story_Finished_All_Ages 
                                      287 
                 Two_Story_1946_and_Newer 
                                      554 
                 Two_Story_1945_and_Older 
                                      128 
              Two_and_Half_Story_All_Ages 
                                       22 
                      Split_or_Multilevel 
                                      118 
                              Split_Foyer 
                                       48 
               Duplex_All_Styles_and_Ages 
                                      109 
             One_Story_PUD_1946_and_Newer 
                                      192 
          One_and_Half_Story_PUD_All_Ages 
                                        1 
             Two_Story_PUD_1946_and_Newer 
                                      129 
         PUD_Multilevel_Split_Level_Foyer 
                                       17 
Two_Family_conversion_All_Styles_and_Ages 
                                       61 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: MS_Zoning"
x
Floating_Village_Residential     Residential_High_Density 
                         139                           27 
     Residential_Low_Density   Residential_Medium_Density 
                        2229                          461 
                       A_agr                        C_all 
                           2                           25 
                       I_all 
                           2 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Street"
x
Grvl Pave 
  12 2873 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Alley"
x
         Gravel No_Alley_Access           Paved 
            120            2687              78 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Lot_Shape"
x
             Regular   Slightly_Irregular Moderately_Irregular 
                1841                  958                   70 
           Irregular 
                  16 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Land_Contour"
x
 Bnk  HLS  Low  Lvl 
 117  109   60 2599 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Utilities"
x
AllPub NoSeWa NoSewr 
  2882      1      2 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-7.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Lot_Config"
x
 Corner CulDSac     FR2     FR3  Inside 
    506     170      85      14    2110 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-8.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Land_Slope"
x
 Gtl  Mod  Sev 
2748  121   16 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-9.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Neighborhood"
x
                             North_Ames                           College_Creek 
                                    443                                     265 
                               Old_Town                                 Edwards 
                                    238                                     194 
                               Somerset                      Northridge_Heights 
                                    180                                     144 
                                Gilbert                                  Sawyer 
                                    165                                     151 
                         Northwest_Ames                             Sawyer_West 
                                    131                                     125 
                               Mitchell                               Brookside 
                                    114                                     108 
                               Crawford                  Iowa_DOT_and_Rail_Road 
                                    103                                      93 
                             Timberland                              Northridge 
                                     71                                      65 
                            Stone_Brook South_and_West_of_Iowa_State_University 
                                     40                                      48 
                            Clear_Creek                          Meadow_Village 
                                     44                                      37 
                              Briardale                     Bloomington_Heights 
                                     30                                      28 
                                Veenker                         Northpark_Villa 
                                     24                                      23 
                                Blueste                                  Greens 
                                     10                                       8 
                            Green_Hills                                Landmark 
                                      2                                       1 
                            Hayden_Lake 
                                      0 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-10.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Condition_1"
x
Artery  Feedr   Norm   PosA   PosN   RRAe   RRAn   RRNe   RRNn 
    91    164   2485     18     35     28     49      6      9 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-11.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Condition_2"
x
Artery  Feedr   Norm   PosA   PosN   RRAe   RRAn   RRNn 
     5     13   2858      2      3      1      1      2 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-12.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Bldg_Type"
x
  OneFam TwoFmCon   Duplex    Twnhs   TwnhsE 
    2380       62      109      101      233 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-13.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: House_Style"
x
One_and_Half_Fin One_and_Half_Unf        One_Story           SFoyer 
             314               19             1458               83 
            SLvl Two_and_Half_Fin Two_and_Half_Unf        Two_Story 
             128                7               24              852 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-14.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Overall_Cond"
x
     Very_Poor           Poor           Fair  Below_Average        Average 
             7             10             50            101           1611 
 Above_Average           Good      Very_Good      Excellent Very_Excellent 
           532            390            144             40              0 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-15.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Roof_Style"
x
   Flat   Gable Gambrel     Hip Mansard    Shed 
     20    2313      22     514      11       5 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-16.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Roof_Matl"
x
ClyTile CompShg Membran   Metal    Roll Tar&amp;Grv WdShake WdShngl 
      1    2844       1       1       1      23       9       5 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-17.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Exterior_1st"
x
AsbShng AsphShn BrkComm BrkFace  CBlock CemntBd HdBoard ImStucc MetalSd Plywood 
     44       2       6      87       2     115     440       1     448     221 
PreCast   Stone  Stucco VinylSd Wd Sdng WdShing 
      1       2      43     999     418      56 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-18.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Exterior_2nd"
x
AsbShng AsphShn Brk Cmn BrkFace  CBlock CmentBd HdBoard ImStucc MetalSd   Other 
     38       4      22      46       3     116     404      14     445       1 
Plywood PreCast   Stone  Stucco VinylSd Wd Sdng Wd Shng 
    274       1       6      47     988     396      80 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-19.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Mas_Vnr_Type"
x
 BrkCmn BrkFace  CBlock    None   Stone 
     25     859       1    1770     230 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-20.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Exter_Cond"
x
Excellent      Fair      Good      Poor   Typical 
       11        67       296         3      2508 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-21.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Foundation"
x
BrkTil CBlock  PConc   Slab  Stone   Wood 
   310   1244   1266     49     11      5 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-22.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Bsmt_Cond"
x
  Excellent        Fair        Good No_Basement        Poor     Typical 
          3         104         120          80           5        2573 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-23.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Bsmt_Exposure"
x
         Av          Gd          Mn          No No_Basement 
        412         255         236        1899          83 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-24.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: BsmtFin_Type_1"
x
        ALQ         BLQ         GLQ         LwQ No_Basement         Rec 
        428         269         821         154          80         287 
        Unf 
        846 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-25.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: BsmtFin_Type_2"
x
        ALQ         BLQ         GLQ         LwQ No_Basement         Rec 
         52          68          33          89          81         106 
        Unf 
       2456 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-26.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Heating"
x
Floor  GasA  GasW  Grav  OthW  Wall 
    1  2840    27     9     2     6 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-27.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Heating_QC"
x
Excellent      Fair      Good      Poor   Typical 
     1450        92       476         3       864 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-28.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Central_Air"
x
   N    Y 
 196 2689 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-29.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Electrical"
x
  FuseA   FuseF   FuseP     Mix   SBrkr Unknown 
    188      50       8       1    2637       1 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-30.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Functional"
x
Maj1 Maj2 Min1 Min2  Mod  Sal  Sev  Typ 
  19    9   65   70   34    2    2 2684 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-31.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Garage_Type"
x
             Attchd             Basment             BuiltIn             CarPort 
               1699                  36                 174                  15 
             Detchd More_Than_Two_Types           No_Garage 
                781                  23                 157 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-32.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Garage_Finish"
x
      Fin No_Garage       RFn       Unf 
      696       159       801      1229 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-33.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Garage_Cond"
x
Excellent      Fair      Good No_Garage      Poor   Typical 
        3        74        15       159        14      2620 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-34.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Paved_Drive"
x
     Dirt_Gravel Partial_Pavement            Paved 
             216               62             2607 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-35.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Pool_QC"
x
Excellent      Fair      Good   No_Pool   Typical 
        2         2         4      2874         3 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-36.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Fence"
x
     Good_Privacy         Good_Wood   Minimum_Privacy Minimum_Wood_Wire 
              116               112               328                12 
         No_Fence 
             2317 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-37.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Misc_Feature"
x
Elev Gar2 None Othr Shed TenC 
   1    5 2779    4   95    1 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-38.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Sale_Type"
x
  COD   Con ConLD ConLI ConLw   CWD   New   Oth   VWD   WD  
   87     5    26     8     8    12   218     7     1  2513 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-39.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Analizzando la variabile: Sale_Condition"
x
Abnorml AdjLand  Alloca  Family  Normal Partial 
    187      12      24      46    2392     224 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-25-40.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="boxplot" class="level2">
<h2 class="anchored" data-anchor-id="boxplot">Boxplot<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#boxplot" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>creo dei Boxplot per tutte le variabili qualitative per farmi un idea della relazione con la y</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-1" aria-hidden="true" tabindex="-1"></a>ames_qual <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ames_qual, ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb146-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">names</span>(ames_qual)){</span>
<span id="cb146-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">is.factor</span>(ames_qual[,i])){</span>
<span id="cb146-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-5" aria-hidden="true" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ames_qual[,i],ames_cleaned<span class="sc">$</span>Sale_Price_log)</span>
<span id="cb146-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">ggplot</span>(plot_data, <span class="fu">aes</span>(<span class="at">x =</span> ames_qual[,i], <span class="at">y =</span> ames_cleaned<span class="sc">$</span>Sale_Price_log)) <span class="sc">+</span></span>
<span id="cb146-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb146-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggtitle</span>(<span class="fu">paste0</span>(i,<span class="st">" vs log(Sale_Price)"</span>))<span class="sc">+</span></span>
<span id="cb146-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-9" aria-hidden="true" tabindex="-1"></a><span class="fu">xlab</span>(i)<span class="sc">+</span></span>
<span id="cb146-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ylab</span>(<span class="st">"log(Sale_Price)"</span>))</span>
<span id="cb146-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb146-11" aria-hidden="true" tabindex="-1"></a>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-7.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-8.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-9.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-10.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-11.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-12.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-13.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-14.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-15.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-16.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-17.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-18.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-19.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-20.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-21.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-22.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-23.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-24.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-25.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-26.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-27.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-28.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-29.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-30.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-31.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-32.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-33.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-34.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-35.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-36.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-37.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-38.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-39.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-26-40.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Variabili che dai boxplot sembrano poco correlate con la y:</p>
<p>LotShape</p>
<p>LandContour</p>
<p>LotConfig</p>
<p>LandSlope</p>
<p>Condition1</p>
<p>PavedDrive</p>
<p>Fence</p>
<p>Misc_Feature</p>
<p>per aiutarci nell’analisi delle variabili categoriche e per semplificare i modelli che illustrer? piu’ tardi trasformer? le variabili categoriche in dummy</p>
<p>Prima di procedere con l’analisi delle variabili categoriche voglio mostrare graficamente:</p>
</section>
<section id="interazione-tra-variabili-continue-e-categoriche" class="level2">
<h2 class="anchored" data-anchor-id="interazione-tra-variabili-continue-e-categoriche">Interazione tra variabili continue e categoriche<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#interazione-tra-variabili-continue-e-categoriche" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>nel caso di garage</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ames_cleaned, <span class="fu">aes</span>(<span class="at">x =</span> Garage_Cars, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span></span>
<span id="cb147-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> Garage_Type) <span class="sc">+</span></span>
<span id="cb147-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ames_cleaned, <span class="fu">aes</span>(<span class="at">x =</span> Garage_Cars, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span></span>
<span id="cb149-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> Garage_Cond) <span class="sc">+</span></span>
<span id="cb149-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ames_cleaned, <span class="fu">aes</span>(<span class="at">x =</span> Garage_Cars, <span class="at">y =</span> Sale_Price_log)) <span class="sc">+</span></span>
<span id="cb151-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> Garage_Finish) <span class="sc">+</span></span>
<span id="cb151-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>CONTINUIAMO CON L’ANALISI DELLE VARIABILI CATEGORICHE</p>
</section>
<section id="creazione-delle-dummy" class="level2">
<h2 class="anchored" data-anchor-id="creazione-delle-dummy">Creazione delle Dummy<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#creazione-delle-dummy" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creiamo un nuovo dataset vuoto con le stesse dimensioni del dataset originale</span></span>
<span id="cb153-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-2" aria-hidden="true" tabindex="-1"></a>dummies <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="fu">nrow</span>(ames_cleaned), <span class="at">ncol =</span> <span class="dv">0</span>))</span>
<span id="cb153-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co"># identifichiamo gli indici delle colonne con variabili qualitative</span></span>
<span id="cb153-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-5" aria-hidden="true" tabindex="-1"></a>qual_vars <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">sapply</span>(ames_cleaned, is.factor))</span>
<span id="cb153-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ciclo for per trasformare le colonne in dummies</span></span>
<span id="cb153-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col <span class="cf">in</span> <span class="fu">names</span>(ames_cleaned)[qual_vars]) {</span>
<span id="cb153-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb153-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-11" aria-hidden="true" tabindex="-1"></a> <span class="co"># Creiamo la matrice di modello utilizzando il nuovo dataset</span></span>
<span id="cb153-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-12" aria-hidden="true" tabindex="-1"></a>matrix_dummies <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="fu">as.formula</span>(<span class="fu">paste0</span>(col,<span class="st">" ~ ."</span>)),ames_cleaned)</span>
<span id="cb153-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb153-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># aggiungiamo le colonne dummies al dataset vuoto</span></span>
<span id="cb153-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-16" aria-hidden="true" tabindex="-1"></a>  dummies <span class="ot">&lt;-</span> <span class="fu">cbind</span>(dummies, matrix_dummies)</span>
<span id="cb153-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggiungiamo le colonne dummies al dataset originale</span></span>
<span id="cb153-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-18" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ames_cleaned, dummies)</span>
<span id="cb153-19"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-19" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span><span class="fu">colSums</span>(dummies)</span>
<span id="cb153-20"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-20" aria-hidden="true" tabindex="-1"></a>c<span class="ot">=</span><span class="fu">length</span>(d)</span>
<span id="cb153-21"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb153-21" aria-hidden="true" tabindex="-1"></a>c <span class="co">#stampo il numero di dummy create</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rimuovo le variabili originali che ho trasformato in dummy dal dataset</span></span>
<span id="cb155-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb155-2" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> <span class="fu">subset</span>(ames_cleaned,<span class="at">select=</span><span class="sc">-</span><span class="fu">c</span>(qual_vars))</span>
<span id="cb155-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb155-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb155-4" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned <span class="sc">%&gt;%</span> </span>
<span id="cb155-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(<span class="cf">function</span>(x) {<span class="sc">!</span><span class="fu">is.factor</span>(x)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="seleziono-le-dummy-piu-importanti" class="level3">
<h3 class="anchored" data-anchor-id="seleziono-le-dummy-piu-importanti">Seleziono le Dummy piu’ importanti<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#seleziono-le-dummy-piu-importanti" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selezioniamo solo le variabili qualitative</span></span>
<span id="cb156-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co">#visualizzo le variabili piu' importanti attraverso la matrice di correlazione con la variabile di risposta y</span></span>
<span id="cb156-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb156-3" aria-hidden="true" tabindex="-1"></a>numeric_vars2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ames_cleaned, is.numeric)</span>
<span id="cb156-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb156-4" aria-hidden="true" tabindex="-1"></a>ames_c_numeric <span class="ot">&lt;-</span> ames_cleaned[, numeric_vars2]</span>
<span id="cb156-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb156-5" aria-hidden="true" tabindex="-1"></a>corr_matrix2 <span class="ot">&lt;-</span> <span class="fu">cor</span>(ames_c_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cor(ames_c_numeric): la deviazione standard è zero</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb158-1" aria-hidden="true" tabindex="-1"></a>corr_target <span class="ot">&lt;-</span> corr_matrix2[<span class="st">"Sale_Price_log"</span>,]</span>
<span id="cb158-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb158-2" aria-hidden="true" tabindex="-1"></a>corr_target_sorted <span class="ot">&lt;-</span> <span class="fu">sort</span>(corr_target, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb158-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb158-3" aria-hidden="true" tabindex="-1"></a>corr_target_sorted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                      Sale_Price_log 
                                         1.000000000 
                                    Sale_Price_log.1 
                                         1.000000000 
                                     Gr_Liv_Area_log 
                                         0.703905923 
                                   Gr_Liv_Area_log.1 
                                         0.703905923 
                                         Garage_Cars 
                                         0.659901967 
                                       Garage_Cars.1 
                                         0.659901967 
                                          Year_Built 
                                         0.615758549 
                                        Year_Built.1 
                                         0.615758549 
                                    First_Flr_SF_log 
                                         0.584789323 
                                  First_Flr_SF_log.1 
                                         0.584789323 
                                      Year_Remod_Add 
                                         0.584358140 
                                    Year_Remod_Add.1 
                                         0.584358140 
                                           Full_Bath 
                                         0.568612172 
                                         Full_Bath.1 
                                         0.568612172 
                                     FoundationPConc 
                                         0.536045453 
                                    dummy_Fireplaces 
                                         0.501720978 
                                  dummy_Fireplaces.1 
                                         0.501720978 
                                 dummy_Open_Porch_SF 
                                         0.453955149 
                               dummy_Open_Porch_SF.1 
                                         0.453955149 
                                   BsmtFin_Type_1GLQ 
                                         0.439889477 
                                        Mas_Vnr_Area 
                                         0.386291975 
                                      Mas_Vnr_Area.1 
                                         0.386291975 
                 MS_SubClassTwo_Story_1946_and_Newer 
                                         0.384449127 
                                        Central_AirY 
                                         0.381832876 
                                  Garage_CondTypical 
                                         0.381686896 
                                    Paved_DrivePaved 
                                         0.370248621 
                                 Exterior_1stVinylSd 
                                         0.369710589 
                                 Overall_CondAverage 
                                         0.366825884 
                                 Exterior_2ndVinylSd 
                                         0.361739398 
                                        Lot_Area_log 
                                         0.343875118 
                                      Lot_Area_log.1 
                                         0.343875118 
                      NeighborhoodNorthridge_Heights 
                                         0.334753173 
                                  dummy_Wood_Deck_SF 
                                         0.327458952 
                                dummy_Wood_Deck_SF.1 
                                         0.327458952 
                                     ElectricalSBrkr 
                                         0.305181383 
                                     dummy_Half_Bath 
                                         0.303162822 
                                   dummy_Half_Bath.1 
                                         0.303162822 
                         Lot_ShapeSlightly_Irregular 
                                         0.298920164 
                                        Sale_TypeNew 
                                         0.298025776 
                    MS_ZoningResidential_Low_Density 
                                         0.296712796 
                                 Mas_Vnr_TypeBrkFace 
                                         0.274093603 
                                     Bsmt_ExposureGd 
                                         0.260294918 
                                   Mas_Vnr_TypeStone 
                                         0.252451912 
                                    Garage_FinishRFn 
                                         0.246637494 
                              NeighborhoodNorthridge 
                                         0.241053011 
                                House_StyleTwo_Story 
                                         0.230407961 
                                NeighborhoodSomerset 
                                         0.203067750 
                                  Garage_TypeBuiltIn 
                                         0.200109598 
                                       FenceNo_Fence 
                                         0.175215622 
                                       Roof_StyleHip 
                                         0.175052790 
                                    Bsmt_CondTypical 
                                         0.157422297 
                              NeighborhoodTimberland 
                                         0.150661920 
                                   Exter_CondTypical 
                                         0.148726324 
                             NeighborhoodStone_Brook 
                                         0.147359796 
                                       FunctionalTyp 
                                         0.144047162 
                           NeighborhoodCollege_Creek 
                                         0.141210551 
             MS_SubClassOne_Story_PUD_1946_and_Newer 
                                         0.139360279 
                                     Land_ContourHLS 
                                         0.130913114 
                                     Condition_1Norm 
                                         0.128118645 
                                   Lot_ConfigCulDSac 
                                         0.124919976 
                                AlleyNo_Alley_Access 
                                         0.124853831 
                                         HeatingGasA 
                                         0.118088684 
                                   BsmtFin_Type_2Unf 
                                         0.115306416 
                                       Bsmt_CondGood 
                                         0.109584273 
                                NeighborhoodCrawford 
                                         0.095733770 
                                 NeighborhoodVeenker 
                                         0.091305188 
                                          StreetPave 
                                         0.090845617 
                                 NeighborhoodGilbert 
                                         0.090367582 
                       Lot_ShapeModerately_Irregular 
                                         0.087056921 
                                     Bldg_TypeTwnhsE 
                                         0.081414920 
                          NeighborhoodNorthwest_Ames 
                                         0.069581760 
                                     Condition_1PosN 
                                         0.069170778 
                             NeighborhoodClear_Creek 
                                         0.069005774 
                                 Exterior_2ndCmentBd 
                                         0.064273743 
                                 Exterior_1stCemntBd 
                                         0.060170786 
                                     Condition_1PosA 
                                         0.058057978 
                                    Roof_MatlWdShngl 
                                         0.053800655 
                                    Misc_FeatureNone 
                                         0.053411976 
                                     Condition_2PosA 
                                         0.053293174 
                                    Roof_MatlWdShake 
                                         0.052079469 
                                     Condition_2PosN 
                                         0.047203531 
                             NeighborhoodSawyer_West 
                                         0.045514448 
                                     Bsmt_ExposureMn 
                                         0.045356491 
                     NeighborhoodBloomington_Heights 
                                         0.044879869 
                                  Lot_ShapeIrregular 
                                         0.043493232 
                                 Exterior_2ndImStucc 
                                         0.039463517 
                             NeighborhoodGreen_Hills 
                                         0.035633601 
                                   BsmtFin_Type_2GLQ 
                                         0.035184563 
                                       Land_SlopeMod 
                                         0.033522232 
                                   Exterior_2ndOther 
                                         0.032260619 
                                   Exterior_1stStone 
                                         0.030873244 
                                     Condition_2Norm 
                                         0.028974436 
                                       Land_SlopeSev 
                                         0.028854371 
                               Overall_CondExcellent 
                                         0.027862338 
                                        Sale_TypeCon 
                                         0.026606353 
                                         Pool_QCGood 
                                         0.024358679 
                                 Exterior_1stImStucc 
                                         0.022770116 
                                 Exterior_1stPreCast 
                                         0.022400668 
                                 Exterior_2ndPreCast 
                                         0.022400668 
                                  NeighborhoodGreens 
                                         0.022307527 
                                     Land_ContourLow 
                                         0.021806933 
                                     Garage_CondGood 
                                         0.020652999 
                                     Condition_1RRNn 
                                         0.020566675 
                                    Misc_FeatureTenC 
                                         0.020509732 
                                          AlleyPaved 
                                         0.019834487 
                                       Lot_ConfigFR3 
                                         0.019138300 
                                 Exterior_1stBrkFace 
                                         0.019084627 
                                    Roof_MatlMembran 
                                         0.018841986 
                                         Pool_QCFair 
                                         0.017997933 
                                    Roof_MatlTar&amp;Grv 
                                         0.017390786 
              MS_SubClassTwo_and_Half_Story_All_Ages 
                                         0.013867041 
                                        Sale_TypeCWD 
                                         0.013724232 
                                     Condition_1RRAn 
                                         0.011627940 
                                 Exterior_2ndBrkFace 
                                         0.010216443 
                                      Roof_StyleShed 
                                         0.008563455 
                                      FoundationWood 
                                         0.008464762 
                         House_StyleTwo_and_Half_Fin 
                                         0.008351593 
                                     Condition_2RRAe 
                                         0.007278394 
                                       Lot_ConfigFR2 
                                         0.006722398 
                      MS_SubClassSplit_or_Multilevel 
                                         0.005770776 
                                      Roof_MatlMetal 
                                         0.004671668 
                         House_StyleTwo_and_Half_Unf 
                                         0.002184705 
                                   ElectricalUnknown 
                                         0.001201633 
                                      Pool_QCTypical 
                                         0.001150824 
                                     House_StyleSLvl 
                                        -0.003532152 
          MS_SubClassOne_and_Half_Story_PUD_All_Ages 
                                        -0.004635575 
                                 Exterior_1stPlywood 
                                        -0.005473639 
                                     UtilitiesNoSeWa 
                                        -0.008313596 
                                NeighborhoodLandmark 
                                        -0.008489234 
                                       Roof_MatlRoll 
                                        -0.008489234 
                                        Sale_TypeVWD 
                                        -0.008489234 
                                     Condition_2RRAn 
                                        -0.008522678 
                                    Misc_FeatureGar2 
                                        -0.013846854 
                                   BsmtFin_Type_2LwQ 
                                        -0.016023124 
                                   Roof_StyleMansard 
                                        -0.017168080 
                                         HeatingOthW 
                                        -0.017881293 
                                    Misc_FeatureOthr 
                                        -0.017977432 
                      Garage_TypeMore_Than_Two_Types 
                                        -0.018691092 
                                NeighborhoodMitchell 
                                        -0.019652205 
   MS_SubClassOne_Story_with_Finished_Attic_All_Ages 
                                        -0.022115337 
                                     Condition_1RRNe 
                                        -0.022148288 
                                 NeighborhoodBlueste 
                                        -0.022532700 
                                   Exterior_2ndStone 
                                        -0.024103742 
                                         HeatingGasW 
                                        -0.025554927 
                                   BsmtFin_Type_2BLQ 
                                        -0.027970750 
                                   BsmtFin_Type_2Rec 
                                        -0.028128119 
                                 Exterior_2ndPlywood 
                                        -0.028843110 
                                     FoundationStone 
                                        -0.029837080 
                                     Land_ContourLvl 
                                        -0.029929425 
                                 Exterior_1stBrkComm 
                                        -0.030403651 
                                      Sale_TypeConLI 
                                        -0.030478738 
                                 Exterior_2ndAsphShn 
                                        -0.030595465 
                              MS_SubClassSplit_Foyer 
                                        -0.033099958 
                                  Exterior_2ndCBlock 
                                        -0.033124651 
                                  Mas_Vnr_TypeCBlock 
                                        -0.034425456 
                         NeighborhoodNorthpark_Villa 
                                        -0.035175424 
                              FenceMinimum_Wood_Wire 
                                        -0.035211121 
                                      Pool_QCNo_Pool 
                                        -0.037848640 
                                     Condition_2RRNn 
                                        -0.038767825 
                                  Exterior_1stCBlock 
                                        -0.038787742 
                                  Garage_TypeBasment 
                                        -0.039355391 
                                 Exterior_1stAsphShn 
                                        -0.040087235 
                                       FunctionalSev 
                                        -0.040819417 
                                       ElectricalMix 
                                        -0.042975205 
                                 Exterior_2ndBrk Cmn 
                                        -0.043914006 
                                     Condition_1RRAe 
                                        -0.044644180 
                                       Bsmt_CondPoor 
                                        -0.046573605 
                                     UtilitiesNoSewr 
                                        -0.047505593 
                                    Condition_2Feedr 
                                        -0.047810231 
                                House_StyleOne_Story 
                                        -0.048355996 
                                        Sale_TypeOth 
                                        -0.048815708 
                                      FunctionalMin1 
                                        -0.049983199 
                                 Exterior_1stWdShing 
                                        -0.051065072 
                                      MS_ZoningI_all 
                                        -0.051263237 
                                    Misc_FeatureShed 
                                        -0.052065308 
                                      Sale_TypeConLw 
                                        -0.053069008 
                                   Roof_StyleGambrel 
                                        -0.054424937 
                 MS_SubClassTwo_Story_1945_and_Older 
                                        -0.054455720 
                   MS_ZoningResidential_High_Density 
                                        -0.055049785 
                                      Exter_CondGood 
                                        -0.055671934 
                               Overall_CondVery_Good 
                                        -0.058309312 
                                    Roof_MatlCompShg 
                                        -0.058714828 
                                  Exterior_1stStucco 
                                        -0.059800745 
                                 Exterior_2ndWd Shng 
                                        -0.063431958 
                                  Exterior_2ndStucco 
                                        -0.063527746 
                                      FunctionalMin2 
                                        -0.063699222 
                                 Exterior_2ndHdBoard 
                                        -0.064312401 
                                       FunctionalMod 
                                        -0.065414293 
                                   House_StyleSFoyer 
                                        -0.069523135 
                                    Lot_ConfigInside 
                                        -0.070156447 
                                 Exterior_1stHdBoard 
                                        -0.071212677 
 NeighborhoodSouth_and_West_of_Iowa_State_University 
                                        -0.073334061 
                                   BsmtFin_Type_1LwQ 
                                        -0.078206121 
   MS_SubClassOne_and_Half_Story_Unfinished_All_Ages 
                                        -0.080450632 
                                  Garage_TypeCarPort 
                                        -0.086185190 
                                     ElectricalFuseP 
                                        -0.086346541 
                         House_StyleOne_and_Half_Unf 
                                        -0.087965261 
         MS_SubClassPUD_Multilevel_Split_Level_Foyer 
                                        -0.089662108 
                         Paved_DrivePartial_Pavement 
                                        -0.089692414 
                                      Sale_TypeConLD 
                                        -0.090106404 
                                      Exter_CondPoor 
                                        -0.092150342 
                                      FunctionalMaj2 
                                        -0.092654359 
                                    Overall_CondPoor 
                                        -0.097845758 
                                      FenceGood_Wood 
                                        -0.099113744 
               MS_SubClassDuplex_All_Styles_and_Ages 
                                        -0.099313522 
                                     Bldg_TypeDuplex 
                                        -0.099313522 
                                      Heating_QCPoor 
                                        -0.099597781 
                                   BsmtFin_Type_1BLQ 
                                        -0.106240792 
                                         HeatingGrav 
                                        -0.107980677 
                                      Heating_QCGood 
                                        -0.108354720 
                                         HeatingWall 
                                        -0.108672770 
                                      MS_ZoningA_agr 
                                        -0.109756363 
MS_SubClassTwo_Family_conversion_All_Styles_and_Ages 
                                        -0.110478056 
                                   Bldg_TypeTwoFmCon 
                                        -0.112480814 
                                   BsmtFin_Type_1Unf 
                                        -0.113168462 
                                    Overall_CondGood 
                                        -0.113482285 
                                      Bldg_TypeTwnhs 
                                        -0.113498632 
                               NeighborhoodBriardale 
                                        -0.117549699 
                                  NeighborhoodSawyer 
                                        -0.117695157 
                                     Garage_CondPoor 
                                        -0.120090658 
             MS_SubClassTwo_Story_PUD_1946_and_Newer 
                                        -0.122300593 
                                    Condition_1Feedr 
                                        -0.123448737 
                                       FunctionalSal 
                                        -0.126415686 
                                        Sale_TypeWD  
                                        -0.134873449 
                                 Exterior_2ndMetalSd 
                                        -0.148213020 
                                FenceMinimum_Privacy 
                                        -0.155044937 
                                   BsmtFin_Type_1Rec 
                                        -0.156685393 
                                     Roof_StyleGable 
                                        -0.157616879 
                               NeighborhoodBrookside 
                                        -0.159802326 
                           Overall_CondAbove_Average 
                                        -0.159995713 
                                 Exterior_1stMetalSd 
                                        -0.160064870 
                                      FoundationSlab 
                                        -0.161128707 
                          NeighborhoodMeadow_Village 
                                        -0.163442656 
                                     ElectricalFuseF 
                                        -0.166071191 
                                      Heating_QCFair 
                                        -0.169806925 
                                 Exterior_2ndWd Sdng 
                                        -0.177775505 
                           Overall_CondBelow_Average 
                                        -0.180345647 
                                       Bsmt_CondFair 
                                        -0.181826800 
                                 Exterior_1stWd Sdng 
                                        -0.189360092 
     MS_SubClassOne_and_Half_Story_Finished_All_Ages 
                                        -0.190237385 
                                      MS_ZoningC_all 
                                        -0.192218535 
                                 NeighborhoodEdwards 
                                        -0.192873463 
                                     Garage_CondFair 
                                        -0.206714752 
                            Bsmt_ExposureNo_Basement 
                                        -0.207037943 
                                      Exter_CondFair 
                                        -0.208442848 
                                    Overall_CondFair 
                                        -0.210262996 
                           BsmtFin_Type_2No_Basement 
                                        -0.210462659 
                                Bsmt_CondNo_Basement 
                                        -0.214758290 
                           BsmtFin_Type_1No_Basement 
                                        -0.214758290 
                                     Bsmt_ExposureNo 
                                        -0.224582946 
                  NeighborhoodIowa_DOT_and_Rail_Road 
                                        -0.250337525 
                                NeighborhoodOld_Town 
                                        -0.261718699 
                              Garage_FinishNo_Garage 
                                        -0.306651747 
                                Garage_CondNo_Garage 
                                        -0.306651747 
                                Garage_TypeNo_Garage 
                                        -0.308088927 
                                    FoundationCBlock 
                                        -0.314333909 
                 MS_SubClassOne_Story_1945_and_Older 
                                        -0.337895703 
                                   Heating_QCTypical 
                                        -0.354821730 
                 MS_ZoningResidential_Medium_Density 
                                        -0.355249857 
                                    Mas_Vnr_TypeNone 
                                        -0.387516511 
                                   Garage_TypeDetchd 
                                        -0.399069460 
                                    Garage_FinishUnf 
                                        -0.433931204 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identifico le variabili con correlazione &gt; di 0,3 o &lt; di -0,3</span></span>
<span id="cb160-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb160-2" aria-hidden="true" tabindex="-1"></a>ames_c_corr <span class="ot">&lt;-</span> <span class="fu">names</span>(ames_c_numeric[,<span class="fu">which</span>(corr_target <span class="sc">&gt;=</span> <span class="fl">0.3</span> <span class="sc">|</span> corr_target <span class="sc">&lt;=</span> <span class="sc">-</span><span class="fl">0.3</span>)])</span>
<span id="cb160-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb160-3" aria-hidden="true" tabindex="-1"></a>ames_pocacorrelazione <span class="ot">&lt;-</span> ames_c_numeric[,<span class="sc">!</span>(<span class="fu">colnames</span>(ames_cleaned) <span class="sc">%in%</span>ames_c_corr)]</span>
<span id="cb160-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb160-4" aria-hidden="true" tabindex="-1"></a>ames_pn<span class="ot">=</span><span class="fu">names</span>(ames_pocacorrelazione)</span>
<span id="cb160-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb160-5" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[,<span class="sc">!</span>(<span class="fu">colnames</span>(ames_cleaned) <span class="sc">%in%</span> ames_pn)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>dando un occhiata al dataset noto che alcune colonne gi? esistenti sono state ricreate</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rimuoviamo le colonne create 2 volte(finiscono tutte con .1)</span></span>
<span id="cb161-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb161-2" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> <span class="fu">subset</span>(ames_cleaned, <span class="at">select =</span> <span class="sc">-</span><span class="fu">grep</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.1$"</span>, <span class="fu">names</span>(ames_cleaned)))</span>
<span id="cb161-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ames_cleaned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2885 obs. of  34 variables:
 $ Year_Built                         : int  1960 1961 1958 1968 1997 1998 2001 1992 1995 1999 ...
 $ Year_Remod_Add                     : int  1960 1961 1958 1968 1998 1998 2001 1992 1996 1999 ...
 $ Mas_Vnr_Area                       : num  112 0 108 0 0 20 0 0 0 0 ...
 $ Full_Bath                          : int  1 1 1 2 2 2 2 2 2 2 ...
 $ Garage_Cars                        : num  2 1 1 2 2 2 2 2 2 2 ...
 $ dummy_Half_Bath                    : num  0 0 1 1 1 1 0 0 0 1 ...
 $ dummy_Fireplaces                   : num  1 0 0 1 1 1 0 0 1 1 ...
 $ dummy_Wood_Deck_SF                 : num  1 1 1 0 1 1 0 0 1 1 ...
 $ dummy_Open_Porch_SF                : num  1 0 1 0 1 1 0 1 1 1 ...
 $ Lot_Area_log                       : num  4.5 4.07 4.15 4.05 4.14 ...
 $ First_Flr_SF_log                   : num  3.22 2.95 3.12 3.32 2.97 ...
 $ Gr_Liv_Area_log                    : num  3.22 2.95 3.12 3.32 3.21 ...
 $ Sale_Price_log                     : num  5.33 5.02 5.24 5.39 5.28 ...
 $ MS_SubClassOne_Story_1945_and_Older: num  0 0 0 0 0 0 0 0 0 0 ...
 $ MS_SubClassTwo_Story_1946_and_Newer: num  0 0 0 0 1 1 0 0 0 1 ...
 $ MS_ZoningResidential_Medium_Density: num  0 0 0 0 0 0 0 0 0 0 ...
 $ NeighborhoodNorthridge_Heights     : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Overall_CondAverage                : num  1 0 0 1 1 0 1 1 1 1 ...
 $ Exterior_1stVinylSd                : num  0 1 0 0 1 1 0 0 0 1 ...
 $ Exterior_2ndVinylSd                : num  0 1 0 0 1 1 0 0 0 1 ...
 $ Mas_Vnr_TypeNone                   : num  0 1 0 1 1 0 1 1 1 1 ...
 $ FoundationCBlock                   : num  1 1 1 1 0 0 0 0 0 0 ...
 $ FoundationPConc                    : num  0 0 0 0 1 1 1 1 1 1 ...
 $ BsmtFin_Type_1GLQ                  : num  0 0 0 0 1 1 1 0 1 0 ...
 $ Heating_QCTypical                  : num  0 1 1 0 0 0 0 0 0 0 ...
 $ Central_AirY                       : num  1 1 1 1 1 1 1 1 1 1 ...
 $ ElectricalSBrkr                    : num  1 1 1 1 1 1 1 1 1 1 ...
 $ Garage_TypeDetchd                  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Garage_TypeNo_Garage               : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Garage_FinishNo_Garage             : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Garage_FinishUnf                   : num  0 1 1 0 0 0 0 0 0 0 ...
 $ Garage_CondNo_Garage               : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Garage_CondTypical                 : num  1 1 1 1 1 1 1 1 1 1 ...
 $ Paved_DrivePaved                   : num  0 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
<p>rimuovo le variabili tra loro altamente correlate</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb163-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-2" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ames_cleaned, is.numeric)</span>
<span id="cb163-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-3" aria-hidden="true" tabindex="-1"></a>ames_numeric <span class="ot">&lt;-</span> ames_cleaned[, numeric_vars]</span>
<span id="cb163-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="co">#identifico le variabili ad alta correlazione</span></span>
<span id="cb163-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-5" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(ames_numeric)</span>
<span id="cb163-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-6" aria-hidden="true" tabindex="-1"></a>high_corr <span class="ot">&lt;-</span> <span class="fu">findCorrelation</span>(corr_matrix, <span class="at">cutoff =</span> <span class="fl">0.8</span>) <span class="co">#mi restituisce le variabile con correlazione maggiore di 0,8, la soglia che ritengo significativa</span></span>
<span id="cb163-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-7" aria-hidden="true" tabindex="-1"></a>high_corr_vars <span class="ot">&lt;-</span> <span class="fu">colnames</span>(ames_numeric)[high_corr]</span>
<span id="cb163-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb163-8" aria-hidden="true" tabindex="-1"></a>high_corr_vars <span class="co">#dato che ci veniva restituito solo il numero della variabile ho aggiunto il codice per ottenere il nome della variabile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Exterior_1stVinylSd"  "Garage_CondNo_Garage" "Garage_TypeNo_Garage"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co">#riguardo la matrice di correlazione vedo che:</span></span>
<span id="cb165-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="co">#garage cars ? altamente correlato con garage area</span></span>
<span id="cb165-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co">#First_Flr_SF ? altamente correlato con Total_Bsmt_SF</span></span>
<span id="cb165-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Gr_Liv_Area ? altamente correlato con TotRms_AbvGrd</span></span>
<span id="cb165-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb165-5" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">&lt;-</span> ames_cleaned[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">colnames</span>(ames_cleaned) <span class="sc">%in%</span> high_corr_vars)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Terminata la fase di EDA passo alle</p>
</section>
</section>
</section>
<section id="regressioni" class="level1">
<h1>REGRESSIONI</h1>
<section id="best-subset-selection" class="level2">
<h2 class="anchored" data-anchor-id="best-subset-selection">BEST SUBSET SELECTION<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#best-subset-selection" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>utilizzo l’approccio TIDY:</p>
<p>Data preparation tidy</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Caricamento pacchetto: 'janitor'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>I seguenti oggetti sono mascherati da 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb169-1" aria-hidden="true" tabindex="-1"></a>ames_cleaned <span class="ot">=</span> ames_cleaned <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() </span>
<span id="cb169-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb169-2" aria-hidden="true" tabindex="-1"></a>ames_cleaned<span class="ot">=</span>ames_cleaned <span class="sc">%&gt;%</span> <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cross validation splits tidy</p>
<p>Split the data into training and test, then split the training set into 10 folds</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb170-1" aria-hidden="true" tabindex="-1"></a>k<span class="ot">=</span><span class="dv">10</span></span>
<span id="cb170-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">222</span>)</span>
<span id="cb170-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb170-3" aria-hidden="true" tabindex="-1"></a>main_split<span class="ot">=</span><span class="fu">initial_split</span>(ames_cleaned, <span class="at">prop=</span><span class="dv">4</span><span class="sc">/</span><span class="dv">5</span>)</span>
<span id="cb170-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb170-4" aria-hidden="true" tabindex="-1"></a>ames_train<span class="ot">=</span><span class="fu">training</span>(main_split)</span>
<span id="cb170-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb170-5" aria-hidden="true" tabindex="-1"></a>ames_test<span class="ot">=</span><span class="fu">testing</span>(main_split)</span>
<span id="cb170-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb170-6" aria-hidden="true" tabindex="-1"></a>ames_flds <span class="ot">=</span> <span class="fu">vfold_cv</span>(<span class="at">data=</span>ames_cleaned,<span class="at">v=</span>k)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Training and test for each fold (e.g.&nbsp;fold 1, fold 2, fold 3, fold 4 for training; fold 5 for testing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb171-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span>  ames_flds <span class="sc">%&gt;%</span>   </span>
<span id="cb171-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb171-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">train =</span> <span class="fu">map</span>(<span class="at">.x=</span>splits,<span class="sc">~</span><span class="fu">training</span>(.x)),</span>
<span id="cb171-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">validate =</span> <span class="fu">map</span>(<span class="at">.x=</span>splits,<span class="sc">~</span><span class="fu">testing</span>(.x))</span>
<span id="cb171-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb171-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb171-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb171-6" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  10-fold cross-validation 
# A tibble: 10 × 4
   splits             id     train                 validate           
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;                &lt;list&gt;             
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble [2,596 × 31]&gt; &lt;tibble [289 × 31]&gt;
 2 &lt;split [2596/289]&gt; Fold02 &lt;tibble [2,596 × 31]&gt; &lt;tibble [289 × 31]&gt;
 3 &lt;split [2596/289]&gt; Fold03 &lt;tibble [2,596 × 31]&gt; &lt;tibble [289 × 31]&gt;
 4 &lt;split [2596/289]&gt; Fold04 &lt;tibble [2,596 × 31]&gt; &lt;tibble [289 × 31]&gt;
 5 &lt;split [2596/289]&gt; Fold05 &lt;tibble [2,596 × 31]&gt; &lt;tibble [289 × 31]&gt;
 6 &lt;split [2597/288]&gt; Fold06 &lt;tibble [2,597 × 31]&gt; &lt;tibble [288 × 31]&gt;
 7 &lt;split [2597/288]&gt; Fold07 &lt;tibble [2,597 × 31]&gt; &lt;tibble [288 × 31]&gt;
 8 &lt;split [2597/288]&gt; Fold08 &lt;tibble [2,597 × 31]&gt; &lt;tibble [288 × 31]&gt;
 9 &lt;split [2597/288]&gt; Fold09 &lt;tibble [2,597 × 31]&gt; &lt;tibble [288 × 31]&gt;
10 &lt;split [2597/288]&gt; Fold10 &lt;tibble [2,597 × 31]&gt; &lt;tibble [288 × 31]&gt;</code></pre>
</div>
</div>
<p>Fit models of different size on each fold-based training set, obtained above</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaps)</span>
<span id="cb173-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-2" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb173-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb173-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">reg_sub_fits =</span> <span class="fu">map</span>(<span class="at">.x=</span>train,</span>
<span id="cb173-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.f=</span><span class="sc">~</span><span class="fu">regsubsets</span>(sale_price_log <span class="sc">~</span>.,</span>
<span id="cb173-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">data=</span>.x,<span class="at">nvmax =</span> <span class="dv">30</span>,<span class="at">method =</span> <span class="st">"forward"</span>))</span>
<span id="cb173-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb173-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb173-8" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  10-fold cross-validation 
# A tibble: 10 × 5
   splits             id     train                 validate reg_sub_fits
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;                &lt;list&gt;   &lt;list&gt;      
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 2 &lt;split [2596/289]&gt; Fold02 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 3 &lt;split [2596/289]&gt; Fold03 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 4 &lt;split [2596/289]&gt; Fold04 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 5 &lt;split [2596/289]&gt; Fold05 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 6 &lt;split [2597/288]&gt; Fold06 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 7 &lt;split [2597/288]&gt; Fold07 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 8 &lt;split [2597/288]&gt; Fold08 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
 9 &lt;split [2597/288]&gt; Fold09 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  
10 &lt;split [2597/288]&gt; Fold10 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  </code></pre>
</div>
</div>
<p>Pull the matrix containing the predictor values (the \(\bf X\) matrix), note that factors are coded as dummies (as in \(\texttt{lm()}\))</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb175-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb175-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">predictors=</span><span class="fu">map</span>(<span class="at">.x=</span>validate,</span>
<span id="cb175-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb175-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">.f=</span><span class="sc">~</span><span class="fu">model.matrix</span>(<span class="fu">as.formula</span>(<span class="st">"sale_price_log~."</span>),<span class="fu">as.data.frame</span>(.x)))</span>
<span id="cb175-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb175-4" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb175-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb175-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb175-6" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  10-fold cross-validation 
# A tibble: 10 × 6
   splits             id     train                 validate reg_sub_f…¹ predic…²
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;                &lt;list&gt;   &lt;list&gt;      &lt;list&gt;  
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 2 &lt;split [2596/289]&gt; Fold02 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 3 &lt;split [2596/289]&gt; Fold03 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 4 &lt;split [2596/289]&gt; Fold04 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 5 &lt;split [2596/289]&gt; Fold05 &lt;tibble [2,596 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 6 &lt;split [2597/288]&gt; Fold06 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 7 &lt;split [2597/288]&gt; Fold07 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 8 &lt;split [2597/288]&gt; Fold08 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
 9 &lt;split [2597/288]&gt; Fold09 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
10 &lt;split [2597/288]&gt; Fold10 &lt;tibble [2,597 × 31]&gt; &lt;tibble&gt; &lt;regsbsts&gt;  &lt;dbl[…]&gt;
# … with abbreviated variable names ¹​reg_sub_fits, ²​predictors</code></pre>
</div>
</div>
<p>Pull the coefficient estimates, for each test fold and model size</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb177-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb177-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb177-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">coefficients=</span><span class="fu">map</span>(<span class="at">.x=</span>reg_sub_fits,<span class="sc">~</span><span class="fu">coef</span>(.x,<span class="at">id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>))</span>
<span id="cb177-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb177-4" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb177-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb177-5" aria-hidden="true" tabindex="-1"></a>tidy_data_structure </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  10-fold cross-validation 
# A tibble: 10 × 7
   splits             id     train    validate reg_sub_fits predictors coeffic…¹
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;     &lt;list&gt;   
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 2 &lt;split [2596/289]&gt; Fold02 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 3 &lt;split [2596/289]&gt; Fold03 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 4 &lt;split [2596/289]&gt; Fold04 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 5 &lt;split [2596/289]&gt; Fold05 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 6 &lt;split [2597/288]&gt; Fold06 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 7 &lt;split [2597/288]&gt; Fold07 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 8 &lt;split [2597/288]&gt; Fold08 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
 9 &lt;split [2597/288]&gt; Fold09 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
10 &lt;split [2597/288]&gt; Fold10 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;list&gt;   
# … with abbreviated variable name ¹​coefficients</code></pre>
</div>
</div>
<p>Unnest the coefficients vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb179-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span></span>
<span id="cb179-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(coefficients)</span>
<span id="cb179-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb179-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb179-4" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 7
   splits             id     train    validate reg_sub_fits predictors coeffic…¹
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;     &lt;list&gt;   
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [2]&gt;
 2 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [3]&gt;
 3 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [4]&gt;
 4 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [5]&gt;
 5 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [6]&gt;
 6 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [7]&gt;
 7 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [8]&gt;
 8 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [9]&gt;
 9 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl&gt;    
10 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl&gt;    
# … with 290 more rows, and abbreviated variable name ¹​coefficients</code></pre>
</div>
</div>
<p>For each model, compute the corresponding \(\bf X\) matrix for the test observations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb181-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb181-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb181-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb181-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb181-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">preds_mat =</span> <span class="fu">map2</span>(<span class="at">.x=</span>predictors, <span class="at">.y=</span>coefficients, <span class="sc">~</span>.x[,<span class="fu">names</span>(.y)]),</span>
<span id="cb181-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb181-4" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb181-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb181-5" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 8
   splits             id     train    validate reg_sub_fits predictors coeffic…¹
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;     &lt;list&gt;   
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [2]&gt;
 2 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [3]&gt;
 3 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [4]&gt;
 4 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [5]&gt;
 5 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [6]&gt;
 6 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [7]&gt;
 7 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [8]&gt;
 8 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [9]&gt;
 9 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl&gt;    
10 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl&gt;    
# … with 290 more rows, 1 more variable: preds_mat &lt;list&gt;, and abbreviated
#   variable name ¹​coefficients</code></pre>
</div>
</div>
<p>Compute \(\hat{y}\).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb183-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb183-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb183-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">preds_mat =</span> <span class="fu">map2</span>(<span class="at">.x=</span>predictors, <span class="at">.y=</span>coefficients, <span class="sc">~</span>.x[,<span class="fu">names</span>(.y)]),</span>
<span id="cb183-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb183-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">yhat =</span> <span class="fu">map2</span>(<span class="at">.x=</span>preds_mat, <span class="at">.y=</span>coefficients, <span class="sc">~</span>.x <span class="sc">%*%</span> .y)</span>
<span id="cb183-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb183-5" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb183-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb183-6" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 9
   splits             id     train    validate reg_sub_fits predictors coeffic…¹
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;     &lt;list&gt;   
 1 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [2]&gt;
 2 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [3]&gt;
 3 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [4]&gt;
 4 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [5]&gt;
 5 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [6]&gt;
 6 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [7]&gt;
 7 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [8]&gt;
 8 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [9]&gt;
 9 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl&gt;    
10 &lt;split [2596/289]&gt; Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl&gt;    
# … with 290 more rows, 2 more variables: preds_mat &lt;list&gt;, yhat &lt;list&gt;, and
#   abbreviated variable name ¹​coefficients</code></pre>
</div>
</div>
<p>Compute the squared residuals \(\left(y-\hat{y}\right)^{2}\).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb185-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb185-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb185-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb185-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb185-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">squared_error =</span> <span class="fu">map2</span>(<span class="at">.x=</span>yhat, <span class="at">.y=</span>validate, <span class="sc">~</span>(.x<span class="sc">-</span>.y<span class="sc">$</span>sale_price_log)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb185-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb185-4" aria-hidden="true" tabindex="-1"></a>  )  </span>
<span id="cb185-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb185-5" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>splits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 9
   id     train    validate reg_sub_fits predictors coeffici…¹ preds_…² yhat    
   &lt;chr&gt;  &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;     &lt;list&gt;     &lt;list&gt;   &lt;list&gt;  
 1 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [2]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 2 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [3]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 3 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [4]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 4 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [5]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 5 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [6]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 6 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [7]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 7 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [8]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 8 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [9]&gt;  &lt;dbl[…]&gt; &lt;dbl[…]&gt;
 9 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [10]&gt; &lt;dbl[…]&gt; &lt;dbl[…]&gt;
10 Fold01 &lt;tibble&gt; &lt;tibble&gt; &lt;regsbsts&gt;   &lt;dbl[…]&gt;   &lt;dbl [11]&gt; &lt;dbl[…]&gt; &lt;dbl[…]&gt;
# … with 290 more rows, 1 more variable: squared_error &lt;list&gt;, and abbreviated
#   variable names ¹​coefficients, ²​preds_mat</code></pre>
</div>
</div>
<p>Compute the RMSEs</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb187-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb187-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(squared_error) <span class="sc">%&gt;%</span>  <span class="fu">group_by</span>(id , coefficients) <span class="sc">%&gt;%</span></span>
<span id="cb187-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">RMSE=</span><span class="fu">sqrt</span>(<span class="fu">mean</span>(squared_error)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'id'. You can override using the `.groups`
argument.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb189-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 3
# Groups:   id [10]
   id     coefficients   RMSE
   &lt;chr&gt;  &lt;list&gt;        &lt;dbl&gt;
 1 Fold01 &lt;dbl [2]&gt;    0.127 
 2 Fold01 &lt;dbl [3]&gt;    0.107 
 3 Fold01 &lt;dbl [4]&gt;    0.105 
 4 Fold01 &lt;dbl [5]&gt;    0.101 
 5 Fold01 &lt;dbl [6]&gt;    0.0981
 6 Fold01 &lt;dbl [7]&gt;    0.0956
 7 Fold01 &lt;dbl [8]&gt;    0.0928
 8 Fold01 &lt;dbl [9]&gt;    0.0912
 9 Fold01 &lt;dbl [10]&gt;   0.0905
10 Fold01 &lt;dbl [11]&gt;   0.0901
# … with 290 more rows</code></pre>
</div>
</div>
<p>Average over the folds to obtain the cross-validation estimate of RMSE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb191-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="ot">=</span> tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb191-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb191-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">model_size=</span><span class="fu">map</span>(<span class="at">.x=</span>coefficients,<span class="sc">~</span><span class="fu">length</span>(.x))) <span class="sc">%&gt;%</span></span>
<span id="cb191-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(model_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Plot the models size versus the CV-RMSE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-1" aria-hidden="true" tabindex="-1"></a>tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb192-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_size) <span class="sc">%&gt;%</span> </span>
<span id="cb192-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cv_RMSE=</span><span class="fu">mean</span>(RMSE)) <span class="sc">%&gt;%</span> </span>
<span id="cb192-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> model_size,<span class="at">y=</span>cv_RMSE))<span class="sc">+</span></span>
<span id="cb192-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb192-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> model_size[<span class="fu">which.min</span>(cv_RMSE)],</span>
<span id="cb192-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb192-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">min</span>(cv_RMSE)),<span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Find the best model size.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb193-1" aria-hidden="true" tabindex="-1"></a>bss_rmse<span class="ot">=</span>tidy_data_structure <span class="sc">%&gt;%</span> </span>
<span id="cb193-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_size) <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cv_RMSE=</span><span class="fu">mean</span>(RMSE)) <span class="sc">%&gt;%</span> </span>
<span id="cb193-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb193-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">which.min</span>(cv_RMSE))</span>
<span id="cb193-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb193-5" aria-hidden="true" tabindex="-1"></a>BSS_RMSE<span class="ot">=</span>bss_rmse<span class="sc">$</span>cv_RMSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="regressione-ridge-e-lasso" class="level2">
<h2 class="anchored" data-anchor-id="regressione-ridge-e-lasso">REGRESSIONE RIDGE E LASSO<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#regressione-ridge-e-lasso" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Eseguo il solito split iniziale, creo la recipe, il modello e il workflow sia per la regressione Ridge che per la regressione Lasso.</p>
<p>Importante e’ standardizzare</p>
<p>ho gi? trasformato tutte le variabili categoriche in dummy in precedenza</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-1" aria-hidden="true" tabindex="-1"></a>init_split<span class="ot">=</span><span class="fu">initial_split</span>(ames_cleaned,<span class="at">prop=</span><span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb194-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-2" aria-hidden="true" tabindex="-1"></a>ames_train<span class="ot">=</span><span class="fu">training</span>(init_split)</span>
<span id="cb194-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-3" aria-hidden="true" tabindex="-1"></a>ames_test<span class="ot">=</span><span class="fu">testing</span>(init_split)</span>
<span id="cb194-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-4" aria-hidden="true" tabindex="-1"></a>ames_folds <span class="ot">=</span> <span class="fu">vfold_cv</span>(ames_train,<span class="at">v =</span> <span class="dv">5</span>) </span>
<span id="cb194-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-6" aria-hidden="true" tabindex="-1"></a>ames_recipe <span class="ot">=</span> <span class="fu">recipe</span>(sale_price_log<span class="sc">~</span>.,<span class="at">data=</span>ames_train) <span class="sc">%&gt;%</span> </span>
<span id="cb194-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb194-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>())</span>
<span id="cb194-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-10" aria-hidden="true" tabindex="-1"></a>ames_recipe <span class="sc">%&gt;%</span> <span class="fu">prep</span>() <span class="sc">%&gt;%</span> <span class="fu">juice</span>() <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb194-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb194-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>,<span class="st">"hover"</span>),<span class="at">font=</span><span class="dv">8</span>,<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-striped table-hover" style="font-size: 8px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> year_built </th>
   <th style="text-align:right;"> year_remod_add </th>
   <th style="text-align:right;"> mas_vnr_area </th>
   <th style="text-align:right;"> full_bath </th>
   <th style="text-align:right;"> garage_cars </th>
   <th style="text-align:right;"> dummy_half_bath </th>
   <th style="text-align:right;"> dummy_fireplaces </th>
   <th style="text-align:right;"> dummy_wood_deck_sf </th>
   <th style="text-align:right;"> dummy_open_porch_sf </th>
   <th style="text-align:right;"> lot_area_log </th>
   <th style="text-align:right;"> first_flr_sf_log </th>
   <th style="text-align:right;"> gr_liv_area_log </th>
   <th style="text-align:right;"> ms_sub_class_one_story_1945_and_older </th>
   <th style="text-align:right;"> ms_sub_class_two_story_1946_and_newer </th>
   <th style="text-align:right;"> ms_zoning_residential_medium_density </th>
   <th style="text-align:right;"> neighborhood_northridge_heights </th>
   <th style="text-align:right;"> overall_cond_average </th>
   <th style="text-align:right;"> exterior_2nd_vinyl_sd </th>
   <th style="text-align:right;"> mas_vnr_type_none </th>
   <th style="text-align:right;"> foundation_c_block </th>
   <th style="text-align:right;"> foundation_p_conc </th>
   <th style="text-align:right;"> bsmt_fin_type_1glq </th>
   <th style="text-align:right;"> heating_qc_typical </th>
   <th style="text-align:right;"> central_air_y </th>
   <th style="text-align:right;"> electrical_s_brkr </th>
   <th style="text-align:right;"> garage_type_detchd </th>
   <th style="text-align:right;"> garage_finish_no_garage </th>
   <th style="text-align:right;"> garage_finish_unf </th>
   <th style="text-align:right;"> garage_cond_typical </th>
   <th style="text-align:right;"> paved_drive_paved </th>
   <th style="text-align:right;"> sale_price_log </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 63.47498 </td>
   <td style="text-align:right;"> 95.79011 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 3.698362 </td>
   <td style="text-align:right;"> 1.331663 </td>
   <td style="text-align:right;"> 2.071455 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.013803 </td>
   <td style="text-align:right;"> 17.24456 </td>
   <td style="text-align:right;"> 22.18307 </td>
   <td style="text-align:right;"> 24.72824 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2.740237 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.049569 </td>
   <td style="text-align:right;"> 2.020259 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4.010575 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.254388 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2.022498 </td>
   <td style="text-align:right;"> 3.466907 </td>
   <td style="text-align:right;"> 3.515298 </td>
   <td style="text-align:right;"> 32.12341 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64.83185 </td>
   <td style="text-align:right;"> 96.31827 </td>
   <td style="text-align:right;"> 0.5205178 </td>
   <td style="text-align:right;"> 1.849181 </td>
   <td style="text-align:right;"> 1.331663 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.999933 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 18.00521 </td>
   <td style="text-align:right;"> 22.84817 </td>
   <td style="text-align:right;"> 23.08973 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.020259 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4.010575 </td>
   <td style="text-align:right;"> 3.685586 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 3.466907 </td>
   <td style="text-align:right;"> 3.515298 </td>
   <td style="text-align:right;"> 31.80189 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 65.99016 </td>
   <td style="text-align:right;"> 96.36629 </td>
   <td style="text-align:right;"> 0.2726522 </td>
   <td style="text-align:right;"> 3.698362 </td>
   <td style="text-align:right;"> 2.663327 </td>
   <td style="text-align:right;"> 2.071455 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 19.03424 </td>
   <td style="text-align:right;"> 21.53331 </td>
   <td style="text-align:right;"> 23.71942 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.091086 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.013803 </td>
   <td style="text-align:right;"> 2.201497 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4.010575 </td>
   <td style="text-align:right;"> 3.685586 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 3.466907 </td>
   <td style="text-align:right;"> 3.515298 </td>
   <td style="text-align:right;"> 32.16434 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 63.70665 </td>
   <td style="text-align:right;"> 95.88614 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 3.698362 </td>
   <td style="text-align:right;"> 1.331663 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.999933 </td>
   <td style="text-align:right;"> 2.001721 </td>
   <td style="text-align:right;"> 2.013803 </td>
   <td style="text-align:right;"> 17.20796 </td>
   <td style="text-align:right;"> 21.16640 </td>
   <td style="text-align:right;"> 23.43595 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.049569 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.013803 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4.010575 </td>
   <td style="text-align:right;"> 3.685586 </td>
   <td style="text-align:right;"> 2.254388 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2.022498 </td>
   <td style="text-align:right;"> 3.466907 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 32.50264 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64.79876 </td>
   <td style="text-align:right;"> 94.01355 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 3.698362 </td>
   <td style="text-align:right;"> 2.663327 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.999933 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 18.33321 </td>
   <td style="text-align:right;"> 22.59306 </td>
   <td style="text-align:right;"> 24.20067 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2.014715 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.049569 </td>
   <td style="text-align:right;"> 2.020259 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4.010575 </td>
   <td style="text-align:right;"> 3.685586 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2.022498 </td>
   <td style="text-align:right;"> 3.466907 </td>
   <td style="text-align:right;"> 3.515298 </td>
   <td style="text-align:right;"> 31.73412 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64.79876 </td>
   <td style="text-align:right;"> 94.01355 </td>
   <td style="text-align:right;"> 1.5057837 </td>
   <td style="text-align:right;"> 1.849181 </td>
   <td style="text-align:right;"> 1.331663 </td>
   <td style="text-align:right;"> 2.071455 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 17.68535 </td>
   <td style="text-align:right;"> 23.04061 </td>
   <td style="text-align:right;"> 23.28421 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.020259 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4.010575 </td>
   <td style="text-align:right;"> 3.685586 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 3.466907 </td>
   <td style="text-align:right;"> 3.515298 </td>
   <td style="text-align:right;"> 31.50138 </td>
  </tr>
</tbody>
</table>

</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-1" aria-hidden="true" tabindex="-1"></a>ridge_spec <span class="ot">=</span> <span class="fu">linear_reg</span>(<span class="at">mixture =</span> <span class="dv">0</span>, <span class="at">penalty =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>)</span>
<span id="cb195-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-2" aria-hidden="true" tabindex="-1"></a>lasso_spec <span class="ot">=</span> <span class="fu">linear_reg</span>(<span class="at">mixture =</span> <span class="dv">1</span>, <span class="at">penalty =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>)</span>
<span id="cb195-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-4" aria-hidden="true" tabindex="-1"></a>ridge_wflow<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb195-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(ames_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb195-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(ridge_spec)</span>
<span id="cb195-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb195-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-8" aria-hidden="true" tabindex="-1"></a>lasso_wflow<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb195-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(ames_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb195-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lasso_spec)</span>
<span id="cb195-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-12" aria-hidden="true" tabindex="-1"></a>ridge_lambda_grid <span class="ot">=</span> <span class="fu">expand_grid</span>(<span class="at">penalty =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">31</span>,<span class="at">length=</span><span class="dv">31</span>))</span>
<span id="cb195-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb195-13" aria-hidden="true" tabindex="-1"></a>lasso_lambda_grid <span class="ot">=</span> <span class="fu">expand_grid</span>(<span class="at">penalty =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="at">length=</span><span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eseguo il fit per ogni valore del parametro</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-1" aria-hidden="true" tabindex="-1"></a>ridge_results <span class="ot">=</span> ridge_wflow <span class="sc">%&gt;%</span> </span>
<span id="cb196-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">grid=</span>ridge_lambda_grid,</span>
<span id="cb196-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">resamples=</span>ames_folds)</span>
<span id="cb196-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-5" aria-hidden="true" tabindex="-1"></a>lasso_results <span class="ot">=</span> lasso_wflow <span class="sc">%&gt;%</span> </span>
<span id="cb196-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">grid=</span>lasso_lambda_grid,</span>
<span id="cb196-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb196-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">resamples=</span>ames_folds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold1: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold2: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold3: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold4: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold5: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
</div>
<p>Trascrivo i grafici per entrambe le regressioni e valuto il modello con migliore lambda(o parametro di tuning)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(<span class="fu">tibble</span>(ridge_results <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>()) <span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">method=</span><span class="st">"ridge"</span>),</span>
<span id="cb202-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb202-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">tibble</span>(lasso_results <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>())<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">method=</span><span class="st">"lasso"</span>)</span>
<span id="cb202-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb202-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb202-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb202-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"rmse"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb202-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb202-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>penalty,<span class="at">y =</span> mean,<span class="at">color=</span>method))<span class="sc">+</span><span class="fu">geom_line</span>()<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">"rmse"</span>)  <span class="sc">+</span></span>
<span id="cb202-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb202-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>method,<span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select_best</span>(ridge_results,<span class="at">metric =</span> <span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  penalty .config              
    &lt;dbl&gt; &lt;chr&gt;                
1       0 Preprocessor1_Model01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select_best</span>(lasso_results,<span class="at">metric =</span> <span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  penalty .config              
    &lt;dbl&gt; &lt;chr&gt;                
1       0 Preprocessor1_Model01</code></pre>
</div>
</div>
<p>Infine calcolo le stime dei coefficienti Ridge e Lasso col miglior parametro</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-1" aria-hidden="true" tabindex="-1"></a>tuned_ridge <span class="ot">=</span> <span class="fu">finalize_workflow</span>(<span class="at">x =</span> ridge_wflow, <span class="at">parameters =</span> <span class="fu">select_best</span>(ridge_results,<span class="at">metric =</span> <span class="st">"rmse"</span>))</span>
<span id="cb207-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-2" aria-hidden="true" tabindex="-1"></a>tuned_lasso <span class="ot">=</span> <span class="fu">finalize_workflow</span>(<span class="at">x =</span> lasso_wflow, <span class="at">parameters =</span> <span class="fu">select_best</span>(lasso_results,<span class="at">metric =</span> <span class="st">"rmse"</span>))</span>
<span id="cb207-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-4" aria-hidden="true" tabindex="-1"></a>ridge_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(tuned_ridge,</span>
<span id="cb207-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">split =</span> init_split)</span>
<span id="cb207-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-7" aria-hidden="true" tabindex="-1"></a>lasso_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(tuned_lasso,</span>
<span id="cb207-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">split =</span> init_split)</span>
<span id="cb207-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-9" aria-hidden="true" tabindex="-1"></a>ridge_rmse<span class="ot">=</span>ridge_fit <span class="sc">%&gt;%</span></span>
<span id="cb207-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span>
<span id="cb207-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-11" aria-hidden="true" tabindex="-1"></a>lasso_rmse<span class="ot">=</span>lasso_fit <span class="sc">%&gt;%</span></span>
<span id="cb207-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span>
<span id="cb207-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-13" aria-hidden="true" tabindex="-1"></a>RIDGE_RMSE<span class="ot">=</span>ridge_rmse<span class="sc">$</span>.estimate[<span class="dv">1</span>]</span>
<span id="cb207-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb207-14" aria-hidden="true" tabindex="-1"></a>  LASSO_RMSE<span class="ot">=</span>lasso_rmse<span class="sc">$</span>.estimate[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pca" class="level2">
<h2 class="anchored" data-anchor-id="pca">PCA<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#pca" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb208-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"FactoMineR"</span>)</span>
<span id="cb208-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcola i componenti principali utilizzando la funzione prcomp()</span></span>
<span id="cb209-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-2" aria-hidden="true" tabindex="-1"></a>pca.fit <span class="ot">=</span> <span class="fu">prcomp</span>(ames_train, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span>
<span id="cb209-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleziona i primi 10 componenti principali</span></span>
<span id="cb209-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-5" aria-hidden="true" tabindex="-1"></a>pca.train <span class="ot">=</span> <span class="fu">data.frame</span>(pca.fit<span class="sc">$</span>x[,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">sale_price_log =</span> ames_train<span class="sc">$</span>sale_price_log)</span>
<span id="cb209-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-6" aria-hidden="true" tabindex="-1"></a>pca.test <span class="ot">=</span> <span class="fu">predict</span>(pca.fit, <span class="at">newdata =</span> ames_test)</span>
<span id="cb209-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-7" aria-hidden="true" tabindex="-1"></a>pca.test <span class="ot">=</span> <span class="fu">data.frame</span>(pca.test[,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">sale_price_log =</span> ames_test<span class="sc">$</span>sale_price_log)</span>
<span id="cb209-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilizza i componenti principali per addestrare un modello di regressione</span></span>
<span id="cb209-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-10" aria-hidden="true" tabindex="-1"></a>pca.lm <span class="ot">=</span> <span class="fu">lm</span>(sale_price_log <span class="sc">~</span>., <span class="at">data =</span> pca.train)</span>
<span id="cb209-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-11" aria-hidden="true" tabindex="-1"></a>pca.pred <span class="ot">=</span> <span class="fu">predict</span>(pca.lm, <span class="at">newdata =</span> pca.test)</span>
<span id="cb209-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcola l'RMSE</span></span>
<span id="cb209-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-14" aria-hidden="true" tabindex="-1"></a>pca_rmse <span class="ot">=</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((pca.test<span class="sc">$</span>sale_price_log <span class="sc">-</span> pca.pred)<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb209-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb209-15" aria-hidden="true" tabindex="-1"></a>pca_rmse</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.07348422</code></pre>
</div>
</div>
<p>PASSIAMO ALLE REGRESSIONI NON LINEARI</p>
</section>
<section id="regression-tree" class="level2">
<h2 class="anchored" data-anchor-id="regression-tree">REGRESSION TREE<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#regression-tree" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>Split del training test e test set su un dataset costruito per model specification</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb211-1" aria-hidden="true" tabindex="-1"></a>ames_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(ames_cleaned, </span>
<span id="cb211-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb211-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">strata =</span> sale_price_log)</span>
<span id="cb211-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb211-3" aria-hidden="true" tabindex="-1"></a>ames_train <span class="ot">&lt;-</span> <span class="fu">training</span>(ames_split)</span>
<span id="cb211-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb211-4" aria-hidden="true" tabindex="-1"></a>ames_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(ames_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>creiamo una variabile che contiene uno scheletro di albero di decisione dove dobbiamo fare un processo di tuning sia del costo complessita alfa sia della profondit? dell’albero</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-1" aria-hidden="true" tabindex="-1"></a>tune_spec <span class="ot">&lt;-</span> </span>
<span id="cb212-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">decision_tree</span>(</span>
<span id="cb212-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cost_complexity =</span> <span class="fu">tune</span>(),</span>
<span id="cb212-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>()</span>
<span id="cb212-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb212-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb212-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb212-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb212-9" aria-hidden="true" tabindex="-1"></a>tune_spec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Decision Tree Model Specification (regression)

Main Arguments:
  cost_complexity = tune()
  tree_depth = tune()

Computational engine: rpart </code></pre>
</div>
</div>
<p>Siccome vogliamo effettuare un processo di tuning dei parametri di tuning creando due griglie di valori di 5 livelli, quindi 25 possibili combinazioni di valori di taglia dell’albero e penalty di costo complessit?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb214-1" aria-hidden="true" tabindex="-1"></a>tree_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(<span class="fu">cost_complexity</span>(),</span>
<span id="cb214-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb214-2" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">tree_depth</span>(),</span>
<span id="cb214-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb214-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">levels =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>avviamo la cross validation del tuning</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">234</span>)</span>
<span id="cb215-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb215-2" aria-hidden="true" tabindex="-1"></a>ames_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(ames_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creiamo il nostro workflow dove aggiungiamo il modello di tuning dei nostri parametri creando appunto di volta in volta per 25 combinazioni dei parametri di tuning un albero che cerchi di partizionare le osservazioni in base alle categorie della variabile y contro tutti i predittori (le altre variabili).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">345</span>)</span>
<span id="cb216-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-3" aria-hidden="true" tabindex="-1"></a>tree_wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb216-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(tune_spec) <span class="sc">%&gt;%</span></span>
<span id="cb216-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_formula</span>(sale_price_log <span class="sc">~</span> .)</span>
<span id="cb216-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-7" aria-hidden="true" tabindex="-1"></a>tree_res <span class="ot">&lt;-</span> </span>
<span id="cb216-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-8" aria-hidden="true" tabindex="-1"></a>  tree_wf <span class="sc">%&gt;%</span> </span>
<span id="cb216-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb216-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> ames_folds,</span>
<span id="cb216-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> tree_grid</span>
<span id="cb216-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb216-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizziamo i risultati del nostro workflow che nel caso di un problema di classificazione si parla di area della curva roc e tasso di corretta classificazione o accuracy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb217-1" aria-hidden="true" tabindex="-1"></a>tree_res <span class="sc">%&gt;%</span> </span>
<span id="cb217-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 8
   cost_complexity tree_depth .metric .estimator  mean     n std_err .config    
             &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;      
 1    0.0000000001          1 rmse    standard   0.128    10 0.00349 Preprocess…
 2    0.0000000001          1 rsq     standard   0.393    10 0.0184  Preprocess…
 3    0.0000000178          1 rmse    standard   0.128    10 0.00349 Preprocess…
 4    0.0000000178          1 rsq     standard   0.393    10 0.0184  Preprocess…
 5    0.00000316            1 rmse    standard   0.128    10 0.00349 Preprocess…
 6    0.00000316            1 rsq     standard   0.393    10 0.0184  Preprocess…
 7    0.000562              1 rmse    standard   0.128    10 0.00349 Preprocess…
 8    0.000562              1 rsq     standard   0.393    10 0.0184  Preprocess…
 9    0.1                   1 rmse    standard   0.128    10 0.00349 Preprocess…
10    0.1                   1 rsq     standard   0.393    10 0.0184  Preprocess…
# … with 40 more rows</code></pre>
</div>
</div>
<p>Plottiamo i nostri risultati.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-1" aria-hidden="true" tabindex="-1"></a>tree_res <span class="sc">%&gt;%</span></span>
<span id="cb219-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb219-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tree_depth =</span> <span class="fu">factor</span>(tree_depth)) <span class="sc">%&gt;%</span></span>
<span id="cb219-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(cost_complexity, mean, <span class="at">color =</span> tree_depth)) <span class="sc">+</span></span>
<span id="cb219-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb219-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb219-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb219-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb219-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb219-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Cerchiamo di capire quali sono i primi 5 modelli in base alla metrica “rmse” e ci salviamo il migliore in base alla stessa metrica</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb220-1" aria-hidden="true" tabindex="-1"></a>tree_res <span class="sc">%&gt;%</span></span>
<span id="cb220-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  cost_complexity tree_depth .metric .estimator   mean     n std_err .config    
            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;      
1    0.0000000001          8 rmse    standard   0.0800    10 0.00265 Preprocess…
2    0.0000000178          8 rmse    standard   0.0800    10 0.00265 Preprocess…
3    0.00000316            8 rmse    standard   0.0800    10 0.00265 Preprocess…
4    0.000562              8 rmse    standard   0.0802    10 0.00235 Preprocess…
5    0.0000000001         11 rmse    standard   0.0803    10 0.00265 Preprocess…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb222-1" aria-hidden="true" tabindex="-1"></a>best_tree <span class="ot">&lt;-</span> tree_res <span class="sc">%&gt;%</span></span>
<span id="cb222-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb222-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb222-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb222-3" aria-hidden="true" tabindex="-1"></a>best_tree</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  cost_complexity tree_depth .config              
            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;                
1    0.0000000001          8 Preprocessor1_Model11</code></pre>
</div>
</div>
<p>Adesso che abbiamo fatto il tuning sui due parametri possiamo finalizzare il workflow del tuning.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb224-1" aria-hidden="true" tabindex="-1"></a>final_wf <span class="ot">&lt;-</span> </span>
<span id="cb224-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb224-2" aria-hidden="true" tabindex="-1"></a>  tree_wf <span class="sc">%&gt;%</span> </span>
<span id="cb224-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb224-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(best_tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>ora che abbiamo trovatio il modello ottimo per numero di rami e valore della penalty dobbiamo fare l’ultimo fit sul test set per valutare la sua perfomance</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-1" aria-hidden="true" tabindex="-1"></a>final_fit <span class="ot">&lt;-</span> </span>
<span id="cb225-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-2" aria-hidden="true" tabindex="-1"></a>  final_wf <span class="sc">%&gt;%</span></span>
<span id="cb225-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(ames_split) </span>
<span id="cb225-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-5" aria-hidden="true" tabindex="-1"></a>metrics<span class="ot">=</span>final_fit <span class="sc">%&gt;%</span></span>
<span id="cb225-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span>
<span id="cb225-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-7" aria-hidden="true" tabindex="-1"></a>REGTREE_RMSE<span class="ot">=</span>metrics<span class="sc">$</span>.estimate[<span class="dv">1</span>]</span>
<span id="cb225-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb225-8" aria-hidden="true" tabindex="-1"></a>REGTREE_RMSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.08310332</code></pre>
</div>
</div>
<p>Estraiamo dal nostro workflow la struttura dell’albero e visualizziamola</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb227-1" aria-hidden="true" tabindex="-1"></a>final_tree <span class="ot">&lt;-</span> <span class="fu">extract_workflow</span>(final_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>vedo le variabili piu’ importanti negli split</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Caricamento pacchetto: 'vip'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Il seguente oggetto è mascherato da 'package:utils':

    vi</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb231-1" aria-hidden="true" tabindex="-1"></a>final_tree <span class="sc">%&gt;%</span> </span>
<span id="cb231-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_fit_parsnip</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb231-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-67-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>visualizzo l’albero</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb232-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb232-2" aria-hidden="true" tabindex="-1"></a>final_tree <span class="sc">%&gt;%</span></span>
<span id="cb232-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb232-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_fit_engine</span>() <span class="sc">%&gt;%</span></span>
<span id="cb232-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb232-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rpart.plot</span>(<span class="at">roundint =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-68-1.png" class="img-fluid" width="1920"></p>
</div>
</div>
</section>
<section id="pruning" class="level2">
<h2 class="anchored" data-anchor-id="pruning">PRUNING<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#pruning" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"kableExtra"</span>)</span>
<span id="cb233-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"xgboost"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Caricamento pacchetto: 'xgboost'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Il seguente oggetto è mascherato da 'package:dplyr':

    slice</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb236-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-2" aria-hidden="true" tabindex="-1"></a>ames_split <span class="ot">=</span> <span class="fu">initial_split</span>(ames_cleaned,<span class="at">prop=</span><span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb236-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-3" aria-hidden="true" tabindex="-1"></a>ames_train <span class="ot">=</span> <span class="fu">training</span>(ames_split)</span>
<span id="cb236-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-4" aria-hidden="true" tabindex="-1"></a>ames_test <span class="ot">=</span> <span class="fu">testing</span>(ames_split)</span>
<span id="cb236-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-5" aria-hidden="true" tabindex="-1"></a>ames_folds<span class="ot">=</span> <span class="fu">vfold_cv</span>(ames_train,<span class="at">v=</span><span class="dv">5</span>)</span>
<span id="cb236-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-7" aria-hidden="true" tabindex="-1"></a>ames_recipe <span class="ot">=</span> ames_train <span class="sc">%&gt;%</span> <span class="fu">recipe</span>(sale_price_log<span class="sc">~</span>.)</span>
<span id="cb236-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-9" aria-hidden="true" tabindex="-1"></a>tree_spec <span class="ot">=</span> <span class="fu">decision_tree</span>(<span class="at">cost_complexity=</span><span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb236-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb236-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb236-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-13" aria-hidden="true" tabindex="-1"></a>ames_wflow <span class="ot">=</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb236-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(ames_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb236-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb236-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(tree_spec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Definisco i valori del parametro del cost complexity pruning ed eseguo il fit.</p>
<p>Attraverso l’analisi dell’accuratezza osservo che 0 ? il miglior parametro</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb237-1" aria-hidden="true" tabindex="-1"></a>alphas <span class="ot">=</span> <span class="fu">expand.grid</span>(<span class="at">cost_complexity =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">05</span>))</span>
<span id="cb237-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb237-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb237-3" aria-hidden="true" tabindex="-1"></a>ames_fit <span class="ot">=</span> ames_wflow <span class="sc">%&gt;%</span> </span>
<span id="cb237-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb237-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples=</span>ames_folds,</span>
<span id="cb237-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb237-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">grid=</span>alphas,</span>
<span id="cb237-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb237-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">control=</span><span class="fu">control_grid</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold1: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold2: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold3: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold4: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold5: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb243-1" aria-hidden="true" tabindex="-1"></a>ames_metrics <span class="ot">=</span> ames_fit <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>()</span>
<span id="cb243-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb243-2" aria-hidden="true" tabindex="-1"></a>ames_metrics <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>cost_complexity,<span class="at">y=</span>mean,<span class="at">color=</span>.metric))<span class="sc">+</span><span class="fu">geom_line</span>()<span class="sc">+</span><span class="fu">facet_wrap</span>(<span class="sc">~</span>.metric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 12 rows containing missing values (`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-71-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb245-1" aria-hidden="true" tabindex="-1"></a>param_final <span class="ot">&lt;-</span> ames_fit <span class="sc">%&gt;%</span></span>
<span id="cb245-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb245-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_best</span>(<span class="at">metric =</span> <span class="st">"rmse"</span>)</span>
<span id="cb245-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb245-3" aria-hidden="true" tabindex="-1"></a>param_final</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  cost_complexity .config              
            &lt;dbl&gt; &lt;chr&gt;                
1               0 Preprocessor1_Model01</code></pre>
</div>
</div>
<p>Inserisco il valore del parametro nel workflow ed eseguo il fit finale.</p>
<p>La performance sul test set si valuta con collect_metrics</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-1" aria-hidden="true" tabindex="-1"></a>ames_wflow <span class="ot">&lt;-</span> ames_wflow <span class="sc">%&gt;%</span></span>
<span id="cb247-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(param_final)</span>
<span id="cb247-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-4" aria-hidden="true" tabindex="-1"></a>ames_fit <span class="ot">=</span> ames_wflow <span class="sc">%&gt;%</span></span>
<span id="cb247-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(ames_split)</span>
<span id="cb247-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-7" aria-hidden="true" tabindex="-1"></a>rmse_prun<span class="ot">=</span>ames_fit <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>()</span>
<span id="cb247-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-8" aria-hidden="true" tabindex="-1"></a>RMSE_PRUN<span class="ot">=</span>rmse_prun<span class="sc">$</span>.estimate[<span class="dv">1</span>]</span>
<span id="cb247-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb247-9" aria-hidden="true" tabindex="-1"></a>RMSE_PRUN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.07926585</code></pre>
</div>
</div>
</section>
<section id="random-forest" class="level2">
<h2 class="anchored" data-anchor-id="random-forest">RANDOM FOREST<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#random-forest" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1243</span>)</span>
<span id="cb249-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-2" aria-hidden="true" tabindex="-1"></a>ames_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(ames_cleaned, <span class="at">prop =</span> .<span class="dv">1</span>, <span class="at">strata =</span> sale_price_log)</span>
<span id="cb249-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-3" aria-hidden="true" tabindex="-1"></a>ames_train <span class="ot">&lt;-</span> <span class="fu">training</span>(ames_split)</span>
<span id="cb249-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-4" aria-hidden="true" tabindex="-1"></a>ames_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(ames_split)</span>
<span id="cb249-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-5" aria-hidden="true" tabindex="-1"></a>ames_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(ames_train, <span class="at">v =</span> <span class="dv">3</span>, <span class="at">repeats =</span> <span class="dv">1</span>, <span class="at">strata =</span> sale_price_log)</span>
<span id="cb249-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-6" aria-hidden="true" tabindex="-1"></a><span class="co"># divido il training set in 3 folds</span></span>
<span id="cb249-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-7" aria-hidden="true" tabindex="-1"></a>ames_recipe<span class="ot">=</span><span class="fu">recipe</span>(sale_price_log <span class="sc">~</span> ., <span class="at">data =</span> ames_train, <span class="at">importance =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>())</span>
<span id="cb249-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-10" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> </span>
<span id="cb249-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rand_forest</span>(<span class="at">mtry =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb249-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_mode</span>(<span class="st">"regression"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"ranger"</span>)</span>
<span id="cb249-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-15" aria-hidden="true" tabindex="-1"></a>rf_wflow <span class="ot">=</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb249-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(ames_recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb249-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb249-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(rf_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eseguo il tuning per scegliere il valore del numero di predittori da usare per ogni albero della random forest</p>
<p>Specifico cosi la griglia da utilizzare nel fit</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-1" aria-hidden="true" tabindex="-1"></a>rf_param <span class="ot">&lt;-</span></span>
<span id="cb250-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-2" aria-hidden="true" tabindex="-1"></a>    rf_wflow <span class="sc">%&gt;%</span></span>
<span id="cb250-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-3" aria-hidden="true" tabindex="-1"></a>    hardhat<span class="sc">::</span><span class="fu">extract_parameter_set_dials</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb250-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update</span>(<span class="at">mtry =</span> <span class="fu">mtry</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)),)</span>
<span id="cb250-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-6" aria-hidden="true" tabindex="-1"></a>rf_grid<span class="ot">=</span><span class="fu">grid_regular</span>(rf_param)</span>
<span id="cb250-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-8" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="ot">=</span> rf_wflow <span class="sc">%&gt;%</span> </span>
<span id="cb250-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">grid=</span>rf_grid,</span>
<span id="cb250-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">resamples=</span>ames_folds,</span>
<span id="cb250-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb250-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">param_info =</span> rf_param)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Valuto l’RMSE per ogni albero e scelgo i migliori parametri di tuning</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb251-1" aria-hidden="true" tabindex="-1"></a>rf_rmses<span class="ot">=</span>rf_fit <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"rmse"</span>)</span>
<span id="cb251-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb251-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb251-3" aria-hidden="true" tabindex="-1"></a>rf_rmses <span class="sc">%&gt;%</span> <span class="fu">select</span>(mtry,mean) <span class="sc">%&gt;%</span></span>
<span id="cb251-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb251-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">rmse=</span>mean) <span class="sc">%&gt;%</span> </span>
<span id="cb251-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb251-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"mtry"</span>, <span class="fu">c</span>(mtry)) <span class="sc">%&gt;%</span> </span>
<span id="cb251-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb251-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>mtry,<span class="at">y=</span>rmse))<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb252-1" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="sc">%&gt;%</span>  <span class="fu">select_best</span>(<span class="at">metric=</span> <span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
   mtry .config             
  &lt;int&gt; &lt;chr&gt;               
1     5 Preprocessor1_Model3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb254-1" aria-hidden="true" tabindex="-1"></a>rf_param_final <span class="ot">&lt;-</span> <span class="fu">select_by_one_std_err</span>(rf_fit, mtry,</span>
<span id="cb254-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb254-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">metric =</span> <span class="st">"rmse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creo il workflow finale con i parametri scelti, modifico anche la recipe perch? anch’essa conteneva un parametro di tuning e valuto l’rmse sul test set</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb255-1" aria-hidden="true" tabindex="-1"></a>rf_wflow_final <span class="ot">&lt;-</span> rf_wflow <span class="sc">%&gt;%</span> <span class="fu">finalize_workflow</span>(rf_param_final)  </span>
<span id="cb255-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb255-2" aria-hidden="true" tabindex="-1"></a>rf_wflow_final_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(rf_wflow_final, <span class="at">data =</span> ames_train)</span>
<span id="cb255-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb255-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb255-4" aria-hidden="true" tabindex="-1"></a>ames_rec     <span class="ot">&lt;-</span> <span class="fu">extract_recipe</span>(rf_wflow_final_fit)</span>
<span id="cb255-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb255-5" aria-hidden="true" tabindex="-1"></a>rf_final_fit <span class="ot">&lt;-</span> <span class="fu">pull_workflow_fit</span>(rf_wflow_final_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `pull_workflow_fit()` was deprecated in workflows 0.2.3.
ℹ Please use `extract_fit_parsnip()` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb257-1" aria-hidden="true" tabindex="-1"></a>ames_test<span class="sc">$</span>.pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_final_fit, </span>
<span id="cb257-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb257-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">new_data =</span> <span class="fu">bake</span>(ames_rec, ames_test))<span class="sc">$</span>.pred</span>
<span id="cb257-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb257-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb257-4" aria-hidden="true" tabindex="-1"></a>metrics<span class="ot">=</span><span class="fu">metrics</span>(ames_test, <span class="at">truth =</span> sale_price_log, <span class="at">estimate =</span> .pred)</span>
<span id="cb257-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb257-5" aria-hidden="true" tabindex="-1"></a>RF_RMSE<span class="ot">=</span>metrics<span class="sc">$</span>.estimate[<span class="dv">1</span>]</span>
<span id="cb257-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb257-6" aria-hidden="true" tabindex="-1"></a>RF_RMSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.07697638</code></pre>
</div>
</div>
</section>
<section id="boosting" class="level2">
<h2 class="anchored" data-anchor-id="boosting">BOOSTING<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#boosting" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb259-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb259-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb259-3" aria-hidden="true" tabindex="-1"></a>ames_cleaned2<span class="ot">=</span>ames_cleaned <span class="sc">%&gt;%</span> <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-1" aria-hidden="true" tabindex="-1"></a>ames_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(</span>
<span id="cb260-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-2" aria-hidden="true" tabindex="-1"></a>  ames_cleaned2,</span>
<span id="cb260-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop =</span> <span class="fl">0.2</span>,</span>
<span id="cb260-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">strata =</span> sale_price_log</span>
<span id="cb260-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb260-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-6" aria-hidden="true" tabindex="-1"></a>ames_train<span class="ot">=</span><span class="fu">training</span>(ames_split)</span>
<span id="cb260-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-7" aria-hidden="true" tabindex="-1"></a>ames_test<span class="ot">=</span><span class="fu">testing</span>(ames_split)</span>
<span id="cb260-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-8" aria-hidden="true" tabindex="-1"></a>ames_folds <span class="ot">=</span> <span class="fu">vfold_cv</span>(ames_train,<span class="at">v =</span> <span class="dv">5</span>)</span>
<span id="cb260-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-11" aria-hidden="true" tabindex="-1"></a>preprocessing_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(sale_price_log <span class="sc">~</span> ., <span class="at">data =</span> ames_train) <span class="sc">%&gt;%</span></span>
<span id="cb260-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_string2factor</span>(<span class="fu">all_nominal</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb260-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_other</span>(<span class="fu">all_nominal</span>(), <span class="at">threshold =</span> <span class="fl">0.01</span>) <span class="sc">%&gt;%</span></span>
<span id="cb260-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_nzv</span>(<span class="fu">all_nominal</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb260-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>()</span>
<span id="cb260-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-17" aria-hidden="true" tabindex="-1"></a>ames_folds <span class="ot">=</span> <span class="fu">bake</span>(preprocessing_recipe,</span>
<span id="cb260-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb260-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">new_data =</span> ames_train) <span class="sc">%&gt;%</span>  <span class="fu">vfold_cv</span>(<span class="at">v =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eseguo il bake, poi nella specifica del modello ho molti parametri da considerare nel boosting:</p>
<p>-il numero di alberi(che in questo caso fisso a 1000)</p>
<p>-il minimo di dati che possono essere contenuti in ogni nodo</p>
<p>-la massima taglia dell’albero</p>
<p>#- learn_rate: The rate at which the boosting algorithm adapts from iteration-to-iteration.</p>
<p>#- loss_reduction: The reduction in the loss function required to split further.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-1" aria-hidden="true" tabindex="-1"></a>boost_model <span class="ot">&lt;-</span></span>
<span id="cb261-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boost_tree</span>(</span>
<span id="cb261-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">"regression"</span>,</span>
<span id="cb261-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">trees =</span> <span class="dv">1000</span>,</span>
<span id="cb261-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="fu">tune</span>(),</span>
<span id="cb261-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>(),</span>
<span id="cb261-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">learn_rate =</span> <span class="fu">tune</span>(),</span>
<span id="cb261-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">loss_reduction =</span> <span class="fu">tune</span>()</span>
<span id="cb261-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb261-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>, <span class="at">objective =</span> <span class="st">"reg:squarederror"</span>)</span>
<span id="cb261-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-13" aria-hidden="true" tabindex="-1"></a>boost_params <span class="ot">&lt;-</span></span>
<span id="cb261-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-14" aria-hidden="true" tabindex="-1"></a><span class="fu">parameters</span>(</span>
<span id="cb261-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">min_n</span>(),</span>
<span id="cb261-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tree_depth</span>(),</span>
<span id="cb261-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">learn_rate</span>(),</span>
<span id="cb261-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">loss_reduction</span>()</span>
<span id="cb261-19"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb261-20"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-21"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-21" aria-hidden="true" tabindex="-1"></a>boost_grid <span class="ot">&lt;-</span></span>
<span id="cb261-22"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-22" aria-hidden="true" tabindex="-1"></a><span class="fu">grid_max_entropy</span>(</span>
<span id="cb261-23"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-23" aria-hidden="true" tabindex="-1"></a>    boost_params,</span>
<span id="cb261-24"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb261-25"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb261-26"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-27"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-27" aria-hidden="true" tabindex="-1"></a><span class="co">#mi mostra la griglia di tutti i parametri</span></span>
<span id="cb261-28"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-28" aria-hidden="true" tabindex="-1"></a>boost_grid <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb261-29"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb261-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>,<span class="st">"stripe"</span>),<span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> min_n </th>
   <th style="text-align:right;"> tree_depth </th>
   <th style="text-align:right;"> learn_rate </th>
   <th style="text-align:right;"> loss_reduction </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0.0208366 </td>
   <td style="text-align:right;"> 0.0206979 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0.0062278 </td>
   <td style="text-align:right;"> 0.0506065 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 26 </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000006 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000002 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 0.0004022 </td>
   <td style="text-align:right;"> 0.0000035 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 29 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 0.0046913 </td>
   <td style="text-align:right;"> 7.0771249 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Creo il workflow ed eseguo il fit del modello con i diversi parametri</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-1" aria-hidden="true" tabindex="-1"></a>boost_wf <span class="ot">&lt;-</span></span>
<span id="cb262-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb262-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(boost_model) <span class="sc">%&gt;%</span></span>
<span id="cb262-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_formula</span>(sale_price_log <span class="sc">~</span> .)</span>
<span id="cb262-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-6" aria-hidden="true" tabindex="-1"></a>boost_tuned <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb262-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">object =</span> boost_wf,</span>
<span id="cb262-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> ames_folds,</span>
<span id="cb262-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> boost_grid,</span>
<span id="cb262-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, rsq, mae),</span>
<span id="cb262-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">control_grid</span>(<span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb262-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb262-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 1/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 2/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 3/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 4/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 5/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 6/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 7/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 8/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 9/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold1: preprocessor 1/1, model 10/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold1: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold1: internal</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 1/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 2/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 3/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 4/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 5/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 6/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 7/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 8/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 9/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold2: preprocessor 1/1, model 10/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold2: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold2: internal</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 1/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 2/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 3/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 4/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 5/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 6/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 7/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 8/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 9/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold3: preprocessor 1/1, model 10/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold3: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold3: internal</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 1/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 2/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 3/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 4/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 5/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 6/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 7/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 8/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 9/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold4: preprocessor 1/1, model 10/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold4: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold4: internal</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 1/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 1/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 2/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 2/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 3/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 3/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 4/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 4/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 5/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 5/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 6/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 6/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 7/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 7/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 8/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 8/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 9/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 9/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: preprocessor 1/1, model 10/10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold5: preprocessor 1/1, model 10/10 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Fold5: internal: A correlation computation is required, but `estimate` is constant and ha...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold5: internal</code></pre>
</div>
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb433-1" aria-hidden="true" tabindex="-1"></a>boost_tuned<span class="sc">%&gt;%</span><span class="fu">unnest</span>(.metrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 11
   splits            id    min_n tree_…¹ learn…² loss_…³ .metric .esti…⁴ .esti…⁵
   &lt;list&gt;            &lt;chr&gt; &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;
 1 &lt;split [460/116]&gt; Fold1     6       1 2.08e-2 2.07e-2 rmse    standa…  0.0647
 2 &lt;split [460/116]&gt; Fold1     6       1 2.08e-2 2.07e-2 rsq     standa…  0.781 
 3 &lt;split [460/116]&gt; Fold1     6       1 2.08e-2 2.07e-2 mae     standa…  0.0457
 4 &lt;split [460/116]&gt; Fold1    25       3 6.23e-3 5.06e-2 rmse    standa…  0.0646
 5 &lt;split [460/116]&gt; Fold1    25       3 6.23e-3 5.06e-2 rsq     standa…  0.786 
 6 &lt;split [460/116]&gt; Fold1    25       3 6.23e-3 5.06e-2 mae     standa…  0.0456
 7 &lt;split [460/116]&gt; Fold1    26      14 3.74e-9 6.46e-7 rmse    standa…  4.72  
 8 &lt;split [460/116]&gt; Fold1    26      14 3.74e-9 6.46e-7 rsq     standa… NA     
 9 &lt;split [460/116]&gt; Fold1    26      14 3.74e-9 6.46e-7 mae     standa…  4.72  
10 &lt;split [460/116]&gt; Fold1    15       5 3.50e-8 1.74e-7 rmse    standa…  4.72  
# … with 140 more rows, 2 more variables: .config &lt;chr&gt;, .notes &lt;list&gt;, and
#   abbreviated variable names ¹​tree_depth, ²​learn_rate, ³​loss_reduction,
#   ⁴​.estimator, ⁵​.estimate</code></pre>
</div>
</div>
<p>Scelgo poi i migliori parametri attraverso l’RMSE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb435-1" aria-hidden="true" tabindex="-1"></a>boost_best_params <span class="ot">&lt;-</span> boost_tuned <span class="sc">%&gt;%</span><span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb435-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb435-2" aria-hidden="true" tabindex="-1"></a>boost_best_params</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  min_n tree_depth learn_rate loss_reduction .config              
  &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;                
1     2         10    0.00650     0.00000757 Preprocessor1_Model10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb437"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb437-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb437-1" aria-hidden="true" tabindex="-1"></a>boost_model_final <span class="ot">&lt;-</span> boost_model <span class="sc">%&gt;%</span></span>
<span id="cb437-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb437-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_model</span>(boost_best_params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una volta scelti i parametri, valuto il modello scelto sul test set calcolandone l’RMSE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb438"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb438-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-1" aria-hidden="true" tabindex="-1"></a>train_processed  <span class="ot">&lt;-</span> <span class="fu">bake</span>(preprocessing_recipe, <span class="at">new_data =</span> ames_train)</span>
<span id="cb438-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-2" aria-hidden="true" tabindex="-1"></a>test_processed  <span class="ot">&lt;-</span> <span class="fu">bake</span>(preprocessing_recipe, <span class="at">new_data =</span> ames_test)</span>
<span id="cb438-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-6" aria-hidden="true" tabindex="-1"></a>test_prediction <span class="ot">&lt;-</span> boost_model_final <span class="sc">%&gt;%</span></span>
<span id="cb438-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">formula =</span> sale_price_log <span class="sc">~</span> .,</span>
<span id="cb438-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">data    =</span> train_processed) <span class="sc">%&gt;%</span></span>
<span id="cb438-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(<span class="at">new_data =</span> test_processed) <span class="sc">%&gt;%</span></span>
<span id="cb438-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(ames_test)</span>
<span id="cb438-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-12" aria-hidden="true" tabindex="-1"></a>boost_score <span class="ot">&lt;-</span></span>
<span id="cb438-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-13" aria-hidden="true" tabindex="-1"></a>  test_prediction <span class="sc">%&gt;%</span></span>
<span id="cb438-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">metrics</span>( sale_price_log, .pred) <span class="sc">%&gt;%</span></span>
<span id="cb438-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.estimate =</span> <span class="fu">format</span>(<span class="fu">round</span>(.estimate, <span class="dv">2</span>)))</span>
<span id="cb438-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-17" aria-hidden="true" tabindex="-1"></a>BOOST_RMSE<span class="ot">=</span>boost_score<span class="sc">$</span>.estimate[<span class="dv">1</span>]</span>
<span id="cb438-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb438-18" aria-hidden="true" tabindex="-1"></a>BOOST_RMSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0.07"</code></pre>
</div>
</div>
</section>
<section id="knn" class="level2">
<h2 class="anchored" data-anchor-id="knn">KNN<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#knn" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb440"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb440-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISLR)</span>
<span id="cb440-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb440-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(discrim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Caricamento pacchetto: 'discrim'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Il seguente oggetto è mascherato da 'package:dials':

    smoothness</code></pre>
</div>
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"kknn"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Caricamento pacchetto: 'kknn'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Il seguente oggetto è mascherato da 'package:caret':

    contr.dummy</code></pre>
</div>
</div>
<p>VALIDATION SET</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb446"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb446-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2</span>)</span>
<span id="cb446-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-2" aria-hidden="true" tabindex="-1"></a>ames_split <span class="ot">=</span> <span class="fu">initial_split</span>(ames_cleaned,<span class="at">prop=</span><span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb446-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-3" aria-hidden="true" tabindex="-1"></a>ames_train <span class="ot">=</span> <span class="fu">training</span>(ames_split)</span>
<span id="cb446-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-4" aria-hidden="true" tabindex="-1"></a>ames_test <span class="ot">=</span> <span class="fu">testing</span>(ames_split)</span>
<span id="cb446-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-6" aria-hidden="true" tabindex="-1"></a>ames_recipe <span class="ot">=</span> <span class="fu">recipe</span>(sale_price_log<span class="sc">~</span>., <span class="at">data=</span>ames_train) <span class="sc">%&gt;%</span> </span>
<span id="cb446-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>())</span>
<span id="cb446-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb446-9" aria-hidden="true" tabindex="-1"></a>ames_recipe <span class="sc">%&gt;%</span> <span class="fu">prep</span>(<span class="at">train=</span>ames_train) <span class="sc">%&gt;%</span> <span class="fu">bake</span>(<span class="at">new_data=</span><span class="cn">NULL</span>) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,163
Columns: 31
$ year_built                            &lt;dbl&gt; -0.07580472, -2.04526122, -1.377…
$ year_remod_add                        &lt;dbl&gt; -0.7257413, 1.0446135, -1.204215…
$ mas_vnr_area                          &lt;dbl&gt; 0.51811803, -0.56008521, -0.5600…
$ full_bath                             &lt;dbl&gt; -1.0115940, -1.0115940, -1.01159…
$ garage_cars                           &lt;dbl&gt; 0.3335473, -0.9975650, 0.3335473…
$ dummy_half_bath                       &lt;dbl&gt; 1.3299279, -0.7515728, 1.3299279…
$ dummy_fireplaces                      &lt;dbl&gt; 0.9710613, -1.0293250, 0.9710613…
$ dummy_wood_deck_sf                    &lt;dbl&gt; -0.9514768, -0.9514768, -0.95147…
$ dummy_open_porch_sf                   &lt;dbl&gt; 0.9031853, 0.9031853, 0.9031853,…
$ lot_area_log                          &lt;dbl&gt; 0.3159989, -0.4285414, 0.9278347…
$ first_flr_sf_log                      &lt;dbl&gt; -1.06774617, -0.22899234, 0.0151…
$ gr_liv_area_log                       &lt;dbl&gt; 0.46271433, -1.02798428, 0.77654…
$ ms_sub_class_one_story_1945_and_older &lt;dbl&gt; -0.2246922, 4.4484743, -0.224692…
$ ms_sub_class_two_story_1946_and_newer &lt;dbl&gt; 2.0549172, -0.4864126, -0.486412…
$ ms_zoning_residential_medium_density  &lt;dbl&gt; -0.4325164, 2.3109821, -0.432516…
$ neighborhood_northridge_heights       &lt;dbl&gt; -0.2325265, -0.2325265, -0.23252…
$ overall_cond_average                  &lt;dbl&gt; -1.1244273, -1.1244273, -1.12442…
$ exterior_2nd_vinyl_sd                 &lt;dbl&gt; 1.3764832, -0.7261532, -0.726153…
$ mas_vnr_type_none                     &lt;dbl&gt; -1.2744602, 0.7842832, 0.7842832…
$ foundation_c_block                    &lt;dbl&gt; 1.1598986, -0.8617458, -0.861745…
$ foundation_p_conc                     &lt;dbl&gt; -0.8914332, -0.8914332, 1.121270…
$ bsmt_fin_type_1glq                    &lt;dbl&gt; -0.6308771, -0.6308771, -0.63087…
$ heating_qc_typical                    &lt;dbl&gt; -0.6516938, 1.5337537, -0.651693…
$ central_air_y                         &lt;dbl&gt; 0.2670009, -3.7435747, 0.2670009…
$ electrical_s_brkr                     &lt;dbl&gt; 0.3021253, 0.3021253, 0.3021253,…
$ garage_type_detchd                    &lt;dbl&gt; -0.596614, 1.675351, -0.596614, …
$ garage_finish_no_garage               &lt;dbl&gt; -0.2347264, -0.2347264, -0.23472…
$ garage_finish_unf                     &lt;dbl&gt; -0.8658252, 1.1544336, 1.1544336…
$ garage_cond_typical                   &lt;dbl&gt; 0.311145, 0.311145, 0.311145, 0.…
$ paved_drive_paved                     &lt;dbl&gt; 0.3226246, 0.3226246, 0.3226246,…
$ sale_price_log                        &lt;dbl&gt; 5.238046, 4.929419, 5.322219, 5.…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb448-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb448-1" aria-hidden="true" tabindex="-1"></a>ames_knn <span class="ot">=</span> <span class="fu">nearest_neighbor</span>(<span class="at">mode=</span><span class="st">"regression"</span>, <span class="at">neighbors=</span><span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb448-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb448-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"kknn"</span>)</span>
<span id="cb448-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb448-3" aria-hidden="true" tabindex="-1"></a>k_grid<span class="ot">=</span><span class="fu">grid_regular</span>(<span class="fu">neighbors</span>(),<span class="at">levels=</span><span class="dv">6</span>)</span>
<span id="cb448-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb448-4" aria-hidden="true" tabindex="-1"></a>k_grid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  neighbors
      &lt;int&gt;
1         1
2         2
3         4
4         6
5         8
6        10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb450"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb450-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb450-1" aria-hidden="true" tabindex="-1"></a>ames_wflow<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb450-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb450-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(ames_recipe) <span class="sc">%&gt;%</span></span>
<span id="cb450-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb450-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(ames_knn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"kknn"</span>)</span>
<span id="cb451-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-2" aria-hidden="true" tabindex="-1"></a>ames_fold2<span class="ot">=</span><span class="fu">vfold_cv</span>(ames_train,<span class="at">v=</span><span class="dv">2</span>)</span>
<span id="cb451-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-4" aria-hidden="true" tabindex="-1"></a>ames_knn_fit<span class="ot">=</span> ames_wflow <span class="sc">%&gt;%</span> </span>
<span id="cb451-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples =</span> ames_fold2, <span class="co">#uso un fold con 2 split</span></span>
<span id="cb451-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">grid=</span>k_grid)</span>
<span id="cb451-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb451-8" aria-hidden="true" tabindex="-1"></a>ames_knn_fit <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(.metrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 8
   splits              id    neighbors .metric .estim…¹ .esti…² .config .notes  
   &lt;list&gt;              &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;list&gt;  
 1 &lt;split [1081/1082]&gt; Fold1         1 rmse    standard  0.101  Prepro… &lt;tibble&gt;
 2 &lt;split [1081/1082]&gt; Fold1         2 rmse    standard  0.0939 Prepro… &lt;tibble&gt;
 3 &lt;split [1081/1082]&gt; Fold1         4 rmse    standard  0.0858 Prepro… &lt;tibble&gt;
 4 &lt;split [1081/1082]&gt; Fold1         6 rmse    standard  0.0823 Prepro… &lt;tibble&gt;
 5 &lt;split [1081/1082]&gt; Fold1         8 rmse    standard  0.0807 Prepro… &lt;tibble&gt;
 6 &lt;split [1081/1082]&gt; Fold1        10 rmse    standard  0.0798 Prepro… &lt;tibble&gt;
 7 &lt;split [1081/1082]&gt; Fold1         1 rsq     standard  0.652  Prepro… &lt;tibble&gt;
 8 &lt;split [1081/1082]&gt; Fold1         2 rsq     standard  0.689  Prepro… &lt;tibble&gt;
 9 &lt;split [1081/1082]&gt; Fold1         4 rsq     standard  0.732  Prepro… &lt;tibble&gt;
10 &lt;split [1081/1082]&gt; Fold1         6 rsq     standard  0.751  Prepro… &lt;tibble&gt;
# … with 14 more rows, and abbreviated variable names ¹​.estimator, ²​.estimate</code></pre>
</div>
<div class="sourceCode cell-code" id="cb453"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb453-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(ames_knn_fit) <span class="sc">%&gt;%</span> </span>
<span id="cb453-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb453-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>neighbors,<span class="at">y=</span>mean,<span class="at">color=</span>.metric))<span class="sc">+</span></span>
<span id="cb453-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb453-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span><span class="fu">geom_line</span>()<span class="sc">+</span><span class="fu">facet_grid</span>(<span class="sc">~</span>.metric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-85-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>CROSS VALIDATION</p>
<p>A questo punto si effettua il fit sui diversi fold, e per i diversi valori del parametro di tuning, utilizzando la funzione {tune\_grid}.</p>
<p>Per visualizzare i risultati uso unnest o collect_metrics</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb454"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb454-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2</span>)</span>
<span id="cb454-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb454-2" aria-hidden="true" tabindex="-1"></a>ames_folds <span class="ot">=</span> <span class="fu">vfold_cv</span>(ames_train,<span class="at">v=</span><span class="dv">5</span>)</span>
<span id="cb454-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb454-3" aria-hidden="true" tabindex="-1"></a>ames_folds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  5-fold cross-validation 
# A tibble: 5 × 2
  splits             id   
  &lt;list&gt;             &lt;chr&gt;
1 &lt;split [1730/433]&gt; Fold1
2 &lt;split [1730/433]&gt; Fold2
3 &lt;split [1730/433]&gt; Fold3
4 &lt;split [1731/432]&gt; Fold4
5 &lt;split [1731/432]&gt; Fold5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb456-1" aria-hidden="true" tabindex="-1"></a>ames_K_tuned <span class="ot">=</span> ames_wflow <span class="sc">%&gt;%</span> </span>
<span id="cb456-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb456-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples =</span> ames_folds,</span>
<span id="cb456-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb456-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">grid=</span>k_grid)</span>
<span id="cb456-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb456-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb456-5" aria-hidden="true" tabindex="-1"></a>ames_K_tuned <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(.metrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 × 8
   splits             id    neighbors .metric .estima…¹ .esti…² .config .notes  
   &lt;list&gt;             &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;   &lt;list&gt;  
 1 &lt;split [1730/433]&gt; Fold1         1 rmse    standard   0.0901 Prepro… &lt;tibble&gt;
 2 &lt;split [1730/433]&gt; Fold1         2 rmse    standard   0.0848 Prepro… &lt;tibble&gt;
 3 &lt;split [1730/433]&gt; Fold1         4 rmse    standard   0.0771 Prepro… &lt;tibble&gt;
 4 &lt;split [1730/433]&gt; Fold1         6 rmse    standard   0.0732 Prepro… &lt;tibble&gt;
 5 &lt;split [1730/433]&gt; Fold1         8 rmse    standard   0.0710 Prepro… &lt;tibble&gt;
 6 &lt;split [1730/433]&gt; Fold1        10 rmse    standard   0.0698 Prepro… &lt;tibble&gt;
 7 &lt;split [1730/433]&gt; Fold1         1 rsq     standard   0.671  Prepro… &lt;tibble&gt;
 8 &lt;split [1730/433]&gt; Fold1         2 rsq     standard   0.700  Prepro… &lt;tibble&gt;
 9 &lt;split [1730/433]&gt; Fold1         4 rsq     standard   0.743  Prepro… &lt;tibble&gt;
10 &lt;split [1730/433]&gt; Fold1         6 rsq     standard   0.765  Prepro… &lt;tibble&gt;
# … with 50 more rows, and abbreviated variable names ¹​.estimator, ²​.estimate</code></pre>
</div>
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(ames_K_tuned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 7
   neighbors .metric .estimator   mean     n std_err .config             
       &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
 1         1 rmse    standard   0.0937     5 0.00281 Preprocessor1_Model1
 2         1 rsq     standard   0.697      5 0.0141  Preprocessor1_Model1
 3         2 rmse    standard   0.0871     5 0.00207 Preprocessor1_Model2
 4         2 rsq     standard   0.730      5 0.0120  Preprocessor1_Model2
 5         4 rmse    standard   0.0799     5 0.00108 Preprocessor1_Model3
 6         4 rsq     standard   0.768      5 0.00825 Preprocessor1_Model3
 7         6 rmse    standard   0.0768     5 0.00109 Preprocessor1_Model4
 8         6 rsq     standard   0.784      5 0.00782 Preprocessor1_Model4
 9         8 rmse    standard   0.0755     5 0.00140 Preprocessor1_Model5
10         8 rsq     standard   0.791      5 0.00839 Preprocessor1_Model5
11        10 rmse    standard   0.0749     5 0.00164 Preprocessor1_Model6
12        10 rsq     standard   0.795      5 0.00922 Preprocessor1_Model6</code></pre>
</div>
</div>
<p>Per visualizzare i risultati del processo di tuning</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb460-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(ames_K_tuned) <span class="sc">%&gt;%</span> </span>
<span id="cb460-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb460-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>neighbors,<span class="at">y=</span>mean,<span class="at">color=</span>.metric))<span class="sc">+</span></span>
<span id="cb460-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb460-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span><span class="fu">geom_line</span>()<span class="sc">+</span><span class="fu">facet_grid</span>(<span class="sc">~</span>.metric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-87-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Una volta definito il modello con il parametro di tuning ottimale, in questo caso 10, si effettua il fit su tutto il training set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb461"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb461-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-1" aria-hidden="true" tabindex="-1"></a>best_knn <span class="ot">=</span> ames_K_tuned <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb461-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-3" aria-hidden="true" tabindex="-1"></a>knn_rmse<span class="ot">=</span>ames_K_tuned <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(.metrics) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"rmse"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb461-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(neighbors) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">rmse=</span><span class="fu">mean</span>(.estimate)) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(rmse)</span>
<span id="cb461-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-6" aria-hidden="true" tabindex="-1"></a>final_knn <span class="ot">=</span> ames_wflow <span class="sc">%&gt;%</span> <span class="fu">finalize_workflow</span>(best_knn)</span>
<span id="cb461-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-8" aria-hidden="true" tabindex="-1"></a>final_knn_fit <span class="ot">=</span> final_knn <span class="sc">%&gt;%</span> <span class="fu">last_fit</span>(ames_split) </span>
<span id="cb461-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-9" aria-hidden="true" tabindex="-1"></a>KNN_RMSE<span class="ot">=</span>knn_rmse<span class="sc">$</span>rmse</span>
<span id="cb461-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb461-10" aria-hidden="true" tabindex="-1"></a>KNN_RMSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.09369098</code></pre>
</div>
</div>
</section>
</section>
<section id="miglior-modello-di-regressione" class="level1">
<h1>Miglior modello di Regressione</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb463"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb463-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb463-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-2" aria-hidden="true" tabindex="-1"></a>BOOST_RMSE <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(BOOST_RMSE)</span>
<span id="cb463-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Bar plot dei risultati</span></span>
<span id="cb463-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-5" aria-hidden="true" tabindex="-1"></a>Regression_RMSE <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Best subset"</span>, <span class="st">"LASSO"</span>, <span class="st">"Ridge"</span>, <span class="st">"PCA"</span>,<span class="st">"KNN"</span>, <span class="st">"Regression Tree"</span>, <span class="st">"Pruning"</span>, <span class="st">"RandomForest"</span>, <span class="st">"Boosting"</span>),</span>
<span id="cb463-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-7" aria-hidden="true" tabindex="-1"></a><span class="at">Test_RMSE =</span> <span class="fu">c</span>(<span class="fu">round</span>(BSS_RMSE,<span class="dv">4</span>), <span class="fu">round</span>(LASSO_RMSE,<span class="dv">4</span>),</span>
<span id="cb463-8"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-8" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(RIDGE_RMSE,<span class="dv">4</span>),<span class="fu">round</span>(pca_rmse,<span class="dv">4</span>), <span class="fu">round</span>(KNN_RMSE,<span class="dv">4</span>), <span class="fu">round</span>(REGTREE_RMSE,<span class="dv">4</span>),<span class="fu">round</span>(RMSE_PRUN,<span class="dv">4</span>),</span>
<span id="cb463-9"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">round</span>(RF_RMSE,<span class="dv">4</span>), <span class="fu">round</span>(BOOST_RMSE,<span class="dv">4</span>)</span>
<span id="cb463-10"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-11"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-11" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb463-12"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-13"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-13" aria-hidden="true" tabindex="-1"></a>p <span class="ot">=</span> Regression_RMSE <span class="sc">%&gt;%</span></span>
<span id="cb463-14"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(Model, Test_RMSE, <span class="at">ymin =</span> <span class="dv">0</span>,<span class="dv">00</span>, <span class="at">ymax =</span> <span class="fl">0.06</span>)) <span class="sc">+</span></span>
<span id="cb463-15"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-15" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span> (<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb463-16"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggtitle</span>(<span class="st">"Model comparison"</span>)</span>
<span id="cb463-17"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-18"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-18" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">30</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb463-19"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-19" aria-hidden="true" tabindex="-1"></a><span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">25</span>,<span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb463-20"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-20" aria-hidden="true" tabindex="-1"></a><span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb463-21"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-21" aria-hidden="true" tabindex="-1"></a><span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb463-22"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-22" aria-hidden="true" tabindex="-1"></a><span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">size =</span><span class="dv">20</span>),</span>
<span id="cb463-23"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-23" aria-hidden="true" tabindex="-1"></a><span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">25</span>)) <span class="sc">+</span></span>
<span id="cb463-24"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-24" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Test_RMSE),<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.9</span>), <span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.02</span>, <span class="at">size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb463-25"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb463-25" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">bgcolor</span>(<span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-89-1.png" class="img-fluid" width="2400"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb464"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb464-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-1" aria-hidden="true" tabindex="-1"></a>Model <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Best subset"</span>, <span class="st">"LASSO"</span>, <span class="st">"Ridge"</span>, <span class="st">"PCA"</span>,<span class="st">"KNN"</span>, <span class="st">"Regression Tree"</span>, <span class="st">"Pruning"</span>, <span class="st">"RandomForest"</span>, <span class="st">"Boosting"</span>)</span>
<span id="cb464-2"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-2" aria-hidden="true" tabindex="-1"></a>Test_RMSE <span class="ot">=</span> <span class="fu">c</span>(BSS_RMSE,LASSO_RMSE,RIDGE_RMSE,pca_rmse,KNN_RMSE,REGTREE_RMSE,RMSE_PRUN,RF_RMSE,BOOST_RMSE)</span>
<span id="cb464-3"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-3" aria-hidden="true" tabindex="-1"></a>min_value <span class="ot">&lt;-</span> <span class="fu">min</span>(Test_RMSE)</span>
<span id="cb464-4"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-4" aria-hidden="true" tabindex="-1"></a>min_index <span class="ot">&lt;-</span> <span class="fu">which.min</span>(Test_RMSE)</span>
<span id="cb464-5"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-5" aria-hidden="true" tabindex="-1"></a>min_model <span class="ot">&lt;-</span> Model[min_index]</span>
<span id="cb464-6"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-7"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb464-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Il minimo Test_RMSE ?:"</span>, min_value, <span class="st">" che appartiene a "</span>, min_model,<span class="st">" model"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Il minimo Test_RMSE ?: 0.07  che appartiene a  Boosting  model</code></pre>
</div>
</div>
<section id="importanza-dei-dati-nella-pca" class="level2">
<h2 class="anchored" data-anchor-id="importanza-dei-dati-nella-pca">Importanza dei dati nella PCA<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#importanza-dei-dati-nella-pca" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb466-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca.lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-91-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-91-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-91-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-91-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb467-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pca.lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sale_price_log ~ ., data = pca.train)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.43188 -0.03638  0.00161  0.03723  0.23705 

Coefficients:
              Estimate Std. Error  t value Pr(&gt;|t|)    
(Intercept)  5.2167480  0.0013436 3882.799  &lt; 2e-16 ***
PC1          0.0493116  0.0004576  107.772  &lt; 2e-16 ***
PC2         -0.0183604  0.0008262  -22.222  &lt; 2e-16 ***
PC3          0.0134051  0.0009319   14.385  &lt; 2e-16 ***
PC4         -0.0160029  0.0010063  -15.903  &lt; 2e-16 ***
PC5          0.0029442  0.0010377    2.837 0.004595 ** 
PC6          0.0088393  0.0011290    7.829 7.65e-15 ***
PC7          0.0210269  0.0012680   16.583  &lt; 2e-16 ***
PC8          0.0018744  0.0013549    1.384 0.166655    
PC9         -0.0004252  0.0013958   -0.305 0.760672    
PC10         0.0051515  0.0014829    3.474 0.000523 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.06249 on 2152 degrees of freedom
Multiple R-squared:  0.8573,    Adjusted R-squared:  0.8566 
F-statistic:  1293 on 10 and 2152 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Il Residual Standard Error (RSE) è una misura dell’errore residuo nella previsione del modello. In questo caso, il valore di RSE è 0.06249, il che significa che la media delle differenze tra i valori previsti e i valori osservati è di 0.06249.</p>
<p>Il valore di R2 ajustato tiene conto del numero di variabili nel modello. In questo caso, il valore di R2 ajustado è di 0.8566, il che significa che l’85,66% della varianza della variabile dipendente è spiegata dal modello, tenendo conto del numero di variabili utilizzate nel modello.</p>
<p>Il valore del test F-statistic (F-value) è una misura della significatività del modello. Il valore del test F-statistic è 1293 on 10 and 2152 DF, il che significa che il modello è statisticamente significativo. Il valore del p-value (p-value) è inferiore a 2.2e-16, il che significa che la probabilità che il modello sia stato ottenuto per caso è molto bassa.</p>
<section id="grafico-dellimportanza" class="level4">
<h4 class="anchored" data-anchor-id="grafico-dellimportanza">grafico dell’importanza<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#grafico-dellimportanza" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb469"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb469-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vip</span>(pca.lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="./Final project_files/unnamed-chunk-92-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>visualizzo la PC1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb470"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb470-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb470-1" aria-hidden="true" tabindex="-1"></a>pca.fit<span class="sc">$</span>rotation[, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                           year_built                        year_remod_add 
                           0.27605023                            0.23540651 
                         mas_vnr_area                             full_bath 
                           0.14666751                            0.22191593 
                          garage_cars                       dummy_half_bath 
                           0.23955820                            0.12349884 
                     dummy_fireplaces                    dummy_wood_deck_sf 
                           0.15700214                            0.13129522 
                  dummy_open_porch_sf                          lot_area_log 
                           0.19515707                            0.08795574 
                     first_flr_sf_log                       gr_liv_area_log 
                           0.16441172                            0.21922331 
                       sale_price_log ms_sub_class_one_story_1945_and_older 
                           0.29882029                           -0.11574706 
ms_sub_class_two_story_1946_and_newer  ms_zoning_residential_medium_density 
                           0.17653266                           -0.13780754 
      neighborhood_northridge_heights                  overall_cond_average 
                           0.12501078                            0.19255602 
                exterior_2nd_vinyl_sd                     mas_vnr_type_none 
                           0.19113509                           -0.16315872 
                   foundation_c_block                     foundation_p_conc 
                          -0.16114501                            0.25070020 
                   bsmt_fin_type_1glq                    heating_qc_typical 
                           0.17777361                           -0.14821692 
                        central_air_y                     electrical_s_brkr 
                           0.13259801                            0.12857675 
                   garage_type_detchd               garage_finish_no_garage 
                          -0.17665449                           -0.10096820 
                    garage_finish_unf                   garage_cond_typical 
                          -0.19774670                            0.13228993 
                    paved_drive_paved 
                           0.13771961 </code></pre>
</div>
</div>
<p>mi seleziono le 10 variabili piu’ importanti per la PCA</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb472-1"><a href="file:///C:/Users/39388/Downloads/final_project_Emanuele_Iaccarino.html#cb472-1" aria-hidden="true" tabindex="-1"></a>pca.fit<span class="sc">$</span>rotation[<span class="fu">order</span>(pca.fit<span class="sc">$</span>rotation[,<span class="st">'PC1'</span>], <span class="at">decreasing =</span> <span class="cn">TRUE</span>),][<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            PC1         PC2         PC3         PC4         PC5
sale_price_log        0.2988203 -0.11126131  0.08123251 -0.09697518  0.01784119
year_built            0.2760502  0.05421106 -0.11526726  0.26933610 -0.04144930
foundation_p_conc     0.2507002  0.27284332 -0.11820816 -0.02315629  0.12878053
garage_cars           0.2395582 -0.17419506 -0.12242078 -0.17565391  0.18289772
year_remod_add        0.2354065  0.16035355 -0.11425266  0.06814820  0.04921024
full_bath             0.2219159  0.06980508  0.10514039 -0.17434216  0.03119397
gr_liv_area_log       0.2192233 -0.07953591  0.19001678 -0.37140387 -0.11439563
dummy_open_porch_sf   0.1951571  0.11956941  0.02077237 -0.07632784 -0.03587891
overall_cond_average  0.1925560  0.13791283 -0.06118759  0.11533261  0.06282607
exterior_2nd_vinyl_sd 0.1911351  0.23244041 -0.14154998  0.00920015  0.03472910
                               PC6         PC7         PC8          PC9
sale_price_log         0.053564796  0.12741967  0.01135883 -0.002576733
year_built             0.022859746 -0.17468716  0.04070486 -0.043307258
foundation_p_conc      0.071484996 -0.08666639  0.03762480  0.013815976
garage_cars            0.011637600 -0.09429824 -0.01207986 -0.048832086
year_remod_add         0.090007052  0.23739733 -0.08263646  0.075951998
full_bath              0.028528685  0.10492605  0.28866937 -0.137075328
gr_liv_area_log       -0.090726020  0.21929912  0.22579743 -0.087785253
dummy_open_porch_sf   -0.031564576 -0.03132872  0.09438067  0.103109798
overall_cond_average  -0.007075391 -0.33911573  0.17391971 -0.138719636
exterior_2nd_vinyl_sd  0.099704243 -0.12495518 -0.08139262  0.113754421
                             PC10        PC11         PC12          PC13
sale_price_log         0.03121741 -0.04655656  0.030008424 -0.1073704227
year_built            -0.04079167  0.03501772  0.019618738  0.0183662158
foundation_p_conc     -0.03536934  0.01275756 -0.003252377  0.0288639789
garage_cars           -0.03852755  0.07930435 -0.029716298  0.0665920641
year_remod_add         0.07162343  0.07872151 -0.027012441 -0.0654755357
full_bath             -0.13263055  0.18329169 -0.099032569  0.1412956370
gr_liv_area_log       -0.03719159  0.05510750 -0.012953175  0.0005808642
dummy_open_porch_sf   -0.33406890 -0.26418401 -0.029718686 -0.2747843880
overall_cond_average  -0.29891728  0.13393024  0.065775261  0.1558971665
exterior_2nd_vinyl_sd  0.22804040  0.15333813 -0.052403050  0.3130549469
                              PC14         PC15         PC16         PC17
sale_price_log         0.061724867 -0.086451833 -0.022376206  0.011288850
year_built             0.004543074  0.006325007  0.010627687  0.042613860
foundation_p_conc      0.200524988  0.065232099 -0.015576203 -0.010270047
garage_cars           -0.059630506 -0.035679521 -0.126206563  0.041599433
year_remod_add        -0.208563002 -0.044073194  0.014480678  0.130195300
full_bath             -0.234229826 -0.187284062  0.175822872  0.398685316
gr_liv_area_log        0.043339632 -0.158064319  0.004541463  0.004077865
dummy_open_porch_sf   -0.519113075  0.197410285  0.280509027 -0.487076767
overall_cond_average   0.383681224  0.028073203  0.070132636 -0.319596357
exterior_2nd_vinyl_sd -0.164458143 -0.102882238 -0.184830936 -0.160441638
                              PC18        PC19        PC20        PC21
sale_price_log         0.012697599  0.05294743  0.05171963 -0.12835368
year_built            -0.014166332 -0.02691354 -0.02967011 -0.16936055
foundation_p_conc      0.192090309 -0.04960281  0.29181167  0.14060051
garage_cars            0.078577005  0.14674124 -0.12679193 -0.16567342
year_remod_add         0.009757779 -0.01310868  0.21465645 -0.44466082
full_bath             -0.024570985 -0.32552214 -0.26276691  0.10033835
gr_liv_area_log        0.037738347  0.07285765 -0.02134357 -0.05056530
dummy_open_porch_sf   -0.047278585 -0.07063540  0.07163440  0.09450074
overall_cond_average  -0.067198146  0.07763318 -0.43226464 -0.07129371
exterior_2nd_vinyl_sd -0.571105339 -0.03295966  0.15335886 -0.15690370
                              PC22         PC23        PC24         PC25
sale_price_log        -0.009650728  0.032729162 -0.03941319 -0.002169152
year_built             0.016165194  0.084153029  0.17967138 -0.054828269
foundation_p_conc     -0.033788891 -0.026382195  0.10502224 -0.018497193
garage_cars           -0.415664526  0.269364441  0.52078512 -0.086305635
year_remod_add         0.407941295  0.470526835 -0.15267032  0.088582712
full_bath              0.062586582 -0.047238692 -0.01099823 -0.089050467
gr_liv_area_log        0.027127991 -0.241190420 -0.11517314  0.100758084
dummy_open_porch_sf   -0.049578278 -0.003666197  0.04341667 -0.076593945
overall_cond_average   0.221348442  0.131025506 -0.19824690  0.050344835
exterior_2nd_vinyl_sd -0.117445999 -0.388247592 -0.04890843 -0.091076113
                             PC26        PC27         PC28         PC29
sale_price_log        -0.16244602 -0.02888574 -0.115201557 -0.796532495
year_built            -0.15983342 -0.54029213  0.206596663  0.063713542
foundation_p_conc     -0.10974834 -0.29858865  0.132538182 -0.178847507
garage_cars            0.06277811  0.13028353 -0.383228731  0.127545467
year_remod_add        -0.03496073  0.20396686  0.003595578  0.160435863
full_bath              0.36946602 -0.19079856  0.090802922  0.019899782
gr_liv_area_log       -0.14941304  0.22423412 -0.022933111 -0.014488978
dummy_open_porch_sf    0.04865637  0.02452637 -0.039632912  0.001456047
overall_cond_average   0.03471469  0.21361659 -0.056620234 -0.033503522
exterior_2nd_vinyl_sd  0.07578972  0.10413452 -0.028293723 -0.028099297
                              PC30         PC31
sale_price_log        -0.314307890 -0.191566988
year_built            -0.318016365  0.504659049
foundation_p_conc      0.663823705 -0.146313390
garage_cars            0.080771636 -0.006027301
year_remod_add         0.099778460 -0.034381658
full_bath             -0.033817396 -0.214889330
gr_liv_area_log        0.259855727  0.615664536
dummy_open_porch_sf   -0.011759436  0.014215114
overall_cond_average   0.021845970 -0.072593867
exterior_2nd_vinyl_sd -0.009896441 -0.017727850</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="considerazioni-finali" class="level1">
<h1>Considerazioni finali</h1>
<p>In questo progetto ho applicato 8 algoritmi per prevedere il prezzo di vendita delle case in AMES, IA.</p>
<p>Ho utilizzato tecniche lineari come Ridge e Lasso cosi come tecniche non lineari come i Regression Tree</p>
<p>Ho utilizzato tecniche parametriche come Best Subset Selection cosi come ho usato tecniche non parametriche come il KNN</p>
<p>Per ogni tecnica utilizzata abbiamo calcolato l’RMSE, la metrica utilizzata alla fine per decretare il miglior modello di Regressione</p>
<p>Del nostro miglior modello (PCA) riporto le variabili piu’ importanti:</p>
<pre><code>year_built           
foundation_p_conc       
garage_cars           
year_remod_add        
full_bath            
gr_liv_area_log       
dummy_open_porch_sf   
overall_cond_average  
exterior_2nd_vinyl_sd </code></pre>
<p>A livello logico mi ritrovo con le variabili utilizzate in quanto nella scelta della casa le persone tendono a cercare case con un salone grande, con piu’ bagni e piu’ posti auto. La variabile foundation_concreate indica che questo determinato materiale (dovrebbe essere calcestruzzo o cemento?)influenza particolarmente il prezzo della casa.</p>
<p>Ovviamente sono considerate importanti anche l’anno di costruzione della casa e l’anno in cui ? stata rimodellata(le due variabili sono abbastanze correlate [0,612] ma rientrano nella condizione inserita in fase di EDA, inoltre avevo creato una variabile dummy per vedere se la casa era sta rimodellata o meno ma è stata rimossa dal modello in quanto poco significativa)</p>
<p>La presenza di una veranda ovviamente influisce positivamente nel prezzo, cosi come l’utilizzo di materiali di qualit? all’esterno</p>
<p>N.B</p>
<p>Boosting, Regression Tree e Best Subset Selection si sono rilevati pesanti dal punto di vista computazionale ma era alquanto scontato</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>